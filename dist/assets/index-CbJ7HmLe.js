import{_ as M,a as z,b as G}from"./tips-DfmWQaVF.js";import{d as R,g as W,r as d,y as H,o as K,E as b,c as k,i as s,v as u,t as c,u as n,s as Q,e as P,w as S,F as j,m as D,A as X,f as E,p as Y,h as Z,a as C,q as U,j as ss,_ as es}from"./index-Ca3ktP95.js";import{x as ts,i as as}from"./common-CN53Xqpj.js";import"./userinfo-CWw1Q2oY.js";const a=w=>(Y("data-v-1fdd0c66"),w=w(),Z(),w),os={class:"main"},ns={class:"header"},cs=a(()=>s("span",{class:"title"},"派工单状态",-1)),ls={class:"step"},is={class:"order_info"},ds=a(()=>s("span",{class:"title"},"派工单详情",-1)),_s={class:"main_field"},ps={class:"row_field"},rs={class:"field"},us=a(()=>s("span",{class:"label"},"派工编号：",-1)),hs={class:"value"},ms={class:"field"},fs=a(()=>s("span",{class:"label"},"派工类型：",-1)),vs={class:"value"},gs={class:"field"},xs=a(()=>s("span",{class:"label"},"派工状态：",-1)),ys={class:"value"},bs={class:"row_field"},Ps={class:"field"},Cs=a(()=>s("span",{class:"label"},"服务技工：",-1)),ws={class:"value"},Is={class:"field"},ks=a(()=>s("span",{class:"label"},"服务技工电话：",-1)),Es={class:"value"},Ns={class:"field"},Ss=a(()=>s("span",{class:"label"},"客户地址：",-1)),Ts={class:"value"},Bs={class:"row_field"},js={class:"field"},Ds=a(()=>s("span",{class:"label"},"客户姓名：",-1)),Js={class:"value"},Fs={class:"field"},Vs=a(()=>s("span",{class:"label"},"客户电话：",-1)),$s={class:"value"},Ls=a(()=>s("span",{class:"title"},"派工要求",-1)),Os={class:"other_field"},qs={class:"row_field"},As={class:"field"},Ms=a(()=>s("span",{class:"label"},"计划开始：",-1)),zs={class:"value"},Gs={class:"field"},Rs=a(()=>s("span",{class:"label"},"计划结束：",-1)),Ws={class:"value"},Hs={class:"field"},Ks=a(()=>s("span",{class:"label"},"优先级：",-1)),Qs={class:"value"},Xs={class:"row_field"},Ys={class:"field"},Zs=a(()=>s("span",{class:"label"},"是否具备安装条件：",-1)),Us={class:"value"},se={class:"dispatch_attachment_list"},ee=a(()=>s("span",{class:"table_title"},"派工附件",-1)),te={class:"table_content"},ae={class:"action_list"},oe=a(()=>s("img",{src:M,alt:""},null,-1)),ne={class:"right"},ce={class:"userinfo"},le=a(()=>s("img",{src:z,alt:""},null,-1)),ie={class:"username"},de={class:"content"},_e={class:"date"},pe=a(()=>s("span",{class:"reply"},"回复",-1)),re=a(()=>s("img",{class:"tips",src:G,alt:""},null,-1)),ue=R({__name:"index",setup(w){W();const _=d(3),T=d([]),J=H();let o=d({});const N=d([]),F=d([{code:"1",name:"最高"},{code:"2",name:"高"},{code:"3",name:"中"},{code:"4",name:"低"}]),V=d([{code:"all",name:"全部"},{code:"0",name:"配送派工单"},{code:"1",name:"安装派工单"},{code:"2",name:"维修派工单"}]),$=d([{code:"all",name:"全部"},{code:"0",name:"待开始"},{code:"1",name:"进行中"},{code:"2",name:"已完成"}]);d([{text1:"CS0011-06665-01",text2:"门套",text3:"示例字段...",text4:"混油米灰1#",text5:"2021-02-28 10:30:50",text6:""},{text1:"CS0011-06665-01",text2:"门套",text3:"示例字段...",text4:"混油米灰1#",text5:"2021-02-28 10:30:50",text6:""},{text1:"CS0011-06665-01",text2:"门套",text3:"示例字段...",text4:"混油米灰1#",text5:"2021-02-28 10:30:50",text6:""}]),d([{text1:"SU2024030101",text2:"未评价",text3:"待填写",text4:"李工",text5:"2021-02-28 10:30:50",text6:""}]);const h=d([]),m=i=>{_.value=i},B=()=>{X.prompt("请填写评论内容","发起评论",{inputPattern:/\S/,inputErrorMessage:"评论内容不能为空!",confirmButtonText:"确认",cancelButtonText:"取消"}).then(({value:i})=>{T.value.push({userName:"经销商",text:i,date:new Date().toLocaleString()})}).catch(()=>{})};K(()=>{L(!0,J.query.id),O(!1)});const L=(i,l)=>{ts(l).then(p=>{let e=p.data.data;if(e!=null){o.value=e,m(e.stage__c);var r="https://sh.mengtian.com.cn:9595/md/api/common/file/direct-download?fileId=";if(e.goodsPicture!=null&&e.goodsPicture.length>0){var I=[];e.goodsPicture.forEach(t=>{I.push(r+t)}),h.value.push({picNo:e.goodsPicture.join(","),type:"货物图片",goodsPicture:I})}if(e.docPicture!=null&&e.docPicture.length>0){var f=[];e.docPicture.forEach(t=>{f.push(r+t)}),h.value.push({picNo:e.docPicture.join(","),type:"安装图片",goodsPicture:f})}if(e.checkInPicture!=null&&e.checkInPicture.length>0){var v=[];e.checkInPicture.forEach(t=>{v.push(r+t)}),h.value.push({picNo:e.checkInPicture.join(","),type:"打卡签到",goodsPicture:v})}if(e.scenePicture!=null&&e.scenePicture.length>0){var g=[];e.scenePicture.forEach(t=>{g.push(r+t)}),h.value.push({picNo:e.scenePicture.join(","),type:"现场墙面保护",goodsPicture:g})}if(e.afterInstallPicture!=null&&e.afterInstallPicture.length>0){var x=[];e.afterInstallPicture.forEach(t=>{x.push(r+t)}),h.value.push({picNo:e.afterInstallPicture.join(","),type:"安装后图片",goodsPicture:x})}if(e.completePicture!=null&&e.completePicture.length>0){var y=[];e.completePicture.forEach(t=>{y.push(r+t)}),h.value.push({picNo:e.completePicture.join(","),type:"完工证明",goodsPicture:y})}i&&b({message:"查询成功",type:"success"})}else i&&b({message:"获取数据失败",type:"error"})}).catch(p=>{b({message:"请求数据失败，请重试",type:"error"}),console.error("请求数据失败:",p)})},O=i=>{as({userType:1,name:"",phone:""}).then(p=>{let e=p.data.data;e!=null&&e.length>0?(N.value=e,i&&b({message:"查询成功",type:"success"})):i&&b({message:"获取数据失败",type:"error"})})};return(i,l)=>{var f,v,g,x,y;const p=E("el-table-column"),e=E("el-image"),r=E("el-table"),I=E("el-button");return C(),k("div",os,[s("span",ns,[cs,s("span",ls,[s("span",{class:"item",onClick:l[0]||(l[0]=t=>m(0))},[s("span",{class:u(_.value==0?"num_selected":"num")},"1",2),s("span",{class:u(_.value>=0?"name_selected":"name")},"待开始",2)]),s("span",{class:"item",onClick:l[1]||(l[1]=t=>m(1))},[s("span",{class:u(_.value==1?"num_selected":"num")},"2",2),s("span",{class:u(_.value>=1?"name_selected":"name")},"进行中",2)]),s("span",{class:"item",onClick:l[2]||(l[2]=t=>m(2))},[s("span",{class:u(_.value==2?"num_selected":"num")},"3",2),s("span",{class:u(_.value>=2?"name_selected":"name")},"已完成",2)]),s("span",{class:"item",onClick:l[3]||(l[3]=t=>m(3))},[s("span",{class:u(_.value==3?"num_selected":"num")},"4",2),s("span",{class:u(_.value>=3?"name_selected":"name")},"已评价",2)])])]),s("span",is,[ds,s("span",_s,[s("span",ps,[s("span",rs,[us,s("span",hs,c(n(o).caseNo),1),Q("",!0)]),s("span",ms,[fs,s("span",vs,c(n(o).fieldJobType__c?(f=V.value.find(t=>t.code==n(o).fieldJobType__c))==null?void 0:f.name:"配送派工单"),1)]),s("span",gs,[xs,s("span",ys,c(n(o).stage__c?(v=$.value.find(t=>t.code==n(o).stage__c))==null?void 0:v.name:"待开始"),1)])]),s("span",bs,[s("span",Ps,[Cs,s("span",ws,c(n(o).followerId?(g=N.value.find(t=>t.id==n(o).followerId))==null?void 0:g.name:""),1)]),s("span",Is,[ks,s("span",Es,c(n(o).followerId?(x=N.value.find(t=>t.id==n(o).followerId))==null?void 0:x.phone:""),1)]),s("span",Ns,[Ss,s("span",Ts,c(n(o).address),1)])]),s("span",Bs,[s("span",js,[Ds,s("span",Js,c(n(o).fieldJobContactName),1)]),s("span",Fs,[Vs,s("span",$s,c(n(o).contactTelephone),1)])])]),Ls,s("span",Os,[s("span",qs,[s("span",As,[Ms,s("span",zs,c(n(o).appointmentStartTime),1)]),s("span",Gs,[Rs,s("span",Ws,c(n(o).appointmentEndTime),1)]),s("span",Hs,[Ks,s("span",Qs,c(n(o).priority?(y=F.value.find(t=>t.code==n(o).priority))==null?void 0:y.name:""),1)])]),s("span",Xs,[s("span",Ys,[Zs,s("span",Us,c(n(o).whetherEvaluation===!1?"否":"是"),1)])])])]),s("span",se,[ee,s("span",te,[P(r,{data:h.value,stripe:!1,style:{width:"100%"},"max-height":"100"},{default:S(()=>[P(p,{prop:"picNo",label:"附件编号"}),P(p,{prop:"type",label:"类型"}),P(p,{prop:"text3",label:"附件链接"},{default:S(({row:t})=>[(C(!0),k(j,null,D(t.goodsPicture,(q,A)=>(C(),U(e,{key:A,style:{"margin-right":"5px",width:"50px"},src:q,"preview-src-list":t.goodsPicture},null,8,["src","preview-src-list"]))),128))]),_:1})]),_:1},8,["data"])])]),s("span",ae,[s("div",{class:"left"},[oe,s("span",{class:"initiate_comments",onClick:B},"发起任务评论")]),s("div",ne,[P(I,{type:"primary",onClick:B,class:"primary_btn"},{default:S(()=>[ss("编辑")]),_:1})])]),(C(!0),k(j,null,D(T.value,t=>(C(),k("div",{class:"comment",key:t.date},[s("div",ce,[le,s("span",ie,c(t.userName),1)]),s("div",de,c(t.text),1),s("div",_e,c(t.date),1),pe,re]))),128))])}}}),ge=es(ue,[["__scopeId","data-v-1fdd0c66"]]);export{ge as default};
