import{_ as Qe,a as Xe,b as Ze}from"./tips-DfmWQaVF.js";import{_ as se}from"./add-CRTT_dyr.js";import{d as et,g as tt,r as h,y as at,b as L,o as lt,z as st,E as x,c as O,i as e,v as m,j as b,q as y,w as o,s as V,t as w,e as l,F as J,m as $,A as fe,f as D,p as ot,h as nt,a as _,u as v,x as le,_ as it}from"./index-Ca3ktP95.js";import{f as rt,h as dt,i as ut,u as ct,j as ve,e as pt}from"./common-CN53Xqpj.js";import"./userinfo-CWw1Q2oY.js";const u=M=>(ot("data-v-8fe262d2"),M=M(),nt(),M),mt={class:"header"},_t=u(()=>e("span",{class:"title"},"任务状态",-1)),ft={class:"step"},vt={class:"item"},ht={class:"item"},bt={class:"item"},yt={class:"item"},gt={class:"item"},Tt={class:"task_info"},Ct={class:"title"},Vt={class:"main_field"},wt={class:"row_field"},kt={class:"field"},Nt=u(()=>e("span",{class:"label"},"任务编号：",-1)),Dt={class:"value"},Pt={class:"field"},xt=u(()=>e("span",{class:"label"},"经销商：",-1)),It={class:"value"},St={class:"field"},Ot=u(()=>e("span",{class:"label"},"经销商负责人：",-1)),qt={class:"value"},Et={class:"row_field"},Ut={class:"field"},Lt=u(()=>e("span",{class:"label"},"客户名称：",-1)),Jt={class:"value"},$t={class:"field"},Rt=u(()=>e("span",{class:"label"},"当前负责人：",-1)),Ft={class:"value"},Yt={class:"field"},Ht=u(()=>e("span",{class:"label"},"创建时间：",-1)),Bt={class:"value"},Mt={class:"row_field"},At={class:"field"},zt=u(()=>e("span",{class:"label"},"客户电话：",-1)),jt={class:"value"},Wt={class:"field"},Gt=u(()=>e("span",{class:"label"},"客户地址：",-1)),Kt={class:"value"},Qt=u(()=>e("span",{class:"field"},[e("span",{class:"label"}),e("span",{class:"value"})],-1)),Xt={class:"order_status"},Zt=u(()=>e("span",{class:"title"},"订单状态",-1)),ea={class:"step"},ta={class:"item"},aa={class:"related_item_order"},la=u(()=>e("span",{class:"table_title"},"相关项>订单",-1)),sa={class:"table_content"},oa=["onClick"],na={class:"related_item_invoice"},ia=u(()=>e("span",{class:"table_title"},"相关项>包装清单",-1)),ra={class:"table_content"},da=["onClick"],ua=u(()=>e("span",null,"查看",-1)),ca=[ua],pa={class:"related_item_invoice"},ma=u(()=>e("span",{class:"table_title"},"相关项>派工单",-1)),_a={class:"table_content"},fa={style:{display:"flex","align-items":"center",color:"#165dff",cursor:"pointer"}},va=["onClick"],ha={style:{color:"blue"}},ba={style:{display:"flex","align-items":"center"}},ya={class:"action_list"},ga=u(()=>e("img",{src:Qe,alt:""},null,-1)),Ta={class:"right"},Ca={class:"userinfo"},Va=u(()=>e("img",{src:Xe,alt:""},null,-1)),wa={class:"username"},ka={class:"content"},Na={class:"date"},Da=u(()=>e("span",{class:"reply"},"回复",-1)),Pa=u(()=>e("img",{class:"tips",src:Ze,alt:""},null,-1)),xa={class:"deliveryOrderDialog"},Ia={class:"step"},Sa={class:"item"},Oa=u(()=>e("span",{class:"remark"},"选择配送货品的司机",-1)),qa={class:"item"},Ea=u(()=>e("span",{class:"remark"},"如有,请填写关键备注",-1)),Ua={class:"item"},La=u(()=>e("span",{class:"remark"},"等待司机配送",-1)),Ja={class:"content"},$a=u(()=>e("span",{class:"custom_item"},[e("img",{src:se,alt:""})],-1)),Ra={class:"dialog-footer"},Fa={class:"installationOrderDialog"},Ya={class:"step"},Ha={class:"item"},Ba=u(()=>e("span",{class:"remark"},"选择负责安装的技工",-1)),Ma={class:"item"},Aa=u(()=>e("span",{class:"remark"},"如有,请填写关键备注",-1)),za={class:"item"},ja=u(()=>e("span",{class:"remark"},"等待现场服务",-1)),Wa={class:"content"},Ga=u(()=>e("span",{class:"custom_item1"},[e("img",{src:se,alt:""})],-1)),Ka={style:{width:"300px"}},Qa=u(()=>e("span",{class:"custom_item"},[e("img",{src:se,alt:""})],-1)),Xa={class:"dialog-footer"},Za={class:"problemReportingDialog"},el={class:"step"},tl={class:"item"},al=u(()=>e("span",{class:"name"},[b("完善提报信息 "),e("span",{class:"remark"},"完善问题提报的信息")],-1)),ll={class:"item"},sl=u(()=>e("span",{class:"name"},[b("完成创建 "),e("span",{class:"remark"},"等待售服部处理")],-1)),ol={class:"content"},nl={class:"dialog-footer"},il=et({__name:"index",setup(M){const{proxy:U}=tt(),oe=h(4),ne=h([]),A=new Date,T=at();T.query.id,T.query.serviceCaseId;const he=T.query.orderId,ie=T.query.status!=null?parseInt(T.query.status.toString(),0)+1:1;T.query.taskType;const q=h({taskid:T.query.id,serviceCaseNeoId:T.query.serviceCaseId,orderId:T.query.orderId,taskStatus:ie,accountName:T.query.accountName,distributorName:T.query.distributorName,followerName:T.query.followerName,createdTime:T.query.createdTime,createdBy:T.query.createdBy}),be=h([{code:"0",name:"配送派工单"},{code:"1",name:"安装派工单"},{code:"2",name:"维修派工单"}]),g=h(ie),k=h(1),N=h(1),re=h(1),de=h(),ue=h([{code:"1",name:"最高级"},{code:"2",name:"高"},{code:"3",name:"中"},{code:"4",name:"低"}]);let d=L({fieldJobContactName:"",contactTelephone:"",priority:"",type:"配送派工",remark:"",appointmentStartTime:"",appointmentEndTime:"",haveInstallConditions:!1,fieldJobOrderId:T.query.orderId,fieldJobType__c:0,stage__c:0,name:q.value.accountName+"的配送派工单",fileList:[],filePath:[],followerId:null,address:""});const ce=L({followerId:[{required:!0,message:"Please input username",trigger:"blur"}],fieldJobContactName:[{required:!0,message:"Please input username",trigger:"blur"}],contactTelephone:[{required:!0,message:"Please input phone",trigger:"blur"}],priority:[{required:!0,message:"Please input priority",trigger:"blur"}],appointmentStartTime:[{required:!0,message:"Please input appointment start time",trigger:"blur"}],appointmentEndTime:[{required:!0,message:"Please input appointment end time",trigger:"blur"}]}),r=L({username:"",phone:"",remark:"",installationTeam:!1,priority:"",appointmentStartTime:"",appointmentEndTime:"",fileList:[],filePath:[],fieldJobContactName:""}),pe=L({username:[{required:!0,message:"Please input username",trigger:"blur"}],phone:[{required:!0,message:"Please input phone",trigger:"blur"}],priority:[{required:!0,message:"Please input priority",trigger:"blur"}],appointmentStartTime:[{required:!0,message:"Please input appointment start time",trigger:"blur"}],appointmentEndTime:[{required:!0,message:"Please input appointment end time",trigger:"blur"}]}),f=h({}),c=L({orderNo:"",customerName:"",customerPhone:"",desc:"",fileList:[],filePath:[]}),ye=L({customerName:[{required:!0,message:"Please input customer name",trigger:"blur"}],customerPhone:[{required:!0,message:"Please input customer phone",trigger:"blur"}],desc:[{required:!0,message:"Please input problem description",trigger:"blur"}]}),R=h(!1),F=h(!1),Y=h(!1),me=h([]),ge=h([]),z=h([]),G=h(null),K=h({Content:"application/json",Authorization:"",isImage:"true",needFileId:"true","Trace-Id":""}),_e=h({files:[],name:"files"}),Te=h({files:[],name:"files"}),Q=h({files:[],name:"files"}),X=s=>{k.value=s},Z=s=>{N.value=s},Ce=()=>{R.value=!0},Ve=()=>{F.value=!0},we=()=>{k.value=2},ke=()=>{N.value=2},E=h([]),Ne=async()=>{console.log(r);let s={fieldJobContactName:f.value.accountName__C==null?"":f.value.accountName__C,contactTelephone:f.value.contactTel==null?"":f.value.contactTel,priority:r.priority,remark:r.remark,haveInstallConditions:!1,fieldJobOrderId:f.value.neoid,name:f.value.accountName__C+"的安装派工单",type:"安装派工",fieldJobType__c:1,stage__c:0,docPicture:r.filePath,appointmentStartTime:r.appointmentStartTime,appointmentEndTime:r.appointmentEndTime,followerId:r.username,address:f.value.customerAddress==null?"":f.value.customerAddress,status:0,source__c:1};ve(s).then(t=>{let n=t.data.data;z.value.push(n),n!=null?(x({message:"新增派工单成功",type:"success"}),F.value=!1,N.value=1,g.value=5,r.username="",r.phone="",r.remark="",r.priority="",r.appointmentStartTime="",r.appointmentEndTime="",r.fileList=[],r.filePath=[],r.fieldJobContactName="",r.contactTelephone=""):x({message:"新增派工单失败",type:"error"})}).catch(t=>{x({message:"请求新增派工单失败，请重试",type:"error"})})},De=s=>{U.$router.push({path:"/dispatch_details",query:{id:s.id}})},Pe=s=>{U.$router.push({path:"/historical_orders_details",query:{id:s.id,po:s.po,status_c:s.status_c}})},xe=()=>{let s=d;s.fieldJobContactName=f.value.accountName__C==null?"":f.value.accountName__C.toString(),s.contactTelephone=f.value.contactTel==null?"":f.value.contactTel.toString(),s.address=f.value.customerAddress==null?"":f.value.customerAddress,s.picture=s.filePath,s.goodsPicture=s.filePath,s.name=f.value.accountName__C+"的配送派工单",s.status=0,s.orderNo__c=f.value.po,s.source__c=1,s.fieldJobOrderId=f.value.neoid,ve(s).then(t=>{let n=t.data.data;z.value.push(n),n!=null?x({message:"新增派工单成功",type:"success"}):x({message:"新增派工单失败",type:"error"}),Object.keys(d).forEach(i=>{!i.includes("type")&&!i.includes("haveInstallConditions")&&i!=="fieldJobOrderId"&&i!=="fieldJobType__c"&&i!=="stage__c"&&i!=="name"&&(d[i]=""),i==="haveInstallConditions"&&(d[i]=!1),(i=="fileList"||i=="filePath")&&(d[i]=[])})}).catch(t=>{x({message:"请求新增派工单失败，请重试",type:"error"}),Object.keys(d).forEach(n=>{n!=="type"&&n!=="haveInstallConditions"&&n!=="fieldJobOrderId"&&n!=="fieldJobType__c"&&n!=="stage__c"&&n!=="name"&&(d[n]=""),n=="haveInstallConditions"&&(d[n]=!1),(n=="fileList"||n=="filePath")&&(d[n]=[])}),console.error("请求新增派工单失败:",t)}),R.value=!1,k.value=1},Ie=()=>{Y.value=!0},Se=()=>{console.log("problemReportingForm",c);for(let t in c)if(t!="orderNo"&&t!="fileList"&&t!="filePath"&&c[t]==""){U.$message.error("必填字段不能为空!");return}let s={orderNeoId:f.value.neoid,customerName:c.customerName,phone:c.customerPhone,problemDescription:c.desc,picture:c.filePath,caseStatus:"1",questionType:1,complaintSourceC:4,caseSource:11,clientCaseStatusC:1};pt(s).then(t=>{let n=t.data;n.code=="success"?(c.orderNo="",c.customerName="",c.customerPhone="",c.desc="",c.fileList=[],c.filePath=[],Y.value=!1,U.$message.success("提交成功!")):U.$message.error(n==null?void 0:n.message)})},Oe=()=>{fe.prompt("请填写评论内容","发起评论",{inputPattern:/\S/,inputErrorMessage:"评论内容不能为空!",confirmButtonText:"确认",cancelButtonText:"取消"}).then(({value:s})=>{ne.value.push({userName:"经销商",text:s,date:new Date().toLocaleString()})}).catch(()=>{})};lt(()=>{Le(!1,he),$e(!1);const s="100%"/"100%";if(window.addEventListener("resize",st.debounce(function(){const n=document.body.clientHeight,i=document.body.clientWidth;if(i<1680){const I=n/i;let[P,S]=[0,0];if(I<s){P=n/1080;const p=1920*P,C=i-p;S=C>0?`translate(${C/2}px, 0)`:""}else{P=(i-20)/1920;const p=1080*P,C=n-p;S=C>0?`translate(0, ${C/2}px)`:""}G.value.style.height=`calc(${document.body.clientHeight/P}px - ${40*P}px - 10px)`}else G.value.style.height=`calc(${document.body.clientHeight}px - 40px)`},0)),document.createEvent){var t=document.createEvent("HTMLEvents");t.initEvent("resize",!0,!0),window.dispatchEvent(t)}else typeof Event=="function"&&window.dispatchEvent(new Event("resize"))});const qe=s=>{if(console.log(s),s.code=="success"){let t=s.data.map(n=>n.fileId);t[0]&&d.filePath.push(t[0])}},Ee=s=>{s.response},Ue=s=>{_e.value.files=[s]},Le=(s,t)=>{rt(t).then(n=>{let i=n.data.data;i!=null?(f.value=i,c.orderNo=f.value.po,me.value.push(i),Je(!1,f.value.neoid),s&&x({message:"查询成功",type:"success"})):s&&x({message:"获取数据失败",type:"error"})})},Je=(s,t)=>{if(t==null)return;dt({fieldJobOrderId:t}).then(i=>{let I=i.data.data;I!=null?(z.value=I,s&&x({message:"查询成功",type:"success"})):s&&x({message:"获取数据失败",type:"error"})})},$e=s=>{ut({userType:1,name:"",phone:""}).then(n=>{let i=n.data.data;i!=null&&i.length>0?(E.value=i,s&&x({message:"查询成功",type:"success"})):s&&x({message:"获取数据失败",type:"error"})})},Re=s=>{if(console.log(s),s.code=="success"){let t=s.data.map(n=>n.fileId);t[0]&&r.filePath.push(t[0])}},Fe=s=>{s.response},Ye=s=>{Q.value.files=[s]},He=s=>{if(console.log(s),s.code=="success"){let t=s.data.map(n=>n.fileId);t[0]&&c.filePath.push(t[0])}},Be=s=>{s.response},Me=s=>{Q.value.files=[s]},Ae=s=>{let t=E.value.find(n=>n.id==s);t&&(r.fieldJobContactName=t.name,r.phone=t.phone)},ze=s=>{let t=E.value.find(n=>n.id==s);t&&(d.fieldJobContactName=t.name,d.contactTelephone=t.phone)},je=s=>{let t=E.value.find(n=>n.id==s);t&&(c.customerName=t.name,c.customerPhone=t.phone)},We=()=>{if(g.value>=4){U.$message.warning("配送已完成，无法点击配送");return}fe.confirm("确认到货后，再进行派单?","配送",{confirmButtonText:"是",cancelButtonText:"否",type:"warning"}).then(()=>{let s={id:q.value.taskid,status:3};ct(s).then(t=>{(t.data.code="success")&&(g.value=4)})}).catch(()=>{})},j=s=>s.getTime()<Date.now()-24*60*60*1e3;return(s,t)=>{const n=D("el-button"),i=D("el-table-column"),I=D("el-table"),P=D("el-option"),S=D("el-select"),p=D("el-form-item"),C=D("el-input"),W=D("el-date-picker"),H=D("el-form"),ee=D("el-icon"),te=D("el-upload"),ae=D("el-dialog"),Ge=D("el-checkbox");return _(),O("div",{ref_key:"mainRef",ref:G,class:"main"},[e("span",mt,[_t,e("span",ft,[e("span",vt,[e("span",{class:m(g.value==1?"num_selected":"num")},"1",2),e("span",{class:m(g.value>=1?"name_selected":"name")},"待处理",2)]),e("span",ht,[e("span",{class:m(g.value==3?"num_selected":"num")},"2",2),e("span",{class:m(g.value>=3?"name_selected":"name")},"入库",2)]),e("span",bt,[e("span",{onClick:We,class:m(g.value==4?"num_selected":"num")},"3",2),e("span",{class:m(g.value>=4?"name_selected":"name")},"配送",2)]),e("span",yt,[e("span",{class:m(g.value==5?"num_selected":"num")},"4",2),e("span",{class:m(g.value>=5?"name_selected":"name")},"安装",2)]),e("span",gt,[e("span",{class:m(g.value==6?"num_selected":"num")},"5",2),e("span",{class:m(g.value>=6?"name_selected":"name")},"完成",2)])])]),e("span",Tt,[e("span",Ct,[b("任务详情 "),g.value>=5?(_(),y(n,{key:0,type:"primary",class:"primary_blue_btn"},{default:o(()=>[b("已派工配送")]),_:1})):V("",!0),g.value==6?(_(),y(n,{key:1,type:"primary",class:"primary_green_btn"},{default:o(()=>[b("已派工安装")]),_:1})):V("",!0)]),e("span",Vt,[e("span",wt,[e("span",kt,[Nt,e("span",Dt,w(q.value.taskid),1),V("",!0)]),e("span",Pt,[xt,e("span",It,w(q.value.distributorName),1)]),e("span",St,[Ot,e("span",qt,w(q.value.followerName),1)])]),e("span",Et,[e("span",Ut,[Lt,e("span",Jt,w(f.value.accountName__C),1)]),e("span",$t,[Rt,e("span",Ft,w(q.value.createdBy),1)]),e("span",Yt,[Ht,e("span",Bt,w(q.value.createdTime),1)])]),e("span",Mt,[e("span",At,[zt,e("span",jt,w(f.value.contactTel),1)]),e("span",Wt,[Gt,e("span",Kt,w(f.value.customerAddress),1)]),Qt])])]),e("span",Xt,[Zt,e("span",ea,[e("span",ta,[e("span",{class:m(oe.value==1?"num_selected":"num")},"1",2),e("span",{class:m(oe.value>=1?"name_selected":"name")},w(f.value.status__c),3)])])]),e("span",aa,[la,e("span",sa,[l(I,{data:me.value,stripe:!1,style:{width:"100%"}},{default:o(()=>[l(i,{prop:"id",label:"操作",width:"80px"},{default:o(a=>[e("div",{style:{display:"flex","align-items":"center",color:"#165dff",cursor:"pointer"},onClick:B=>Pe(a.row)}," 查看 ",8,oa)]),_:1}),l(i,{prop:"po",label:"订单编号"}),l(i,{prop:"orderFlow",label:"订单流程"}),l(i,{prop:"estimatedDeliveryDays",label:"交期天数"}),l(i,{prop:"orderDate",label:"订货日期"}),l(i,{prop:"planedDeliveryDate",label:"计划交货日期"}),l(i,{prop:"createdTime",label:"创建时间"})]),_:1},8,["data"])])]),e("span",na,[ia,e("span",ra,[l(I,{data:ge.value,stripe:!1,style:{width:"100%"},height:"100"},{default:o(()=>[l(i,{prop:"id",label:"操作",width:"160px"},{default:o(a=>[e("div",{style:{display:"flex","align-items":"center",color:"#165dff",cursor:"pointer"},onClick:B=>console.log(a)},ca,8,da)]),_:1}),l(i,{prop:"name",label:"发货单编号"}),l(i,{prop:"status",label:"发货单状态"}),l(i,{prop:"shipVia",label:"出库方式"}),l(i,{prop:"shipCarrier",label:"供应基地"}),l(i,{prop:"createdTime",label:"创建时间"})]),_:1},8,["data"])])]),e("span",pa,[ma,e("span",_a,[l(I,{data:z.value,stripe:!1,style:{width:"100%"},"max-height":"150"},{default:o(()=>[l(i,{prop:"view",label:"操作",width:"160px"},{default:o(a=>[e("div",fa,[e("span",{onClick:B=>De(a.row)},"查看",8,va)])]),_:1}),l(i,{prop:"caseNo",label:"派工单编号"}),l(i,{prop:"stage__c",label:"状态"},{default:o(a=>[e("span",ha,w(a.row.stage__c=="0"?"待开始":a.row.stage__c=="1"?"进行中":"已完成"),1)]),_:1}),l(i,{prop:"fieldJobType__c",label:"派工种类"},{default:o(a=>{var B;return[e("div",ba,w(a.row.fieldJobType__c?(B=be.value.find(Ke=>Ke.code==a.row.fieldJobType__c))==null?void 0:B.name:"配送派工单"),1)]}),_:1}),l(i,{prop:"appointmentStartTime",label:"计划开始时间"}),l(i,{prop:"appointmentEndTime",label:"计划结束时间"}),l(i,{prop:"createdTime",label:"创建时间"})]),_:1},8,["data"])])]),e("div",ya,[e("div",{class:"left"},[ga,e("span",{class:"initiate_comments",onClick:Oe},"发起评论")]),e("div",Ta,[g.value==4?(_(),y(n,{key:0,type:"primary",onClick:Ce,class:"primary_btn"},{default:o(()=>[b("创建配送派工单")]),_:1})):V("",!0),g.value==5?(_(),y(n,{key:1,type:"primary",onClick:Ve,class:"primary_btn"},{default:o(()=>[b("创建安装派工单")]),_:1})):V("",!0),l(n,{type:"primary",onClick:Ie,class:"primary_btn"},{default:o(()=>[b("问题提报")]),_:1})])]),(_(!0),O(J,null,$(ne.value,a=>(_(),O("div",{class:"comment",key:a.date},[e("div",Ca,[Va,e("span",wa,w(a.userName),1)]),e("div",ka,w(a.text),1),e("div",Na,w(a.date),1),Da,Pa]))),128)),e("div",xa,[l(ae,{modelValue:R.value,"onUpdate:modelValue":t[12]||(t[12]=a=>R.value=a),title:"新建配送派工单",width:"80%","show-close":!1},{footer:o(()=>[e("div",Ra,[l(n,{class:"cancel_btn",onClick:t[11]||(t[11]=a=>R.value=!1)},{default:o(()=>[b("取消")]),_:1}),k.value==1?(_(),y(n,{key:0,type:"primary",class:"primary_btn",onClick:we},{default:o(()=>[b("下一步")]),_:1})):V("",!0),k.value==2?(_(),y(n,{key:1,type:"primary",class:"primary_btn",onClick:xe},{default:o(()=>[b("完成")]),_:1})):V("",!0)])]),default:o(()=>[e("div",Ia,[e("span",Sa,[e("span",{onClick:t[0]||(t[0]=a=>X(1)),class:m(k.value==1?"num_selected":"num")},"1",2),e("span",{class:m(k.value>=1?"name_selected":"name")},[b("选择配送司机 "),Oa],2)]),e("span",qa,[e("span",{onClick:t[1]||(t[1]=a=>X(2)),class:m(k.value==2?"num_selected":"num")},"2",2),e("span",{class:m(k.value>=2?"name_selected":"name")},[b("输入派工单注意事项 "),Ea],2)]),e("span",Ua,[e("span",{onClick:t[2]||(t[2]=a=>X(3)),class:m(k.value==3?"num_selected":"num")},"3",2),e("span",{class:m(k.value>=3?"name_selected":"name")},[b("完成创建 "),La],2)])]),e("div",Ja,[k.value==1?(_(),y(H,{key:0,model:v(d),rules:ce,ref_key:"deliveryOrderFormRef",ref:de,"label-width":"90px","label-position":"left"},{default:o(()=>[l(p,{label:"人员名称",prop:"followerId"},{default:o(()=>[l(S,{modelValue:v(d).followerId,"onUpdate:modelValue":t[3]||(t[3]=a=>v(d).followerId=a),onChange:ze,placeholder:"查找或输入服务人员姓名"},{default:o(()=>[(_(!0),O(J,null,$(E.value,a=>(_(),y(P,{key:a.name,label:a.name,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),$a]),_:1}),l(p,{label:"联系方式",prop:"contactTelephone"},{default:o(()=>[l(C,{modelValue:v(d).contactTelephone,"onUpdate:modelValue":t[4]||(t[4]=a=>v(d).contactTelephone=a),placeholder:"查找或输入配送司机手机号码"},null,8,["modelValue"])]),_:1}),l(p,{label:"预约开始",prop:"appointmentStartTime"},{default:o(()=>[l(W,{modelValue:v(d).appointmentStartTime,"onUpdate:modelValue":t[5]||(t[5]=a=>v(d).appointmentStartTime=a),type:"datetime",placeholder:"日期/时间","value-format":"YYYY-MM-DD HH:mm:ss","default-time":v(A),"disabled-date":j},null,8,["modelValue","default-time"])]),_:1}),l(p,{label:"预约结束",prop:"appointmentEndTime"},{default:o(()=>[l(W,{modelValue:v(d).appointmentEndTime,"onUpdate:modelValue":t[6]||(t[6]=a=>v(d).appointmentEndTime=a),type:"datetime",placeholder:"日期/时间","value-format":"YYYY-MM-DD HH:mm:ss","default-time":v(A),"disabled-date":j},null,8,["modelValue","default-time"])]),_:1})]),_:1},8,["model","rules"])):V("",!0),k.value==2?(_(),y(H,{key:1,model:v(d),rules:ce,ref_key:"deliveryOrderFormRef",ref:de,"label-width":"90px","label-position":"left"},{default:o(()=>[l(p,{label:"优先级",prop:"priority"},{default:o(()=>[l(S,{modelValue:v(d).priority,"onUpdate:modelValue":t[7]||(t[7]=a=>v(d).priority=a),placeholder:"请选择优先级"},{default:o(()=>[(_(!0),O(J,null,$(ue.value,a=>(_(),y(P,{key:a.code,label:a.name,value:a.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(p,{label:"派工类型",prop:"type"},{default:o(()=>[l(C,{disabled:"",placeholder:"配送派工",modelValue:v(d).type,"onUpdate:modelValue":t[8]||(t[8]=a=>v(d).type=a)},null,8,["modelValue"])]),_:1}),l(p,{label:"派工单备注",class:"customLayout"},{default:o(()=>[l(C,{modelValue:v(d).remark,"onUpdate:modelValue":t[9]||(t[9]=a=>v(d).remark=a),rows:5,type:"textarea",maxlength:"500",placeholder:"请填写派工单备注","show-word-limit":""},null,8,["modelValue"])]),_:1}),l(p,{label:"上传图片",class:"custom_upload"},{default:o(()=>[l(te,{"on-success":qe,"on-remove":Ee,"auto-upload":!0,data:_e.value,headers:K.value,"before-upload":Ue,"file-list":v(d).fileList,"onUpdate:fileList":t[10]||(t[10]=a=>v(d).fileList=a),class:"avatar-uploader",action:"https://sh.mengtian.com.cn:9595/md/api/common/file/upload","show-file-list":!0,"list-type":"picture-card"},{default:o(()=>[l(ee,{class:"avatar-uploader-icon"},{default:o(()=>[l(v(le))]),_:1})]),_:1},8,["data","headers","file-list"])]),_:1})]),_:1},8,["model","rules"])):V("",!0)])]),_:1},8,["modelValue"])]),e("div",Fa,[l(ae,{modelValue:F.value,"onUpdate:modelValue":t[24]||(t[24]=a=>F.value=a),title:"新建安装派工单",width:"80%","show-close":!1},{footer:o(()=>[e("div",Xa,[l(n,{class:"cancel_btn",onClick:t[23]||(t[23]=a=>F.value=!1)},{default:o(()=>[b("取消")]),_:1}),N.value==1?(_(),y(n,{key:0,type:"primary",class:"primary_btn",onClick:ke},{default:o(()=>[b("下一步")]),_:1})):V("",!0),N.value==2?(_(),y(n,{key:1,type:"primary",class:"primary_btn",onClick:Ne},{default:o(()=>[b("完成")]),_:1})):V("",!0)])]),default:o(()=>[e("div",Ya,[e("span",Ha,[e("span",{onClick:t[13]||(t[13]=a=>Z(1)),class:m(N.value==1?"num_selected":"num")},"1",2),e("span",{class:m(N.value>=1?"name_selected":"name")},[b("选择安装技工 "),Ba],2)]),e("span",Ma,[e("span",{onClick:t[14]||(t[14]=a=>Z(2)),class:m(N.value==2?"num_selected":"num")},"2",2),e("span",{class:m(N.value>=2?"name_selected":"name")},[b("输入安装派工单注意事项 "),Aa],2)]),e("span",za,[e("span",{onClick:t[15]||(t[15]=a=>Z(3)),class:m(N.value==3?"num_selected":"num")},"3",2),e("span",{class:m(N.value>=3?"name_selected":"name")},[b("完成创建 "),ja],2)])]),e("div",Wa,[N.value==1?(_(),y(H,{key:0,model:r,rules:pe,"label-width":"80px","label-position":"left"},{default:o(()=>[l(p,{label:"人员名称",prop:"username"},{default:o(()=>[l(S,{modelValue:r.username,"onUpdate:modelValue":t[16]||(t[16]=a=>r.username=a),onChange:Ae,placeholder:"查找或输入服务人员姓名"},{default:o(()=>[(_(!0),O(J,null,$(E.value,a=>(_(),y(P,{key:a.name,label:a.name,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),Ga]),_:1}),l(p,{label:"联系方式",prop:"phone"},{default:o(()=>[l(C,{placeholder:"输入联系方式",modelValue:r.phone,"onUpdate:modelValue":t[17]||(t[17]=a=>r.phone=a)},null,8,["modelValue"])]),_:1}),l(p,{label:"预约开始",prop:"appointmentStartTime"},{default:o(()=>[l(W,{modelValue:r.appointmentStartTime,"onUpdate:modelValue":t[18]||(t[18]=a=>r.appointmentStartTime=a),type:"datetime",placeholder:"日期/时间","value-format":"YYYY-MM-DD HH:mm:ss",":default-time":v(A),"disabled-date":j},null,8,["modelValue",":default-time"])]),_:1}),l(p,{label:"预约结束",prop:"appointmentEndTime"},{default:o(()=>[l(W,{modelValue:r.appointmentEndTime,"onUpdate:modelValue":t[19]||(t[19]=a=>r.appointmentEndTime=a),type:"datetime",placeholder:"日期/时间","value-format":"YYYY-MM-DD HH:mm:ss","default-time":v(A),"disabled-date":j},null,8,["modelValue","default-time"])]),_:1}),l(p,{label:"安装小组"},{default:o(()=>[e("span",Ka,[l(Ge,{modelValue:r.installationTeam,"onUpdate:modelValue":t[20]||(t[20]=a=>r.installationTeam=a)},null,8,["modelValue"])])]),_:1}),r.installationTeam?(_(),y(p,{key:0,label:"添加组员"},{default:o(()=>[Qa]),_:1})):V("",!0)]),_:1},8,["model","rules"])):V("",!0),N.value==2?(_(),y(H,{key:1,model:r,rules:pe,"label-width":"90px","label-position":"left"},{default:o(()=>[l(p,{label:"优先级",prop:"priority"},{default:o(()=>[l(S,{modelValue:r.priority,"onUpdate:modelValue":t[21]||(t[21]=a=>r.priority=a),placeholder:"请选择优先级"},{default:o(()=>[(_(!0),O(J,null,$(ue.value,a=>(_(),y(P,{key:a.code,label:a.name,value:a.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(p,{label:"派工单备注",class:"customLayout"},{default:o(()=>[l(C,{modelValue:r.remark,"onUpdate:modelValue":t[22]||(t[22]=a=>r.remark=a),rows:5,type:"textarea",maxlength:"500",placeholder:"请填写派工单备注","show-word-limit":""},null,8,["modelValue"])]),_:1}),l(p,{label:"上传图片",class:"custom_upload"},{default:o(()=>[l(te,{"on-success":Re,"on-remove":Be,"auto-upload":!0,data:Te.value,headers:K.value,"before-upload":Me,"file-list":r.fileList,"list-type":"picture-card",class:"avatar-uploader",action:"https://sh.mengtian.com.cn:9595/md/api/common/file/upload","show-file-list":!0},{default:o(()=>[l(ee,{class:"avatar-uploader-icon"},{default:o(()=>[l(v(le))]),_:1})]),_:1},8,["data","headers","file-list"])]),_:1})]),_:1},8,["model","rules"])):V("",!0)])]),_:1},8,["modelValue"])]),e("div",Za,[l(ae,{modelValue:Y.value,"onUpdate:modelValue":t[30]||(t[30]=a=>Y.value=a),title:"问题提报",width:"80%","show-close":!1},{footer:o(()=>[e("div",nl,[l(n,{class:"cancel_btn",onClick:t[29]||(t[29]=a=>Y.value=!1)},{default:o(()=>[b("取消")]),_:1}),l(n,{type:"primary",class:"primary_btn",onClick:Se},{default:o(()=>[b("提交")]),_:1})])]),default:o(()=>[e("span",el,[e("span",tl,[e("span",{class:m(re.value==1?"num_selected":"num")},"1",2),al]),e("span",ll,[e("span",{class:m(re.value==2?"num_selected":"num")},"2",2),sl])]),e("div",ol,[l(H,{model:c,rules:ye,"label-width":"90px","label-position":"left"},{default:o(()=>[l(p,{label:"订单编号",prop:"orderNo"},{default:o(()=>[l(C,{placeholder:"请选择订单编号",modelValue:c.orderNo,"onUpdate:modelValue":t[25]||(t[25]=a=>c.orderNo=a)},null,8,["modelValue"])]),_:1}),l(p,{label:"客户姓名",prop:"customerName"},{default:o(()=>[l(S,{modelValue:c.customerName,"onUpdate:modelValue":t[26]||(t[26]=a=>c.customerName=a),onChange:je,placeholder:"查找或选择服务人员姓名"},{default:o(()=>[(_(!0),O(J,null,$(E.value,a=>(_(),y(P,{key:a.name,label:a.name,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(p,{label:"客户电话",prop:"customerPhone"},{default:o(()=>[l(C,{placeholder:"请输入客户电话",modelValue:c.customerPhone,"onUpdate:modelValue":t[27]||(t[27]=a=>c.customerPhone=a)},null,8,["modelValue"])]),_:1}),l(p,{label:"问题描述",class:"customLayout",prop:"desc"},{default:o(()=>[l(C,{modelValue:c.desc,"onUpdate:modelValue":t[28]||(t[28]=a=>c.desc=a),rows:5,type:"textarea",maxlength:"500",placeholder:"请输入问题描述","show-word-limit":""},null,8,["modelValue"])]),_:1}),l(p,{label:"上传图片",class:"custom_upload"},{default:o(()=>[l(te,{"on-success":He,"on-remove":Fe,"auto-upload":!0,data:Q.value,headers:K.value,"before-upload":Ye,"file-list":c.fileList,"list-type":"picture-card",class:"avatar-uploader",action:"https://sh.mengtian.com.cn:9595/md/api/common/file/upload","show-file-list":!0},{default:o(()=>[l(ee,{class:"avatar-uploader-icon"},{default:o(()=>[l(v(le))]),_:1})]),_:1},8,["data","headers","file-list"])]),_:1})]),_:1},8,["model","rules"])])]),_:1},8,["modelValue"])])],512)}}}),ml=it(il,[["__scopeId","data-v-8fe262d2"]]);export{ml as default};
