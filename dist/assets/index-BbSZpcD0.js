import{_ as P,a as R,b as j}from"./logoXX-Cy74BE6B.js";import{_ as J}from"./plus-B8sn_dc4.js";import{C as K,D as Q}from"./common-Df-r2Ss9.js";import{d as W,g as X,r as p,o as Z,E as S,c as w,i as o,e as a,w as t,F as x,f as i,p as ee,h as le,a as v,m as I,q as z,j as V,t as A,_ as ae}from"./index-BciW1GB7.js";import"./userinfo-DMWt4scE.js";const h=N=>(ee("data-v-9b782e2d"),N=N(),le(),N),te={class:"main"},oe=h(()=>o("span",{class:"header"}," 我的人员 ",-1)),se={class:"search"},ne={class:"left"},re=h(()=>o("span",{style:{width:"336px",height:"32px"}},null,-1)),ue={class:"right"},de=h(()=>o("img",{src:R,alt:""},null,-1)),pe=h(()=>o("img",{src:j,alt:""},null,-1)),ie={class:"table_header"},me=h(()=>o("span",{class:"left"},[o("img",{src:P,alt:""}),o("span",{class:"title"})],-1)),ce={class:"right"},_e=h(()=>o("img",{src:J,alt:""},null,-1)),ve={class:"table"},ge=["onClick"],fe={class:"showDialog"},be={class:"content"},he={class:"custom-row"},ye={class:"custom-row"},Ve={class:"custom-row"},Ne={class:"custom-row"},Te={class:"dialog-footer"},we=W({__name:"index",setup(N){X();const _=p({pageIndex:1,pageSize:15,total:0}),C=p(),g=p(!1),r=p({userType:"",name:"",phone:""}),s=p({userType:"1",name:"",phone:"",status:1,storeNo:"HY0011",storeName:"梦天木门集团有限公司",distributorNo:"HY01",distributorName:"梦天集团",generalAgentNo:"GD01",generalAgentName:"梦天"}),$=p({name:[{required:!0,message:"姓名不能为空",trigger:"blur"}],phone:[{required:!0,message:"电话不能为空",trigger:"blur"},{validator:(u,e)=>/^1\d{10}$/.test(e)?Promise.resolve():Promise.reject("电话格式不正确"),trigger:"blur"}],userType:[{required:!0,message:"人员类型不能为空",trigger:"blur"}],status:[{required:!0,message:"状态不能为空",trigger:"blur"}]}),D=p([{code:1,name:"技工"},{code:2,name:"经销商用户"},{code:3,name:"配送司机"}]),F=p([{code:1,name:"在职"},{code:2,name:"离职"}]),k=p([]),f=p("add");Z(()=>{T()});const T=()=>{let u={userType:r.value.userType,name:r.value.name,phone:r.value.phone,pageNo:_.value.pageIndex,pageSize:_.value.pageSize};K(u).then(e=>{let n=e.data;n.code=="success"?(k.value=n.data,_.value={pageIndex:e.data.current==null?1:parseInt(e.data.current),pageSize:e.data.size,total:e.data.total}):(k.value=[],_.value={pageIndex:1,pageSize:15,total:0},console.log("失败"))}).catch(e=>{S({message:"请求数据失败，请重试",type:"error"}),console.error("请求数据失败:",e)})},H=()=>{r.value={userType:"",name:"",phone:""}},Y=()=>{f.value="add",g.value=!0},q=()=>{s.value={userType:1,name:"",phone:"",status:1,storeNo:"HY0011",storeName:"梦天木门集团有限公司",distributorNo:"HY01",distributorName:"梦天集团",generalAgentNo:"GD01",generalAgentName:"梦天"},C.value.clearValidate(),g.value=!1},E=()=>{C.value.validate(u=>{if(u){let e=s.value;f.value=="edit"&&delete e.createdTime,Q(e).then(n=>{var b;((b=n==null?void 0:n.data)==null?void 0:b.code)=="success"?(s.value={userType:1,name:"",phone:"",status:1,storeNo:"HY0011",storeName:"梦天木门集团有限公司",distributorNo:"HY01",distributorName:"梦天集团",generalAgentNo:"GD01",generalAgentName:"梦天"},g.value=!1,S({message:f.value=="add"?"新增成功!":"编辑成功!",type:"success"}),setTimeout(()=>{T()},500)):console.log("失败")}).catch(n=>{S({message:f.value=="add"?"新增失败!":"编辑失败!",type:"error"}),console.error("新增失败:",n)})}})},B=u=>{let e=JSON.parse(JSON.stringify(u));s.value=e,f.value="edit",g.value=!0},O=u=>{_.value.pageIndex=u,T()};return(u,e)=>{const n=i("el-option"),b=i("el-select"),d=i("el-form-item"),m=i("el-input"),U=i("el-form"),y=i("el-button"),c=i("el-table-column"),G=i("el-table"),L=i("el-pagination"),M=i("el-dialog");return v(),w(x,null,[o("div",te,[oe,o("span",se,[o("span",ne,[a(U,{model:r.value,rules:u.rule,"label-width":"80px","label-position":"left"},{default:t(()=>[a(d,{label:"人员类型"},{default:t(()=>[a(b,{modelValue:r.value.userType,"onUpdate:modelValue":e[0]||(e[0]=l=>r.value.userType=l),placeholder:"请选择人员类型",clearable:""},{default:t(()=>[(v(!0),w(x,null,I(D.value,l=>(v(),z(n,{key:l.code,label:l.name,value:l.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(d,{label:"人员姓名"},{default:t(()=>[a(m,{placeholder:"输入人员姓名",modelValue:r.value.name,"onUpdate:modelValue":e[1]||(e[1]=l=>r.value.name=l)},null,8,["modelValue"])]),_:1}),a(d,{label:"人员电话"},{default:t(()=>[a(m,{placeholder:"输入人员电话",modelValue:r.value.phone,"onUpdate:modelValue":e[2]||(e[2]=l=>r.value.phone=l)},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"]),a(U,{model:r.value,rules:u.rule,"label-width":"80px","label-position":"left"},{default:t(()=>[re]),_:1},8,["model","rules"])]),o("span",ue,[a(y,{onClick:e[3]||(e[3]=l=>T()),type:"primary",class:"search_btn"},{icon:t(()=>[de]),default:t(()=>[V("查询")]),_:1}),a(y,{type:"primary",onClick:e[4]||(e[4]=l=>H()),class:"reset_btn"},{icon:t(()=>[pe]),default:t(()=>[V("重置")]),_:1})])]),o("span",ie,[me,o("span",ce,[a(y,{onClick:e[5]||(e[5]=l=>Y()),type:"primary",class:"search_btn"},{icon:t(()=>[_e]),default:t(()=>[V("新建")]),_:1})])]),o("span",ve,[a(G,{class:"table_content",data:k.value,stripe:!1,style:{width:"100%"}},{default:t(()=>[a(c,{prop:"id",label:"人员编号"}),a(c,{prop:"name",label:"姓名"}),a(c,{prop:"phone",label:"电话"}),a(c,{prop:"userType",label:"人员类型"},{default:t(l=>[o("div",null,A(l.row.userType==1?"技工":l.row.userType==2?"经销商":"配送司机"),1)]),_:1}),a(c,{prop:"status",label:"人员状态"},{default:t(l=>[o("div",null,A(l.row.status==1?"在职":"离职"),1)]),_:1}),a(c,{prop:"distributorName",label:"经销商名称"}),a(c,{prop:"createdTime",label:"创建时间"}),a(c,{prop:"userType",label:"操作",width:"80px"},{default:t(l=>[o("div",{style:{display:"flex","align-items":"center",color:"#165dff",cursor:"pointer"},onClick:xe=>B(l.row)}," 编辑 ",8,ge)]),_:1})]),_:1},8,["data"]),a(L,{"pager-count-format":u.pagerCountFormat,onCurrentChange:O,class:"table_pagination","page-size":_.value.pageSize,layout:"total, prev, pager, next",total:_.value.total},null,8,["pager-count-format","page-size","total"])])]),o("div",fe,[a(M,{modelValue:g.value,"onUpdate:modelValue":e[16]||(e[16]=l=>g.value=l),title:f.value=="add"?"新增人员":"编辑人员",width:"60%","show-close":!1},{footer:t(()=>[o("div",Te,[a(y,{class:"cancel_btn",onClick:e[14]||(e[14]=l=>q())},{default:t(()=>[V("取消")]),_:1}),a(y,{onClick:e[15]||(e[15]=l=>E()),type:"primary",class:"primary_btn"},{default:t(()=>[V("确认")]),_:1})])]),default:t(()=>[o("div",be,[a(U,{model:s.value,rules:$.value,ref_key:"formRef",ref:C,"label-width":"90px","label-position":"right"},{default:t(()=>[o("div",he,[a(d,{label:"姓名",prop:"name"},{default:t(()=>[a(m,{placeholder:"请输入姓名",modelValue:s.value.name,"onUpdate:modelValue":e[6]||(e[6]=l=>s.value.name=l)},null,8,["modelValue"])]),_:1}),a(d,{label:"电话",prop:"phone"},{default:t(()=>[a(m,{placeholder:"请输入电话",modelValue:s.value.phone,"onUpdate:modelValue":e[7]||(e[7]=l=>s.value.phone=l)},null,8,["modelValue"])]),_:1})]),o("div",ye,[a(d,{label:"人员类型",prop:"userType"},{default:t(()=>[a(b,{modelValue:s.value.userType,"onUpdate:modelValue":e[8]||(e[8]=l=>s.value.userType=l),placeholder:"请选择人员类型"},{default:t(()=>[(v(!0),w(x,null,I(D.value,l=>(v(),z(n,{key:l.code,label:l.name,value:l.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(d,{label:"人员状态",prop:"status"},{default:t(()=>[a(b,{modelValue:s.value.status,"onUpdate:modelValue":e[9]||(e[9]=l=>s.value.status=l),placeholder:"请选择人员状态"},{default:t(()=>[(v(!0),w(x,null,I(F.value,l=>(v(),z(n,{key:l.code,label:l.name,value:l.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),o("div",Ve,[a(d,{label:"门店编码"},{default:t(()=>[a(m,{placeholder:"请输入门店编码",modelValue:s.value.storeNo,"onUpdate:modelValue":e[10]||(e[10]=l=>s.value.storeNo=l)},null,8,["modelValue"])]),_:1}),a(d,{label:"门店名称"},{default:t(()=>[a(m,{placeholder:"请输入门店名称",modelValue:s.value.storeName,"onUpdate:modelValue":e[11]||(e[11]=l=>s.value.storeName=l)},null,8,["modelValue"])]),_:1})]),o("div",Ne,[a(d,{label:"经销商编码"},{default:t(()=>[a(m,{placeholder:"请输入经销商编码",modelValue:s.value.distributorNo,"onUpdate:modelValue":e[12]||(e[12]=l=>s.value.distributorNo=l)},null,8,["modelValue"])]),_:1}),a(d,{label:"经销商名称"},{default:t(()=>[a(m,{placeholder:"请输入经销商名称",modelValue:s.value.distributorName,"onUpdate:modelValue":e[13]||(e[13]=l=>s.value.distributorName=l)},null,8,["modelValue"])]),_:1})])]),_:1},8,["model","rules"])])]),_:1},8,["modelValue","title"])])],64)}}}),ze=ae(we,[["__scopeId","data-v-9b782e2d"]]);export{ze as default};
