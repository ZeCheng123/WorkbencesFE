import{_ as F,a as q,b as L}from"./logoXX-Cy74BE6B.js";import{_ as O}from"./download-Dan4AgsM.js";import{d as j}from"./common-DoACQn11.js";import{d as P,g as A,r as m,b as G,o as H,E as k,c as x,i as o,e as a,w as l,f as i,p as K,h as Q,a as h,F as C,m as W,q as I,j as N,t as z,_ as R}from"./index-k7gRZT9c.js";import"./userinfo-CU9lpgZY.js";const u=f=>(K("data-v-b9243cf6"),f=f(),Q(),f),X={class:"main"},Z=u(()=>o("span",{class:"header"}," 派工单 ",-1)),ee={class:"search"},te={class:"left"},ae=u(()=>o("span",{style:{width:"336px",height:"32px"}},null,-1)),le={class:"right"},oe=u(()=>o("img",{src:q,alt:""},null,-1)),ne=u(()=>o("img",{src:L,alt:""},null,-1)),se={class:"table_header"},ie=u(()=>o("span",{class:"left"},[o("img",{src:F,alt:""}),o("span",{class:"title"})],-1)),re={class:"right"},ce=u(()=>o("img",{src:O,alt:""},null,-1)),de={class:"table"},pe={style:{display:"flex","align-items":"center"}},_e={style:{display:"flex","align-items":"center"}},ue=["onClick"],me=P({__name:"index",setup(f){const{proxy:M}=A(),p=m({pageIndex:1,pageSize:15,total:0}),e=G({dispatchWorkerNo:"",technicianName:"",technicianType:"",filterMethod:"",createDate:[],dispatchWorkerStatus:""});m([{value:"all",label:"全部"}]);const V=m([{code:"",name:"全部"},{code:"0",name:"配送派工单"},{code:"1",name:"安装派工单"},{code:"2",name:"维修派工单"}]),S=m([{code:"",name:"全部"},{code:"0",name:"待开始"},{code:"1",name:"进行中"},{code:"2",name:"已完成"}]),b=m([]),B=r=>{M.$router.push({path:"/dispatch_details",query:{id:r.id}})};H(()=>{g(!1)});const g=r=>{let n={fieldJobType__c:e.technicianType==null?"":e.technicianType,appointmentEndTime:"",from:e.createDate==null||e.createDate[0]==null?"":e.createDate[0]+" 00:00:00",to:e.createDate==null||e.createDate[1]==null?"":e.createDate[1]+" 23:59:59",status:e.dispatchWorkerStatus==null?"":e.dispatchWorkerStatus,caseNo:e.dispatchWorkerNo==null?"":e.dispatchWorkerNo,artisanName:e.technicianName==null?"":e.technicianName,pageSize:p.value.pageSize,pageNo:p.value.pageIndex};j(n).then(s=>{let c=s.data.data;c.length>0?(b.value=c,r&&k({message:"查询成功",type:"success"})):(b.value=[],k({message:"暂无对应数据",type:"error"})),p.value={pageIndex:s.data.current==null?1:parseInt(s.data.current),pageSize:s.data.size,total:s.data.total}}).catch(s=>{k({message:"请求数据失败，请重试",type:"error"}),console.error("请求数据失败:",s)})},E=r=>{p.value.pageIndex=r,g(!1)},J=()=>{e.dispatchWorkerNo="",e.technicianName="",e.technicianType="",e.filterMethod="",e.createDate=[],e.dispatchWorkerStatus="",g(!1)};return(r,n)=>{const s=i("el-input"),c=i("el-form-item"),T=i("el-option"),w=i("el-select"),D=i("el-form"),U=i("el-date-picker"),v=i("el-button"),d=i("el-table-column"),Y=i("el-table"),$=i("el-pagination");return h(),x("div",X,[Z,o("span",ee,[o("span",te,[a(D,{model:e,rules:r.rule,"label-width":"80px","label-position":"left"},{default:l(()=>[a(c,{label:"派工编号"},{default:l(()=>[a(s,{placeholder:"请输入派工编号",modelValue:e.dispatchWorkerNo,"onUpdate:modelValue":n[0]||(n[0]=t=>e.dispatchWorkerNo=t)},null,8,["modelValue"])]),_:1}),a(c,{label:"技工姓名"},{default:l(()=>[a(s,{placeholder:"输入技工姓名",modelValue:e.technicianName,"onUpdate:modelValue":n[1]||(n[1]=t=>e.technicianName=t)},null,8,["modelValue"])]),_:1}),a(c,{label:"技工种类"},{default:l(()=>[a(w,{modelValue:e.technicianType,"onUpdate:modelValue":n[2]||(n[2]=t=>e.technicianType=t),placeholder:"请选择派工种类"},{default:l(()=>[(h(!0),x(C,null,W(V.value,t=>(h(),I(T,{key:t.code,label:t.name,value:t.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"]),a(D,{model:e,rules:r.rule,"label-width":"80px","label-position":"left"},{default:l(()=>[a(c,{label:"创建时间"},{default:l(()=>[a(U,{modelValue:e.createDate,"onUpdate:modelValue":n[3]||(n[3]=t=>e.createDate=t),type:"daterange","range-separator":"~","start-placeholder":"开始时间","end-placeholder":"结束时间","value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1}),a(c,{label:"派工状态"},{default:l(()=>[a(w,{modelValue:e.dispatchWorkerStatus,"onUpdate:modelValue":n[4]||(n[4]=t=>e.dispatchWorkerStatus=t),placeholder:"请选择派工状态"},{default:l(()=>[(h(!0),x(C,null,W(S.value,t=>(h(),I(T,{key:t.code,label:t.name,value:t.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),ae]),_:1},8,["model","rules"])]),o("span",le,[a(v,{onClick:n[5]||(n[5]=t=>g(!0)),type:"primary",class:"search_btn"},{icon:l(()=>[oe]),default:l(()=>[N("查询")]),_:1}),a(v,{onClick:n[6]||(n[6]=t=>J()),type:"primary",class:"reset_btn"},{icon:l(()=>[ne]),default:l(()=>[N("重置")]),_:1})])]),o("span",se,[ie,o("span",re,[a(v,{type:"primary",class:"reset_btn"},{icon:l(()=>[ce]),default:l(()=>[N("下载")]),_:1})])]),o("span",de,[a(Y,{class:"table_content",data:b.value,stripe:!1,style:{width:"100%"}},{default:l(()=>[a(d,{prop:"caseNo",label:"派工编号"}),a(d,{prop:"appointmentStartTime",label:"计划开始时间"}),a(d,{prop:"appointmentEndTime",label:"计划结束时间"}),a(d,{prop:"follower__c",label:"技工名称"}),a(d,{prop:"fieldJobType__c",label:"派工种类"},{default:l(t=>{var _;return[o("div",pe,z(t.row.fieldJobType__c?(_=V.value.find(y=>y.code==t.row.fieldJobType__c))==null?void 0:_.name:"配送派工单"),1)]}),_:1}),a(d,{prop:"createdTime",label:"创建时间"}),a(d,{prop:"stage__c",label:"派工状态"},{default:l(t=>{var _;return[o("div",_e,z(t.row.stage__c?(_=S.value.find(y=>y.code==t.row.stage__c))==null?void 0:_.name:"待开始"),1)]}),_:1}),a(d,{prop:"text8",label:"操作",width:"80px"},{default:l(t=>[o("div",{style:{display:"flex","align-items":"center",color:"#165dff",cursor:"pointer"},onClick:_=>B(t.row)}," 查看 ",8,ue)]),_:1})]),_:1},8,["data"]),a($,{class:"table_pagination","page-size":p.value.pageSize,"pager-count":15,layout:"total, prev, pager, next",total:p.value.total,onCurrentChange:E},null,8,["page-size","total"])])])}}}),ye=R(me,[["__scopeId","data-v-b9243cf6"]]);export{ye as default};
