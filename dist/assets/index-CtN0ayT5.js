import{_ as je,a as ze,b as Ge}from"./tips-DfmWQaVF.js";import{_ as ae}from"./add-CRTT_dyr.js";import{d as Ke,g as Qe,r as v,C as We,a as q,k as Xe,D as Ze,E as I,G as ea,H as aa,c as P,b as e,x as p,i as h,q as y,w as o,v as C,t as T,e as l,F as U,B as E,I as ta,f as N,p as la,h as sa,o as m,y as f,z as ee,J as _e,K as oa,_ as na}from"./index-CXdlkYQW.js";const u=M=>(la("data-v-2840c40c"),M=M(),sa(),M),ra={class:"main"},ia={class:"header"},da=u(()=>e("span",{class:"title"},"任务状态",-1)),ua={class:"step"},ca={class:"item"},pa={class:"item"},ma={class:"item"},_a={class:"item"},fa={class:"item"},va={class:"task_info"},ha={class:"title"},ba={class:"main_field"},ya={class:"row_field"},ga={class:"field"},Va=u(()=>e("span",{class:"label"},"任务编号：",-1)),Ca={class:"value"},Ta={class:"field"},ka=u(()=>e("span",{class:"label"},"经销商：",-1)),wa={class:"value"},Na={class:"field"},Ia=u(()=>e("span",{class:"label"},"经销商负责人：",-1)),Da={class:"value"},Pa={class:"row_field"},Sa={class:"field"},xa=u(()=>e("span",{class:"label"},"客户名称：",-1)),Oa={class:"value"},qa={class:"field"},Ua=u(()=>e("span",{class:"label"},"当前负责人：",-1)),Ea={class:"value"},Ja={class:"field"},La=u(()=>e("span",{class:"label"},"创建时间：",-1)),Ra={class:"value"},$a={class:"row_field"},Fa={class:"field"},Ya=u(()=>e("span",{class:"label"},"客户电话：",-1)),Ba={class:"value"},Ha={class:"field"},Ma=u(()=>e("span",{class:"label"},"客户地址：",-1)),Aa={class:"value"},ja=u(()=>e("span",{class:"field"},[e("span",{class:"label"}),e("span",{class:"value"})],-1)),za={class:"order_status"},Ga=u(()=>e("span",{class:"title"},"订单状态",-1)),Ka={class:"step"},Qa={class:"item"},Wa={class:"related_item_order"},Xa=u(()=>e("span",{class:"table_title"},"相关项>订单",-1)),Za={class:"table_content"},et=["onClick"],at={class:"related_item_invoice"},tt=u(()=>e("span",{class:"table_title"},"相关项>发货单",-1)),lt={class:"table_content"},st=["onClick"],ot=u(()=>e("span",null,"查看",-1)),nt=[ot],rt={class:"related_item_invoice"},it=u(()=>e("span",{class:"table_title"},"相关项>派工单",-1)),dt={class:"table_content"},ut={style:{display:"flex","align-items":"center",color:"#165dff",cursor:"pointer"}},ct=["onClick"],pt={style:{color:"blue"}},mt={style:{display:"flex","align-items":"center"}},_t={class:"action_list"},ft=u(()=>e("img",{src:je,alt:""},null,-1)),vt={class:"right"},ht={class:"userinfo"},bt=u(()=>e("img",{src:ze,alt:""},null,-1)),yt={class:"username"},gt={class:"content"},Vt={class:"date"},Ct=u(()=>e("span",{class:"reply"},"回复",-1)),Tt=u(()=>e("img",{class:"tips",src:Ge,alt:""},null,-1)),kt={class:"deliveryOrderDialog"},wt={class:"step"},Nt={class:"item"},It=u(()=>e("span",{class:"remark"},"选择配送货品的司机",-1)),Dt={class:"item"},Pt=u(()=>e("span",{class:"remark"},"如有,请填写关键备注",-1)),St={class:"item"},xt=u(()=>e("span",{class:"remark"},"等待司机配送",-1)),Ot={class:"content"},qt=u(()=>e("span",{class:"custom_item"},[e("img",{src:ae,alt:""})],-1)),Ut={class:"dialog-footer"},Et={class:"installationOrderDialog"},Jt={class:"step"},Lt={class:"item"},Rt=u(()=>e("span",{class:"remark"},"选择负责安装的技工",-1)),$t={class:"item"},Ft=u(()=>e("span",{class:"remark"},"如有,请填写关键备注",-1)),Yt={class:"item"},Bt=u(()=>e("span",{class:"remark"},"等待现场服务",-1)),Ht={class:"content"},Mt=u(()=>e("span",{class:"custom_item1"},[e("img",{src:ae,alt:""})],-1)),At={style:{width:"300px"}},jt=u(()=>e("span",{class:"custom_item"},[e("img",{src:ae,alt:""})],-1)),zt={class:"dialog-footer"},Gt={class:"problemReportingDialog"},Kt={class:"step"},Qt={class:"item"},Wt=u(()=>e("span",{class:"name"},[h("完善提报信息 "),e("span",{class:"remark"},"完善问题提报的信息")],-1)),Xt={class:"item"},Zt=u(()=>e("span",{class:"name"},[h("完成创建 "),e("span",{class:"remark"},"等待售服部处理")],-1)),el={class:"content"},al={class:"dialog-footer"},tl=Ke({__name:"index",setup(M){const{proxy:J}=Qe(),te=v(4),le=v([]),g=We();g.query.id,g.query.serviceCaseId;const se=g.query.orderId,oe=g.query.status!=null?parseInt(g.query.status.toString(),0)+1:1;g.query.taskType;const x=v({taskid:g.query.id,serviceCaseNeoId:g.query.serviceCaseId,orderId:g.query.orderId,taskStatus:oe,accountName:g.query.accountName,distributorName:g.query.distributorName,followerName:g.query.followerName,createdTime:g.query.createdTime,createdBy:g.query.createdBy}),fe=v([{code:"0",name:"配送派工单"},{code:"1",name:"安装派工单"},{code:"2",name:"维修派工单"}]),V=v(oe),k=v(1),w=v(1),ne=v(1),re=v(),ie=v([{code:"1",name:"最高级"},{code:"2",name:"高"},{code:"3",name:"中"},{code:"4",name:"低"}]);let d=q({fieldJobContactName:"",contactTelephone:"",priority:"",type:"配送派工",remark:"",appointmentStartTime:"",appointmentEndTime:"",haveInstallConditions:!1,fieldJobOrderId:g.query.orderId,fieldJobType__c:0,stage__c:0,name:x.value.accountName+"的配送派工单",fileList:[],filePath:[],followerId:null,address:""});const de=q({followerId:[{required:!0,message:"Please input username",trigger:"blur"}],fieldJobContactName:[{required:!0,message:"Please input username",trigger:"blur"}],contactTelephone:[{required:!0,message:"Please input phone",trigger:"blur"}],priority:[{required:!0,message:"Please input priority",trigger:"blur"}],appointmentStartTime:[{required:!0,message:"Please input appointment start time",trigger:"blur"}],appointmentEndTime:[{required:!0,message:"Please input appointment end time",trigger:"blur"}]}),i=q({username:"",phone:"",remark:"",installationTeam:!1,priority:"",appointmentStartTime:"",appointmentEndTime:"",fileList:[],filePath:[],fieldJobContactName:""}),ue=q({username:[{required:!0,message:"Please input username",trigger:"blur"}],phone:[{required:!0,message:"Please input phone",trigger:"blur"}],priority:[{required:!0,message:"Please input priority",trigger:"blur"}],appointmentStartTime:[{required:!0,message:"Please input appointment start time",trigger:"blur"}],appointmentEndTime:[{required:!0,message:"Please input appointment end time",trigger:"blur"}]}),b=v({}),c=q({orderNo:"",customerName:"",customerPhone:"",desc:"",fileList:[],filePath:[]}),ve=q({customerName:[{required:!0,message:"Please input customer name",trigger:"blur"}],customerPhone:[{required:!0,message:"Please input customer phone",trigger:"blur"}],desc:[{required:!0,message:"Please input problem description",trigger:"blur"}]}),L=v(!1),R=v(!1),$=v(!1),ce=v([]),he=v([]),A=v([]),z=v({Content:"application/json",Authorization:"",isImage:"true",needFileId:"true","Trace-Id":""}),pe=v({files:[],name:"files"}),be=v({files:[],name:"files"}),G=v({files:[],name:"files"}),K=s=>{k.value=s},Q=s=>{w.value=s},ye=()=>{L.value=!0},ge=()=>{R.value=!0},Ve=()=>{k.value=2},Ce=()=>{w.value=2},S=v([]),Te=async()=>{console.log(i);let s={fieldJobContactName:b.value.accountName__C==null?"":b.value.accountName__C,contactTelephone:b.value.contactTel==null?"":b.value.contactTel,priority:i.priority,remark:i.remark,haveInstallConditions:!1,fieldJobOrderId:g.query.orderId,name:b.value.accountName__C+"的安装派工单",type:"安装派工",fieldJobType__c:1,stage__c:0,docPicture:i.filePath,appointmentStartTime:i.appointmentStartTime,appointmentEndTime:i.appointmentEndTime,followerId:i.username,address:b.value.customerAddress==null?"":b.value.customerAddress,status:0};_e(s).then(a=>{let n=a.data.data;A.value.push(n),n!=null?(I({message:"新增派工单成功",type:"success"}),R.value=!1,w.value=1,V.value=5,i.username="",i.phone="",i.remark="",i.priority="",i.appointmentStartTime="",i.appointmentEndTime="",i.fileList=[],i.filePath=[],i.fieldJobContactName="",i.contactTelephone=""):I({message:"新增派工单失败",type:"error"})}).catch(a=>{I({message:"请求新增派工单失败，请重试",type:"error"})})},ke=s=>{J.$router.push({path:"/dispatch_details",query:{id:s.id}})},we=s=>{J.$router.push({path:"/historical_orders_details",query:{id:s.id,po:s.po,status_c:s.status_c}})},Ne=()=>{let s=d;s.fieldJobContactName=b.value.accountName__C==null?"":b.value.accountName__C.toString(),s.contactTelephone=b.value.contactTel==null?"":b.value.contactTel.toString(),s.address=b.value.customerAddress==null?"":b.value.customerAddress,s.picture=s.filePath,s.goodsPicture=s.filePath,s.name=b.value.accountName__C+"的配送派工单",s.status=0,s.orderNo__c=b.value.po,_e(s).then(a=>{let n=a.data.data;A.value.push(n),n!=null?I({message:"新增派工单成功",type:"success"}):I({message:"新增派工单失败",type:"error"}),Object.keys(d).forEach(r=>{!r.includes("type")&&!r.includes("haveInstallConditions")&&r!=="fieldJobOrderId"&&r!=="fieldJobType__c"&&r!=="stage__c"&&r!=="name"&&(d[r]=""),r==="haveInstallConditions"&&(d[r]=!1),(r=="fileList"||r=="filePath")&&(d[r]=[])})}).catch(a=>{I({message:"请求新增派工单失败，请重试",type:"error"}),Object.keys(d).forEach(n=>{n!=="type"&&n!=="haveInstallConditions"&&n!=="fieldJobOrderId"&&n!=="fieldJobType__c"&&n!=="stage__c"&&n!=="name"&&(d[n]=""),n=="haveInstallConditions"&&(d[n]=!1),(n=="fileList"||n=="filePath")&&(d[n]=[])}),console.error("请求新增派工单失败:",a)}),L.value=!1,k.value=1},Ie=()=>{$.value=!0},De=()=>{console.log("problemReportingForm",c);for(let a in c)if(a!="orderNo"&&a!="fileList"&&a!="filePath"&&c[a]==""){J.$message.error("必填字段不能为空!");return}let s={caseNo:c.orderNo,name:c.customerName,phone:c.customerPhone,problemDescription:c.desc,picture:c.filePath,caseStatus:"1",questionType:1};oa(s).then(a=>{let n=a.data;n.code=="success"?(c.orderNo="",c.customerName="",c.customerPhone="",c.desc="",c.fileList=[],c.filePath=[],$.value=!1,J.$message.success("提交成功!")):J.$message.error(n==null?void 0:n.message)})},Pe=()=>{ta.prompt("请填写评论内容","发起评论",{inputPattern:/\S/,inputErrorMessage:"评论内容不能为空!",confirmButtonText:"确认",cancelButtonText:"取消"}).then(({value:s})=>{le.value.push({userName:"经销商",text:s,date:new Date().toLocaleString()})}).catch(()=>{})};Xe(()=>{qe(!1,se),Ee(!1),Ue(!1,se)});const Se=s=>{if(console.log(s),s.code=="success"){let a=s.data.map(n=>n.fileId);a[0]&&d.filePath.push(a[0])}},xe=s=>{s.response},Oe=s=>{pe.value.files=[s]},qe=(s,a)=>{Ze(a).then(n=>{let r=n.data.data;r!=null?(b.value=r,c.orderNo=b.value.po,ce.value.push(r),s&&I({message:"查询成功",type:"success"})):s&&I({message:"获取数据失败",type:"error"})})},Ue=(s,a)=>{if(a==null)return;ea({fieldJobOrderId:a}).then(r=>{let O=r.data.data;O!=null?(A.value=O,s&&I({message:"查询成功",type:"success"})):s&&I({message:"获取数据失败",type:"error"})})},Ee=s=>{aa({userType:1,name:"",phone:""}).then(n=>{let r=n.data.data;r!=null&&r.length>0?(S.value=r,s&&I({message:"查询成功",type:"success"})):s&&I({message:"获取数据失败",type:"error"})})},Je=s=>{if(console.log(s),s.code=="success"){let a=s.data.map(n=>n.fileId);a[0]&&i.filePath.push(a[0])}},Le=s=>{s.response},Re=s=>{G.value.files=[s]},$e=s=>{if(console.log(s),s.code=="success"){let a=s.data.map(n=>n.fileId);a[0]&&c.filePath.push(a[0])}},Fe=s=>{s.response},Ye=s=>{G.value.files=[s]},Be=s=>{let a=S.value.find(n=>n.id==s);a&&(i.fieldJobContactName=a.name,i.phone=a.phone)},He=s=>{let a=S.value.find(n=>n.id==s);a&&(d.fieldJobContactName=a.name,d.contactTelephone=a.phone)},Me=s=>{let a=S.value.find(n=>n.id==s);a&&(c.customerName=a.name,c.customerPhone=a.phone)};return(s,a)=>{const n=N("el-button"),r=N("el-table-column"),O=N("el-table"),F=N("el-option"),Y=N("el-select"),_=N("el-form-item"),D=N("el-input"),j=N("el-date-picker"),me=N("el-checkbox"),B=N("el-form"),W=N("el-icon"),X=N("el-upload"),Z=N("el-dialog");return m(),P("div",ra,[e("span",ia,[da,e("span",ua,[e("span",ca,[e("span",{class:p(V.value==1?"num_selected":"num")},"1",2),e("span",{class:p(V.value>=1?"name_selected":"name")},"待处理",2)]),e("span",pa,[e("span",{class:p(V.value==3?"num_selected":"num")},"2",2),e("span",{class:p(V.value>=3?"name_selected":"name")},"入库",2)]),e("span",ma,[e("span",{onClick:a[0]||(a[0]=t=>V.value=4),class:p(V.value==4?"num_selected":"num")},"3",2),e("span",{class:p(V.value>=4?"name_selected":"name")},"配送",2)]),e("span",_a,[e("span",{class:p(V.value==5?"num_selected":"num")},"4",2),e("span",{class:p(V.value>=5?"name_selected":"name")},"安装",2)]),e("span",fa,[e("span",{class:p(V.value==6?"num_selected":"num")},"5",2),e("span",{class:p(V.value>=6?"name_selected":"name")},"完成",2)])])]),e("span",va,[e("span",ha,[h("任务详情 "),V.value>=5?(m(),y(n,{key:0,type:"primary",class:"primary_blue_btn"},{default:o(()=>[h("已派工配送")]),_:1})):C("",!0),V.value==6?(m(),y(n,{key:1,type:"primary",class:"primary_green_btn"},{default:o(()=>[h("已派工安装")]),_:1})):C("",!0)]),e("span",ba,[e("span",ya,[e("span",ga,[Va,e("span",Ca,T(x.value.taskid),1),C("",!0)]),e("span",Ta,[ka,e("span",wa,T(x.value.distributorName),1)]),e("span",Na,[Ia,e("span",Da,T(x.value.followerName),1)])]),e("span",Pa,[e("span",Sa,[xa,e("span",Oa,T(b.value.accountName__C),1)]),e("span",qa,[Ua,e("span",Ea,T(x.value.createdBy),1)]),e("span",Ja,[La,e("span",Ra,T(x.value.createdTime),1)])]),e("span",$a,[e("span",Fa,[Ya,e("span",Ba,T(b.value.contactTel),1)]),e("span",Ha,[Ma,e("span",Aa,T(b.value.customerAddress),1)]),ja])])]),e("span",za,[Ga,e("span",Ka,[e("span",Qa,[e("span",{class:p(te.value==1?"num_selected":"num")},"1",2),e("span",{class:p(te.value>=1?"name_selected":"name")},T(b.value.status__c),3)])])]),e("span",Wa,[Xa,e("span",Za,[l(O,{data:ce.value,stripe:!1,style:{width:"100%"}},{default:o(()=>[l(r,{prop:"id",label:"操作",width:"80px"},{default:o(t=>[e("div",{style:{display:"flex","align-items":"center",color:"#165dff",cursor:"pointer"},onClick:H=>we(t.row)}," 查看 ",8,et)]),_:1}),l(r,{prop:"po",label:"订单编号"}),l(r,{prop:"orderFlow",label:"订单流程"}),l(r,{prop:"estimatedDeliveryDays",label:"交期天数"}),l(r,{prop:"orderDate",label:"订货日期"}),l(r,{prop:"planedDeliveryDate",label:"计划交货日期"}),l(r,{prop:"createdTime",label:"创建时间"})]),_:1},8,["data"])])]),e("span",at,[tt,e("span",lt,[l(O,{data:he.value,stripe:!1,style:{width:"100%"},height:"100"},{default:o(()=>[l(r,{prop:"id",label:"操作",width:"160px"},{default:o(t=>[e("div",{style:{display:"flex","align-items":"center",color:"#165dff",cursor:"pointer"},onClick:H=>console.log(t)},nt,8,st)]),_:1}),l(r,{prop:"name",label:"发货单编号"}),l(r,{prop:"status",label:"发货单状态"}),l(r,{prop:"shipVia",label:"出库方式"}),l(r,{prop:"shipCarrier",label:"供应基地"}),l(r,{prop:"createdTime",label:"创建时间"})]),_:1},8,["data"])])]),e("span",rt,[it,e("span",dt,[l(O,{data:A.value,stripe:!1,style:{width:"100%"}},{default:o(()=>[l(r,{prop:"view",label:"操作",width:"160px"},{default:o(t=>[e("div",ut,[e("span",{onClick:H=>ke(t.row)},"查看",8,ct)])]),_:1}),l(r,{prop:"caseNo",label:"派工单编号"}),l(r,{prop:"stage__c",label:"状态"},{default:o(t=>[e("span",pt,T(t.row.stage__c=="0"?"待开始":t.row.stage__c=="1"?"进行中":"已完成"),1)]),_:1}),l(r,{prop:"fieldJobType__c",label:"派工种类"},{default:o(t=>{var H;return[e("div",mt,T(t.row.fieldJobType__c?(H=fe.value.find(Ae=>Ae.code==t.row.fieldJobType__c))==null?void 0:H.name:"配送派工单"),1)]}),_:1}),l(r,{prop:"appointmentStartTime",label:"计划开始时间"}),l(r,{prop:"appointmentEndTime",label:"计划结束时间"}),l(r,{prop:"createdTime",label:"创建时间"})]),_:1},8,["data"])])]),e("div",_t,[e("div",{class:"left"},[ft,e("span",{class:"initiate_comments",onClick:Pe},"发起评论")]),e("div",vt,[V.value==4?(m(),y(n,{key:0,type:"primary",onClick:ye,class:"primary_btn"},{default:o(()=>[h("创建配送派工单")]),_:1})):C("",!0),V.value==5?(m(),y(n,{key:1,type:"primary",onClick:ge,class:"primary_btn"},{default:o(()=>[h("创建安装派工单")]),_:1})):C("",!0),l(n,{type:"primary",onClick:Ie,class:"primary_btn"},{default:o(()=>[h("问题提报")]),_:1})])]),(m(!0),P(U,null,E(le.value,t=>(m(),P("div",{class:"comment",key:t.date},[e("div",ht,[bt,e("span",yt,T(t.userName),1)]),e("div",gt,T(t.text),1),e("div",Vt,T(t.date),1),Ct,Tt]))),128)),e("div",kt,[l(Z,{modelValue:L.value,"onUpdate:modelValue":a[14]||(a[14]=t=>L.value=t),title:"新建配送派工单",width:"80%","show-close":!1},{footer:o(()=>[e("div",Ut,[l(n,{class:"cancel_btn",onClick:a[13]||(a[13]=t=>L.value=!1)},{default:o(()=>[h("取消")]),_:1}),k.value==1?(m(),y(n,{key:0,type:"primary",class:"primary_btn",onClick:Ve},{default:o(()=>[h("下一步")]),_:1})):C("",!0),k.value==2?(m(),y(n,{key:1,type:"primary",class:"primary_btn",onClick:Ne},{default:o(()=>[h("完成")]),_:1})):C("",!0)])]),default:o(()=>[e("div",wt,[e("span",Nt,[e("span",{onClick:a[1]||(a[1]=t=>K(1)),class:p(k.value==1?"num_selected":"num")},"1",2),e("span",{class:p(k.value>=1?"name_selected":"name")},[h("选择配送司机 "),It],2)]),e("span",Dt,[e("span",{onClick:a[2]||(a[2]=t=>K(2)),class:p(k.value==2?"num_selected":"num")},"2",2),e("span",{class:p(k.value>=2?"name_selected":"name")},[h("输入派工单注意事项 "),Pt],2)]),e("span",St,[e("span",{onClick:a[3]||(a[3]=t=>K(3)),class:p(k.value==3?"num_selected":"num")},"3",2),e("span",{class:p(k.value>=3?"name_selected":"name")},[h("完成创建 "),xt],2)])]),e("div",Ot,[k.value==1?(m(),y(B,{key:0,model:f(d),rules:de,ref_key:"deliveryOrderFormRef",ref:re,"label-width":"90px","label-position":"left"},{default:o(()=>[l(_,{label:"人员名称",prop:"followerId"},{default:o(()=>[l(Y,{modelValue:f(d).followerId,"onUpdate:modelValue":a[4]||(a[4]=t=>f(d).followerId=t),onChange:He,placeholder:"查找或输入服务人员姓名"},{default:o(()=>[(m(!0),P(U,null,E(S.value,t=>(m(),y(F,{key:t.name,label:t.name,value:t.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),qt]),_:1}),l(_,{label:"联系方式",prop:"contactTelephone"},{default:o(()=>[l(D,{modelValue:f(d).contactTelephone,"onUpdate:modelValue":a[5]||(a[5]=t=>f(d).contactTelephone=t),placeholder:"查找或输入配送司机手机号码"},null,8,["modelValue"])]),_:1}),l(_,{label:"预约开始",prop:"appointmentStartTime"},{default:o(()=>[l(j,{modelValue:f(d).appointmentStartTime,"onUpdate:modelValue":a[6]||(a[6]=t=>f(d).appointmentStartTime=t),type:"datetime",placeholder:"日期/时间","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue"])]),_:1}),l(_,{label:"预约结束",prop:"appointmentEndTime"},{default:o(()=>[l(j,{modelValue:f(d).appointmentEndTime,"onUpdate:modelValue":a[7]||(a[7]=t=>f(d).appointmentEndTime=t),type:"datetime",placeholder:"日期/时间","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue"])]),_:1}),l(_,{label:"是否具备安装条件",class:"check_item"},{default:o(()=>[e("span",null,[l(me,{modelValue:f(d).haveInstallConditions,"onUpdate:modelValue":a[8]||(a[8]=t=>f(d).haveInstallConditions=t)},null,8,["modelValue"])])]),_:1})]),_:1},8,["model","rules"])):C("",!0),k.value==2?(m(),y(B,{key:1,model:f(d),rules:de,ref_key:"deliveryOrderFormRef",ref:re,"label-width":"90px","label-position":"left"},{default:o(()=>[l(_,{label:"优先级",prop:"priority"},{default:o(()=>[l(Y,{modelValue:f(d).priority,"onUpdate:modelValue":a[9]||(a[9]=t=>f(d).priority=t),placeholder:"请选择优先级"},{default:o(()=>[(m(!0),P(U,null,E(ie.value,t=>(m(),y(F,{key:t.code,label:t.name,value:t.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(_,{label:"派工类型",prop:"type"},{default:o(()=>[l(D,{disabled:"",placeholder:"配送派工",modelValue:f(d).type,"onUpdate:modelValue":a[10]||(a[10]=t=>f(d).type=t)},null,8,["modelValue"])]),_:1}),l(_,{label:"派工单备注",class:"customLayout"},{default:o(()=>[l(D,{modelValue:f(d).remark,"onUpdate:modelValue":a[11]||(a[11]=t=>f(d).remark=t),rows:5,type:"textarea",maxlength:"500",placeholder:"请填写派工单备注","show-word-limit":""},null,8,["modelValue"])]),_:1}),l(_,{label:"上传图片",class:"custom_upload"},{default:o(()=>[l(X,{"on-success":Se,"on-remove":xe,"auto-upload":!0,data:pe.value,headers:z.value,"before-upload":Oe,"file-list":f(d).fileList,"onUpdate:fileList":a[12]||(a[12]=t=>f(d).fileList=t),class:"avatar-uploader",action:"https://sh.mengtian.com.cn:9595/md/api/common/file/upload","show-file-list":!0,"list-type":"picture-card"},{default:o(()=>[l(W,{class:"avatar-uploader-icon"},{default:o(()=>[l(f(ee))]),_:1})]),_:1},8,["data","headers","file-list"])]),_:1})]),_:1},8,["model","rules"])):C("",!0)])]),_:1},8,["modelValue"])]),e("div",Et,[l(Z,{modelValue:R.value,"onUpdate:modelValue":a[26]||(a[26]=t=>R.value=t),title:"新建安装派工单",width:"80%","show-close":!1},{footer:o(()=>[e("div",zt,[l(n,{class:"cancel_btn",onClick:a[25]||(a[25]=t=>R.value=!1)},{default:o(()=>[h("取消")]),_:1}),w.value==1?(m(),y(n,{key:0,type:"primary",class:"primary_btn",onClick:Ce},{default:o(()=>[h("下一步")]),_:1})):C("",!0),w.value==2?(m(),y(n,{key:1,type:"primary",class:"primary_btn",onClick:Te},{default:o(()=>[h("完成")]),_:1})):C("",!0)])]),default:o(()=>[e("div",Jt,[e("span",Lt,[e("span",{onClick:a[15]||(a[15]=t=>Q(1)),class:p(w.value==1?"num_selected":"num")},"1",2),e("span",{class:p(w.value>=1?"name_selected":"name")},[h("选择安装技工 "),Rt],2)]),e("span",$t,[e("span",{onClick:a[16]||(a[16]=t=>Q(2)),class:p(w.value==2?"num_selected":"num")},"2",2),e("span",{class:p(w.value>=2?"name_selected":"name")},[h("输入安装派工单注意事项 "),Ft],2)]),e("span",Yt,[e("span",{onClick:a[17]||(a[17]=t=>Q(3)),class:p(w.value==3?"num_selected":"num")},"3",2),e("span",{class:p(w.value>=3?"name_selected":"name")},[h("完成创建 "),Bt],2)])]),e("div",Ht,[w.value==1?(m(),y(B,{key:0,model:i,rules:ue,"label-width":"80px","label-position":"left"},{default:o(()=>[l(_,{label:"人员名称",prop:"username"},{default:o(()=>[l(Y,{modelValue:i.username,"onUpdate:modelValue":a[18]||(a[18]=t=>i.username=t),onChange:Be,placeholder:"查找或输入服务人员姓名"},{default:o(()=>[(m(!0),P(U,null,E(S.value,t=>(m(),y(F,{key:t.name,label:t.name,value:t.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),Mt]),_:1}),l(_,{label:"联系方式",prop:"phone"},{default:o(()=>[l(D,{placeholder:"输入联系方式",modelValue:i.phone,"onUpdate:modelValue":a[19]||(a[19]=t=>i.phone=t)},null,8,["modelValue"])]),_:1}),l(_,{label:"预约开始",prop:"appointmentStartTime"},{default:o(()=>[l(j,{modelValue:i.appointmentStartTime,"onUpdate:modelValue":a[20]||(a[20]=t=>i.appointmentStartTime=t),type:"datetime",placeholder:"日期/时间","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue"])]),_:1}),l(_,{label:"预约结束",prop:"appointmentEndTime"},{default:o(()=>[l(j,{modelValue:i.appointmentEndTime,"onUpdate:modelValue":a[21]||(a[21]=t=>i.appointmentEndTime=t),type:"datetime",placeholder:"日期/时间","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue"])]),_:1}),l(_,{label:"安装小组"},{default:o(()=>[e("span",At,[l(me,{modelValue:i.installationTeam,"onUpdate:modelValue":a[22]||(a[22]=t=>i.installationTeam=t)},null,8,["modelValue"])])]),_:1}),i.installationTeam?(m(),y(_,{key:0,label:"添加组员"},{default:o(()=>[jt]),_:1})):C("",!0)]),_:1},8,["model","rules"])):C("",!0),w.value==2?(m(),y(B,{key:1,model:i,rules:ue,"label-width":"90px","label-position":"left"},{default:o(()=>[l(_,{label:"优先级",prop:"priority"},{default:o(()=>[l(Y,{modelValue:i.priority,"onUpdate:modelValue":a[23]||(a[23]=t=>i.priority=t),placeholder:"请选择优先级"},{default:o(()=>[(m(!0),P(U,null,E(ie.value,t=>(m(),y(F,{key:t.code,label:t.name,value:t.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(_,{label:"派工单备注",class:"customLayout"},{default:o(()=>[l(D,{modelValue:i.remark,"onUpdate:modelValue":a[24]||(a[24]=t=>i.remark=t),rows:5,type:"textarea",maxlength:"500",placeholder:"请填写派工单备注","show-word-limit":""},null,8,["modelValue"])]),_:1}),l(_,{label:"上传图片",class:"custom_upload"},{default:o(()=>[l(X,{"on-success":Je,"on-remove":Fe,"auto-upload":!0,data:be.value,headers:z.value,"before-upload":Ye,"file-list":i.fileList,"list-type":"picture-card",class:"avatar-uploader",action:"https://sh.mengtian.com.cn:9595/md/api/common/file/upload","show-file-list":!0},{default:o(()=>[l(W,{class:"avatar-uploader-icon"},{default:o(()=>[l(f(ee))]),_:1})]),_:1},8,["data","headers","file-list"])]),_:1})]),_:1},8,["model","rules"])):C("",!0)])]),_:1},8,["modelValue"])]),e("div",Gt,[l(Z,{modelValue:$.value,"onUpdate:modelValue":a[32]||(a[32]=t=>$.value=t),title:"问题提报",width:"80%","show-close":!1},{footer:o(()=>[e("div",al,[l(n,{class:"cancel_btn",onClick:a[31]||(a[31]=t=>$.value=!1)},{default:o(()=>[h("取消")]),_:1}),l(n,{type:"primary",class:"primary_btn",onClick:De},{default:o(()=>[h("提交")]),_:1})])]),default:o(()=>[e("span",Kt,[e("span",Qt,[e("span",{class:p(ne.value==1?"num_selected":"num")},"1",2),Wt]),e("span",Xt,[e("span",{class:p(ne.value==2?"num_selected":"num")},"2",2),Zt])]),e("div",el,[l(B,{model:c,rules:ve,"label-width":"90px","label-position":"left"},{default:o(()=>[l(_,{label:"订单编号",prop:"orderNo"},{default:o(()=>[l(D,{placeholder:"请选择订单编号",modelValue:c.orderNo,"onUpdate:modelValue":a[27]||(a[27]=t=>c.orderNo=t)},null,8,["modelValue"])]),_:1}),l(_,{label:"客户姓名",prop:"customerName"},{default:o(()=>[l(Y,{modelValue:c.customerName,"onUpdate:modelValue":a[28]||(a[28]=t=>c.customerName=t),onChange:Me,placeholder:"查找或选择服务人员姓名"},{default:o(()=>[(m(!0),P(U,null,E(S.value,t=>(m(),y(F,{key:t.name,label:t.name,value:t.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(_,{label:"客户电话",prop:"customerPhone"},{default:o(()=>[l(D,{placeholder:"请输入客户电话",modelValue:c.customerPhone,"onUpdate:modelValue":a[29]||(a[29]=t=>c.customerPhone=t)},null,8,["modelValue"])]),_:1}),l(_,{label:"问题描述",class:"customLayout",prop:"desc"},{default:o(()=>[l(D,{modelValue:c.desc,"onUpdate:modelValue":a[30]||(a[30]=t=>c.desc=t),rows:5,type:"textarea",maxlength:"500",placeholder:"请输入问题描述","show-word-limit":""},null,8,["modelValue"])]),_:1}),l(_,{label:"上传图片",class:"custom_upload"},{default:o(()=>[l(X,{"on-success":$e,"on-remove":Le,"auto-upload":!0,data:G.value,headers:z.value,"before-upload":Re,"file-list":c.fileList,"list-type":"picture-card",class:"avatar-uploader",action:"https://sh.mengtian.com.cn:9595/md/api/common/file/upload","show-file-list":!0},{default:o(()=>[l(W,{class:"avatar-uploader-icon"},{default:o(()=>[l(f(ee))]),_:1})]),_:1},8,["data","headers","file-list"])]),_:1})]),_:1},8,["model","rules"])])]),_:1},8,["modelValue"])])])}}}),nl=na(tl,[["__scopeId","data-v-2840c40c"]]);export{nl as default};
