import{_ as Ea,a as Fa,b as Ma}from"./tips-DfmWQaVF.js";import{_ as Ya}from"./add-CRTT_dyr.js";import{d as Ba,g as Aa,r as d,C as Ra,a as te,k as ja,N as Ha,X as Ae,Z as me,$ as Re,E as J,G as za,T as Wa,c as C,b as e,e as s,w as n,x as w,i as h,t as v,y as _,v as E,F as S,B as U,H as Ga,f as N,p as Ka,h as Xa,o as p,q as T,z as Za,K as je,I as Qa,U as el,a0 as al,R as ll,a1 as tl,J as sl,D as ol,S as nl,_ as dl}from"./index-CXdlkYQW.js";import{h as He}from"./moment-Cl4UOzQZ.js";const u=K=>(Ka("data-v-ceebcbab"),K=K(),Xa(),K),il={class:"main"},cl={class:"header"},rl={class:"title"},ul=u(()=>e("span",null,"问题提报状态",-1)),pl={class:"step"},ml={class:"item"},_l={class:"item"},vl={class:"item"},fl={class:"item"},bl={class:"problem_report_info"},hl={class:"title"},yl={class:"titleDateTime"},gl={class:"main_field"},kl={class:"row_field"},Tl={class:"field"},Cl=u(()=>e("span",{class:"label"},"问题编号：",-1)),wl={class:"value"},Vl={class:"field"},Il=u(()=>e("span",{class:"label"},"专卖店名称：",-1)),Dl={class:"value"},Sl={class:"field"},xl=u(()=>e("span",{class:"label"},"问题类别：",-1)),Nl={class:"value"},Pl={class:"row_field"},Ll={class:"field"},Ul=u(()=>e("span",{class:"label"},"订单编号：",-1)),Ol={class:"value"},ql={class:"field"},$l=u(()=>e("span",{class:"label"},"负责人：",-1)),Jl={class:"value"},El={class:"field"},Fl=u(()=>e("span",{class:"label"},"创建时间：",-1)),Ml={class:"value"},Yl={class:"row_field"},Bl={class:"field"},Al=u(()=>e("span",{class:"label"},"问题描述：",-1)),Rl={class:"value"},jl=u(()=>e("span",{class:"title"},"其他字段",-1)),Hl={class:"other_field"},zl={class:"row_field"},Wl={class:"field"},Gl=u(()=>e("span",{class:"label"},"客户姓名：",-1)),Kl={class:"value"},Xl={class:"field"},Zl=u(()=>e("span",{class:"label"},"客户手机号：",-1)),Ql={class:"value"},et={class:"field"},at=u(()=>e("span",{class:"label"},"来源：",-1)),lt={class:"value"},tt={class:"row_field"},st={class:"field"},ot=u(()=>e("span",{class:"label"},"省份：",-1)),nt={class:"value"},dt={class:"field"},it=u(()=>e("span",{class:"label"},"城市：",-1)),ct={class:"value"},rt={class:"field"},ut=u(()=>e("span",{class:"label"},"区：",-1)),pt={class:"value"},mt={class:"row_field"},_t={class:"field"},vt=u(()=>e("span",{class:"label"},"经销商内部提报：",-1)),ft={class:"field"},bt=u(()=>e("span",{class:"label"},"提报人：",-1)),ht={class:"value"},yt={class:"field"},gt=u(()=>e("span",{class:"label"},"提报人电话：",-1)),kt={class:"value"},Tt={class:"related_documents"},Ct=u(()=>e("span",{class:"title"},"相关单据",-1)),wt={class:"action_list"},Vt=u(()=>e("img",{src:Ea,alt:""},null,-1)),It={class:"right"},Dt={class:"userinfo"},St=u(()=>e("img",{src:Fa,alt:""},null,-1)),xt={class:"username"},Nt={class:"content"},Pt={class:"date"},Lt=u(()=>e("span",{class:"reply"},"回复",-1)),Ut=u(()=>e("img",{class:"tips",src:Ma,alt:""},null,-1)),Ot={class:"showMainDialog"},qt={class:"step"},$t={class:"item"},Jt=u(()=>e("span",{class:"name"},[h("确认问题订单 "),e("span",{class:"remark"},"选择或确认问题订单")],-1)),Et={class:"item"},Ft=u(()=>e("span",{class:"name"},[h("完善必填信息 "),e("span",{class:"remark"},"完善问题描述与处理方式")],-1)),Mt={class:"item"},Yt=u(()=>e("span",{class:"name"},[h("提交升级 "),e("span",{class:"remark"},"提交售后至总部")],-1)),Bt={class:"form_row_shengji"},At=u(()=>e("span",{class:"label required"},"订单编号:",-1)),Rt={class:"form_row_shengji"},jt=u(()=>e("span",{class:"label required"},"经销商需求描述:",-1)),Ht=u(()=>e("div",{class:"search"},[e("span",{class:"label required"},"客户历史售后工单")],-1)),zt={class:"table"},Wt=["onClick"],Gt={style:{display:"flex","align-items":"center"}},Kt=["onClick"],Xt={class:"desc_action"},Zt=u(()=>e("span",{class:"desc"},"搜索和选择/批量编辑问题产品",-1)),Qt={class:"action"},es={class:"search"},as={class:"filter_list"},ls={class:"table"},ts={style:{display:"flex","align-items":"center"}},ss={style:{display:"flex","align-items":"center"}},os={class:"responsibilityPerson"},ns=u(()=>e("span",{class:"label required"},"问题大类",-1)),ds=u(()=>e("span",{class:"label required"},"售后问题",-1)),is=u(()=>e("span",{class:"label required"},"责任人",-1)),cs={class:"responsibilityPerson"},rs=u(()=>e("span",{class:"label required"},"问题描述",-1)),us=u(()=>e("div",{class:"responsibilityPerson"},[e("span",{class:"label"},"上传文件")],-1)),ps={class:"containerUpload"},ms={class:"item"},_s=u(()=>e("div",{class:"el-upload__text"},"将文件拖至此处 或 点击上传",-1)),vs=u(()=>e("div",{class:"el-upload__tip"}," jpg/png files with a size less than 500kb ",-1)),fs={class:"dialog-footer"},bs={class:"deliveryOrderDialog"},hs={class:"step"},ys={class:"item"},gs=u(()=>e("span",{class:"remark"},"选择配送货品的司机",-1)),ks={class:"item"},Ts=u(()=>e("span",{class:"remark"},"如有,请填写关键备注",-1)),Cs={class:"item"},ws=u(()=>e("span",{class:"remark"},"等待司机配送",-1)),Vs={class:"content"},Is=u(()=>e("span",{class:"custom_item"},[e("img",{src:Ya,alt:""})],-1)),Ds={class:"dialog-footer"},Ss={class:"editcontentDialog"},xs={class:"content"},Ns={class:"dialog-footer"},Ps={class:"relatedDocumentsDialog"},Ls={class:"content"},Us={class:"tableItem"},Os=u(()=>e("span",{class:"tableTitle"}," 1. 售后工单 ",-1)),qs={class:"tableContent"},$s={style:{display:"flex","align-items":"center"}},Js=["onClick"],Es={class:"tableItem"},Fs=u(()=>e("span",{class:"tableTitle"}," 2. 派工单 ",-1)),Ms={class:"tableContent"},Ys={style:{display:"flex","align-items":"center"}},Bs={style:{display:"flex","align-items":"center",color:"blue"}},As=["onClick"],Rs={class:"dialog-footer"},js=Ba({__name:"index",setup(K){const{proxy:V}=Aa(),ze=d([]),P=d(1),L=Ra(),_e=d(L.query.id),j=d(L.query.neoid);let ve=null;const We=L.query.status!=null?parseInt(L.query.status.toString(),0)+1:1,X=d(!1),Ge=d([]),H=d([]),Ke=d([]),z=d(!1),Xe=d(!1),Z=d(!1),M=d([]),se=d([]);d([]);const c=d({}),fe=d([]),be=d([]),he=d([]);let W="",oe=d(),Q=0,ne="",de=null;const f=d({orderNo:"",remark:"",searchValue:"",orderType:"1",productType:"1",productModel:"1",treeSpecies:"1",paintColor:"1",size:"1"}),y=d({serviceTicketId:0,problemType:"",afterSalesIssues:[],responsiblePerson:"",problemDesc:"",fileList:[],poductType:"",componentType:"",badType:"",qualityIndicator1:"",qualityIndicator2:"",handleWay:""}),Ze=d([{label:"全部订单",value:"1"}]),Qe=d([{label:"产品大类",value:"1"}]),ea=d([{label:"产品型号",value:"1"}]),aa=d([{label:"树种",value:"1"}]),la=d([{label:"油漆颜色",value:"1"}]),ta=d([{label:"尺寸",value:"1"}]),G=d([]),sa=t=>{G.value=G.value.concat(t.data.map(a=>a.fileId))},ye=d(),oa=d([]),ge=t=>{console.info("选择的数据：",t),oa.value=t};d([{text1:"CS0011-06665-01",text2:"门套",text3:"示例字段...",text4:"混油米灰1#",text5:"2021-02-28 10:30:50",text6:""},{text1:"CS0011-06665-01",text2:"门套",text3:"示例字段...",text4:"混油米灰1#",text5:"2021-02-28 10:30:50",text6:""},{text1:"CS0011-06665-01",text2:"门套",text3:"示例字段...",text4:"混油米灰1#",text5:"2021-02-28 10:30:50",text6:""},{text1:"CS0011-06665-01",text2:"门套",text3:"示例字段...",text4:"混油米灰1#",text5:"2021-02-28 10:30:50",text6:""}]),d([{text1:"SU2024030101",text2:"已评价",text3:"其他",text4:"满意",text5:"2021-02-28 10:30:50",text6:""}]);const ke=d([{code:"1",name:"经销商问题"},{code:"2",name:"公司问题"},{code:"3",name:"物流问题"}]),Te=d([{code:"1",name:"店面测量师漏单"},{code:"2",name:"店面测量师量错"},{code:"3",name:"店里设计师漏分解"},{code:"4",name:"店里设计师分解错"},{code:"5",name:"店里设计不合理"},{code:"6",name:"店里下单员漏单"},{code:"7",name:"店里下单员下错"},{code:"8",name:"店里安装师问题"},{code:"9",name:"消费者补单"},{code:"10",name:"消费者使用不当"},{code:"11",name:"产品丢失"}]);d([{code:"1",name:"墙板"},{code:"2",name:"线条"},{code:"3",name:"五金"},{code:"4",name:"门套"},{code:"5",name:"门扇"},{code:"6",name:"柜体"},{code:"7",name:"柜门"},{code:"8",name:"玻璃"},{code:"9",name:"挂板"},{code:"10",name:"罗马柱"},{code:"11",name:"帽头"},{code:"12",name:"装饰块"},{code:"13",name:"雕花件"},{code:"14",name:"色板"},{code:"15",name:"整单"},{code:"16",name:"入户门"}]),d([{code:"1",name:"边梃"},{code:"2",name:"挂线条"},{code:"3",name:"芯板"},{code:"4",name:"金属条"},{code:"5",name:"码头"},{code:"6",name:"封边"},{code:"7",name:"L边"},{code:"8",name:"整体"},{code:"9",name:"面板执手"},{code:"10",name:"锁体"},{code:"11",name:"铰链"},{code:"12",name:"铰链底座"},{code:"13",name:"灯带"},{code:"14",name:"抽屉轨道"},{code:"15",name:"三合一"},{code:"16",name:"其他五金"},{code:"17",name:"档条"},{code:"18",name:"密封条"},{code:"19",name:"套板"},{code:"20",name:"门套"},{code:"21",name:"玻璃"},{code:"22",name:"门标"},{code:"23",name:"门芯板"},{code:"24",name:"配件"},{code:"25",name:"五金配件"},{code:"26",name:"8属边"},{code:"27",name:"背板"},{code:"28",name:"层板"},{code:"29",name:"抽屉板"},{code:"30",name:"底板"},{code:"31",name:"顶板"},{code:"32",name:"台面板"},{code:"33",name:"立板"},{code:"34",name:"侧板"},{code:"35",name:"踢脚板"},{code:"36",name:"五金件"},{code:"37",name:"挂板"},{code:"38",name:"罗马柱"},{code:"39",name:"帽头"},{code:"40",name:"装饰块"},{code:"41",name:"雕花件"},{code:"42",name:"色板"},{code:"43",name:"整单"},{code:"44",name:"修补漆"},{code:"45",name:"入户门扇"}]),d([{code:"1",name:"消费者"},{code:"2",name:"经销商"},{code:"3",name:"订单分解"},{code:"4",name:"备料"},{code:"5",name:"加工"},{code:"6",name:"免漆加工"},{code:"7",name:"油漆"},{code:"8",name:"少货"},{code:"9",name:"包装问题"},{code:"10",name:"五金问题"},{code:"11",name:"辅料问题"},{code:"12",name:"仓库发货"},{code:"13",name:"物流送达"},{code:"14",name:"系统问题"},{code:"15",name:"新品设计问题"},{code:"16",name:"隔音等级"},{code:"17",name:"受潮"},{code:"18",name:"无法提供证明的少货"},{code:"19",name:"交期延误"},{code:"20",name:"霉变"},{code:"21",name:"气味"},{code:"22",name:"长虫"},{code:"23",name:"过质保期"},{code:"24",name:"变色"},{code:"25",name:"入户门问题"}]),d({}),d([{code:"1",name:"订单分解错"},{code:"2",name:"订单漏分解"},{code:"3",name:"变形"}]),d([{code:"1",name:"漏备注"},{code:"2",name:"产品漏分解"},{code:"3",name:"配件漏分解"},{code:"4",name:"五金漏分解"},{code:"5",name:"孔位漏分解"}]),d([{label:"处理方式",value:"1"}]);const ie=d([]),na=d([{code:"1",name:"配送技工"},{code:"2",name:"安装技工"},{code:"3",name:"终端用户"},{code:"4",name:"经销商"}]),da=d([{code:"0",name:"配送派工"},{code:"1",name:"安装派工"},{code:"2",name:"维修"}]),ia=d([{code:"1",name:"最高"},{code:"2",name:"高"},{code:"3",name:"中"},{code:"4",name:"低"}]),ca=d([{code:"0",name:"配送派工单"},{code:"1",name:"安装派工单"},{code:"2",name:"维修派工单"}]),ra=d([{code:"0",name:"待开始"},{code:"1",name:"进行中"},{code:"2",name:"已完成"}]),Ce=d([{code:"",name:"全部"},{code:"1",name:"开始"},{code:"2",name:"已提报问题"},{code:"3",name:"售后审核"},{code:"4",name:"已定损"},{code:"5",name:"定责发起"},{code:"6",name:"已提交OA审批"},{code:"7",name:"已追责"},{code:"8",name:"已追责"},{code:"8",name:"结束"}]),O=d(1),A=d(!1),ua=d(!1),pa=d(1),ma=()=>{z.value=!0},we=d({files:[],name:"files"}),_a=t=>{we.value.files=[t]};d({value1:"1",value2:"1",value3:"1",value4:"1",value5:"1",value6:"1"});const va=()=>{P.value=2},ce=d({taskid:L.query.id,serviceCaseNeoId:L.query.serviceCaseId,orderId:L.query.orderId,taskStatus:We,accountName:L.query.accountName,distributorName:L.query.distributorName,followerName:L.query.followerName,createdTime:L.query.createdTime,createdBy:L.query.createdBy});let m=te({fieldJobContactName:"",contactTelephone:"",priority:"",type:"2",remark:"",appointmentStartTime:"",appointmentEndTime:"",haveInstallConditions:!1,fieldJobOrderId:L.query.orderId,fieldJobType__c:"2",stage__c:0,name:ce.value.accountName+"的配送派工单",fileList:[],filePath:[],followerId:null,address:""});const Ve=te({followerId:[{required:!0,message:"Please input username",trigger:"blur"}],fieldJobContactName:[{required:!0,message:"Please input username",trigger:"blur"}],contactTelephone:[{required:!0,message:"Please input phone",trigger:"blur"}],priority:[{required:!0,message:"Please input priority",trigger:"blur"}],appointmentStartTime:[{required:!0,message:"Please input appointment start time",trigger:"blur"}],appointmentEndTime:[{required:!0,message:"Please input appointment end time",trigger:"blur"}]}),fa=t=>{t.response},ba=t=>{if(t.code=="success"){let a=t.data.map(o=>o.fileId);a[0]&&m.filePath.push(a[0])}};let I=te({problemDescription__c:"",followerId:null});const ha=te({followerId:[{required:!0,message:"请选择负责人",trigger:"blur"}],problemDescription__c:[{required:!0,message:"请输入经销商处理结论",trigger:"blur"}]});d({files:[],name:"files"});const ya=d({Content:"application/json",Authorization:"",isImage:"true",needFileId:"true","Trace-Id":""}),Ie=t=>{Ga({userType:1,name:"",phone:""}).then(o=>{let i=o.data.data;i!=null&&i.length>0?(H.value=i,t&&J({message:"查询成功",type:"success"})):t&&J({message:"获取数据失败",type:"error"})})},ga=t=>{let a=H.value.find(o=>o.id==t);a&&(I.follower=a.neoId,I.followerName=a.name)},ka=t=>{let a=H.value.find(o=>o.id==t);a&&(m.fieldJobContactName=a.name,m.contactTelephone=a.phone)},Ta=()=>{let t={followerId:I.followerId,follower:I.follower,followerName:I.followerName,problemDescription:I.problemDescription__c,id:_e.value,questionType:c.value.questionType,name:c.value.name};je(t).then(a=>{let o=a.data;o.code=="success"&&o.data!=null?(c.value.followerName=I.followerName,c.value.problemDescription=I.problemDescription__c,Object.keys(I).forEach(i=>{i!=="followerId"&&(I[i]=""),i=="followerId"&&(I[i]=null)}),V.$message.success("保存成功")):V.$message.warning("保存失败")})};d([]);const ee=d([]);ja(()=>{Se(),Pe(),Le(),Ue(),xe(),Ie(!1),Fe(),Je()});const De=()=>{Se(),Pe(),Le(),Ue(),xe(),Ie(!1),Fe(),Je()},Se=()=>{Ha({id:_e.value,neoid:j.value==null?"":j.value}).then(t=>{let a=t.data;if(a.code=="success"){if(c.value=a.data,f.value.orderNo=c.value.caseNo,Q=c.value.caseStatus,Q===2){let o=c.value.dealerAcceptanceTime,g=new Date(o).getTime()+24*60*60*1e3;oe=d(Math.floor((g-Date.now())/1e3)),Ca(oe,g)}Ja(a.data.orderNeoId)}else V.$message.error(a==null?void 0:a.message)})},Ca=(t,a)=>{const o=setInterval(()=>{t.value=Math.floor((a-Date.now())/1e3),t.value<=0&&(clearInterval(o),ne="已受理阶段大于24小时")},1e3)},wa=t=>{const a=Math.floor(t/3600),o=Math.floor(t%3600/60),i=t%60;return ne||`${a.toString().padStart(2,"0")}:${o.toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}`},re=t=>{P.value=t},xe=()=>{Ae({deliveryDate:"",status__c:"",orderType__c:"",transactionDate:"",po:"",accountName:"",accountPhone:""}).then(a=>{let o=a.data;o.code=="success"?Ge.value=o.data:V.$message.error(o==null?void 0:o.message)})},Va=()=>{M.value.forEach(a=>{a.checked=!1}),y.value=d([]),A.value=!0;let t={orderNoeId:c.value.orderNeoId};Re(t).then(a=>{let o=a.data;o.code=="success"?(o.data.forEach(i=>{i.serviceCaseNeoId==c.value.neoid?i.operate=!0:i.operate=!1}),se.value=o.data):V.$message.error(o==null?void 0:o.message)})},ue=t=>{O.value=t},Ne=t=>{pa.value=t,A.value=!1,ua.value=!0},Ia=()=>{Qa.confirm("是否新建售后工单?","新建售后工单",{confirmButtonText:"是",cancelButtonText:"否",type:"warning"}).then(()=>{f.value.remark?qe(null):V.$message.error("经销商需求描述不能为空!")}).catch(()=>{})},Da=()=>{console.info("fileIdfileId",G);const t=M.value.filter(i=>i.checked);if(t.length<=0){V.$message.error("必须勾选数据!");return}let a=JSON.parse(JSON.stringify(t));a.forEach(i=>{i.picture=G.value,i.orderProductId=i.id,i.treeSpecies=i.treeSpecies__c,i.category=i.category1,i.paintColor=i.paintColor__c,i.ticketClassification=y.value.problemType,i.ticketProblem=y.value.afterSalesIssues,i.personLiable=y.value.responsiblePerson,i.descriptionOfTicketProblem=y.value.problemDesc,i.id=W!=""?i.id:null});let o={serviceTicket:Y.value.id,serviceTicketId:Y.value.neoId,serviceCaseId:parseInt(c.value.neoid),details:a};W!=""&&(o.id=W),console.info("selectDataselectData",t),!y.value.problemType||!y.value.afterSalesIssues||!y.value.responsiblePerson||!y.value.problemDesc?V.$message.error("必填选项不能为空!"):(V.$message.success("提交成功!"),setTimeout(()=>{A.value=!1,O.value=1,el(o).then(i=>{console.log(i);let g=i.data.data;g!=null&&(W=g.id,t.forEach(r=>{r.picture=G.value,r.ticketClassification=y.value.problemType,r.ticketProblem=y.value.afterSalesIssues,r.personLiable=y.value.responsiblePerson,r.descriptionOfTicketProblem=y.value.problemDesc}))})},500))},Sa=()=>{Xe.value=!0},xa=()=>{if(c.value.caseStatus=="5"){V.$message.warning("问题提报已完成，无法修改");return}if(ee.value.filter(a=>parseInt(a.status__c)>=2).length>0){V.$message.warning("存在处理中的售后工单,不允许修改");return}Z.value=!0},Pe=()=>{me("province").then(t=>{let a=t.data;a.code=="success"&&(fe.value=a.data)})},Le=()=>{me("city").then(t=>{let a=t.data;a.code=="success"&&(be.value=a.data)})},Ue=()=>{me("district").then(t=>{let a=t.data;a.code=="success"&&(he.value=a.data)})},Oe=t=>{Ae({po:t}).then(o=>{if(o.data.code=="success"){let i=o.data.data[0].id,g=o.data.data[0].po;ve=parseInt(Y.value.neoId),ol(i).then(r=>{let R=r.data.data.items;M.value=R,M.value.forEach(k=>{k.checked=!1,k.orderPo=g}),nl(ve).then(k=>{if(k.data.code=="success"&&k.data.data!=null){W=k.data.data.id;let D=k.data.data.details;D&&D.length>0?(M.value.forEach(B=>{let F=D.find(ae=>B.id==ae.orderProductId);F&&(B.descriptionOfTicketProblem=F.descriptionOfTicketProblem,B.ticketClassification=F.ticketClassification,B.ticketProblem=F.ticketProblem,B.responsibleSubject=F.responsibleSubject)}),console.log("tableData222",M.value)):console.info("details没数据")}})})}else V.$message.error("数据异常!")})},Y=d({}),qe=t=>{if(!f.value.remark){V.$message.error("经销商需求备注不能为空!");return}let a={},o=!0;t!=null?(a={id:t.id,neoId:t.neoId,serviceCase__c:c.value.neoid,serviceCaseNeoId:c.value.neoid,distributorDemands__c:f.value.remark},o=!1):a={serviceCase__c:c.value.neoid,serviceCaseNeoId:c.value.neoid,distributorDemands__c:f.value.remark,problemDescription__c:c.value.problemDescription,customerPhone__c:c.value.phone,accountName:c.value.caseAccountName,customerAddress__c:c.value.address,accountNeoId:c.value.caseAccountId,distributorNeoId:c.value.distributorNeoId,distributorName:c.value.distributorName,distributorNo:x.value.distributorNo,storeNeoId:c.value.storeNeoId,storeName:c.value.storeName,storeNo:x.value.storeNo,status__c:"1",reporter__c:c.value.externalUserName,reporterPhone__c:c.value.externalUserPhone,ticketSource__c:"1",orderNeoId:x.value.neoid,orderType__c:x.value.orderType__c,productionOrderNo__c:x.value.productionOrderNo__c,region__c:x.value.region__c},al(a).then(i=>{let g=i.data;if(g.code=="success"&&g.data!=null&&g.data.id!=null){if(o)$e(g.data.id);else if(t.operate=!0,Y.value=t,O.value=2,Oe(f.value.orderNo),c.value.caseStatus===2){let r={id:c.value.id,questionType:c.value.questionType,name:c.value.name,caseStatus:3,dealerProcessingTime:He().format("YYYY-MM-DD HH:mm:ss")};Me(r),setTimeout(()=>{De()},100)}J({message:"绑定售后工单成功",type:"success"})}else J({message:"绑定售后工单失败,请重试",type:"error"})}).catch(i=>{J({message:"绑定售后工单失败,请重试",type:"error"})})},$e=t=>{Na(),ll(t).then(a=>{a.data.code=="success"&&a.data.data.neoId!=null?(Y.value=a.data.data,Y.value.operate=!0,se.value.push(Y.value),de.close(),O.value=2,Oe(f.value.orderNo)):setTimeout(()=>{$e(t)},1e3)}).catch(a=>{console.error("Error checking sync status:",a)})},Na=()=>{de==null&&(de=tl.service({fullscreen:!0,lock:!0,text:"等待数据同步完成",background:"rgba(0, 0, 0, 0.7)"}))},Je=()=>{let t={serviceCaseNeoId:j.value};Re(t).then(a=>{let o=a.data.data;a.data.code=="success"&&(ee.value=o)}).catch(a=>{J({message:"请求数据失败，请重试",type:"error"})})},Ee=t=>{V.$router.push({path:"/aftersales_workorder_details",query:{id:t.id}})},Fe=()=>{let t={serviceCaseNeoId:j.value};za(t).then(a=>{let o=a.data.data;a.data.code=="success"&&(ie.value=o)}).catch(a=>{J({message:"请求数据失败，请重试",type:"error"})})},Pa=t=>{V.$router.push({path:"/dispatch_details",query:{id:t.id}})},La=()=>{X.value=!0},Ua=()=>{let t=m;t.fieldJobContactName=ce.value.accountName==null?"":ce.value.accountName.toString(),t.serviceCaseName=parseInt(j.value),t.fieldJobOrderId=x.value.id,t.contactTelephone=x.value.contactTel,t.fieldJobContactName=x.value.accountName__C,t.name=x.value.accountName__C+"的维修派工单",t.orderNo__c=x.value.po,t.picture=t.filePath,t.goodsPicture=t.filePath,t.status=0,sl(t).then(a=>{let o=a.data.data;if(Ke.value.push(o),o!=null){if(c.value.caseStatus===2){let i={id:c.value.id,questionType:c.value.questionType,name:c.value.name,caseStatus:3,dealerProcessingTime:He().format("YYYY-MM-DD HH:mm:ss")};Me(i),setTimeout(()=>{De()},500)}J({message:"新增派工单成功",type:"success"})}else J({message:"新增派工单失败",type:"error"});Object.keys(m).forEach(i=>{!i.includes("type")&&!i.includes("haveInstallConditions")&&i!=="fieldJobOrderId"&&i!=="fieldJobType__c"&&i!=="stage__c"&&i!=="name"&&(m[i]=""),i==="haveInstallConditions"&&(m[i]=!1),(i=="fileList"||i=="filePath")&&(m[i]=[])})}).catch(a=>{J({message:"请求新增派工单失败，请重试",type:"error"}),Object.keys(m).forEach(o=>{o!=="type"&&o!=="haveInstallConditions"&&o!=="fieldJobOrderId"&&o!=="fieldJobType__c"&&o!=="stage__c"&&o!=="name"&&(m[o]=""),o=="haveInstallConditions"&&(m[o]=!1),(o=="fileList"||o=="filePath")&&(m[o]=[])}),console.error("请求新增派工单失败:",a)}),z.value=!1,P.value=1},Me=t=>{je(t).then(a=>{let o=a.data;o.code=="success"&&o.data!=null?console.info("更新成功"):console.info("更新失败")})},Oa=t=>{let a=fe.value.find(o=>o.optionCode==t);return t&&a?a.optionLabel:""},qa=t=>{let a=be.value.find(o=>o.optionCode==t);return t&&a?a.optionLabel:""},$a=t=>{let a=he.value.find(o=>o.optionCode==t);return t&&a?a.optionLabel:""},x=d({}),Ja=t=>{t!=null&&Wa(t).then(a=>{let o=a.data;o.code=="success"?(x.value=o.data,m.fieldJobOrderId=o.data.id,m.fieldJobContactName=o.data.accountName__C,m.name=o.data.accountName__C+"的维修派工单",f.value.orderNo=x.value.po):V.$message.error(o==null?void 0:o.message)})};return(t,a)=>{var Be;const o=N("el-button"),i=N("el-checkbox"),g=N("el-input"),r=N("el-table-column"),R=N("el-table"),k=N("el-option"),D=N("el-select"),B=N("upload-filled"),F=N("el-icon"),ae=N("el-upload"),le=N("el-dialog"),q=N("el-form-item"),Ye=N("el-date-picker"),pe=N("el-form");return p(),C("div",il,[e("span",cl,[e("span",rl,[ul,s(o,{class:"btn",onClick:Va},{default:n(()=>[h("升级到总部 (售后)")]),_:1})]),e("span",pl,[e("span",ml,[e("span",{class:w(c.value.caseStatus==1?"num_selected":"num")},"1",2),e("span",{class:w(c.value.caseStatus>=1?"name_selected":"name")},"待处理",2)]),e("span",_l,[e("span",{class:w(c.value.caseStatus==2?"num_selected":"num")},"2",2),e("span",{class:w(c.value.caseStatus>=2?"name_selected":"name")},"已受理",2)]),e("span",vl,[e("span",{class:w(c.value.caseStatus==3?"num_selected":"num")},"3",2),e("span",{class:w(c.value.caseStatus>=3?"name_selected":"name")},"处理中",2)]),e("span",fl,[e("span",{class:w(c.value.caseStatus==4?"num_selected":"num")},"4",2),e("span",{class:w(c.value.caseStatus>=4?"name_selected":"name")},"已完成",2)])])]),e("span",bl,[e("span",hl,[h("问题提报详情"),e("span",yl,v(_(Q)<=2&&_(Q)>0?wa(_(oe)):""),1)]),e("span",gl,[e("span",kl,[e("span",Tl,[Cl,e("span",wl,v(c.value.caseNo),1),E("",!0)]),e("span",Vl,[Il,e("span",Dl,v(c.value.storeName),1)]),e("span",Sl,[xl,e("span",Nl,v(c.value.questionType=="1"?"售后保修":"投诉建议"),1)])]),e("span",Pl,[e("span",Ll,[Ul,e("span",Ol,v(x.value.po),1)]),e("span",ql,[$l,e("span",Jl,v(c.value.followerName),1)]),e("span",El,[Fl,e("span",Ml,v(c.value.createdTime),1)])]),e("span",Yl,[e("span",Bl,[Al,e("span",Rl,v(c.value.problemDescription),1)])])]),jl,e("span",Hl,[e("span",zl,[e("span",Wl,[Gl,e("span",Kl,v(c.value.caseAccountName),1)]),e("span",Xl,[Zl,e("span",Ql,v(c.value.phone),1)]),e("span",et,[at,e("span",lt,v(c.value.complaintSourceC?(Be=na.value.find(l=>l.code==c.value.complaintSourceC))==null?void 0:Be.name:""),1)])]),e("span",tt,[e("span",st,[ot,e("span",nt,v(Oa(c.value.province)),1)]),e("span",dt,[it,e("span",ct,v(qa(c.value.city)),1)]),e("span",rt,[ut,e("span",pt,v($a(c.value.district)),1)])]),e("span",mt,[e("span",_t,[vt,s(i,{modelValue:t.checked1,"onUpdate:modelValue":a[0]||(a[0]=l=>t.checked1=l),disabled:""},null,8,["modelValue"])]),e("span",ft,[bt,e("span",ht,v(c.value.externalUserName),1)]),e("span",yt,[gt,e("span",kt,v(c.value.externalUserPhone),1)])])])]),e("span",Tt,[Ct,s(o,{class:"btn"},{default:n(()=>[h(v(ee.value.length)+"个售后工单",1)]),_:1}),s(o,{class:"btn"},{default:n(()=>[h(v(ie.value.length)+"个派工单",1)]),_:1}),e("span",{class:"view",onClick:La},"点击查看")]),e("span",wt,[e("div",{class:"left"},[Vt,e("span",{class:"initiate_comments",onClick:Sa},"发起评论")]),e("div",It,[s(o,{type:"primary",onClick:xa,class:"primary_btn"},{default:n(()=>[h("编辑")]),_:1}),s(o,{type:"primary",onClick:ma,class:"primary_btn"},{default:n(()=>[h("创建派工单")]),_:1})])]),(p(!0),C(S,null,U(ze.value,l=>(p(),C("div",{class:"comment",key:l.date},[e("div",Dt,[St,e("span",xt,v(l.userName),1)]),e("div",Nt,v(l.text),1),e("div",Pt,v(l.date),1),Lt,Ut]))),128)),e("div",Ot,[s(le,{modelValue:A.value,"onUpdate:modelValue":a[20]||(a[20]=l=>A.value=l),title:"升级到总部 (售后)",width:"80% ","show-close":!1},{footer:n(()=>[e("div",fs,[s(o,{class:"cancel_btn",onClick:a[19]||(a[19]=l=>A.value=!1)},{default:n(()=>[h("取消")]),_:1}),O.value==1?(p(),T(o,{key:0,onClick:Ia,type:"primary",class:"primary_btn",style:{"margin-left":"50px !important"}},{default:n(()=>[h("下一步")]),_:1})):E("",!0),O.value==2?(p(),T(o,{key:1,onClick:Da,type:"primary",class:"primary_btn",style:{"margin-left":"50px !important"}},{default:n(()=>[h("提交")]),_:1})):E("",!0)])]),default:n(()=>[e("div",qt,[e("span",$t,[e("span",{onClick:a[1]||(a[1]=l=>ue(1)),class:w(O.value==1?"num_selected":"num")},"1",2),Jt]),e("span",Et,[e("span",{onClick:a[2]||(a[2]=l=>ue(2)),class:w(O.value==2?"num_selected":"num")},"2",2),Ft]),e("span",Mt,[e("span",{onClick:a[3]||(a[3]=l=>ue(3)),class:w(O.value==3?"num_selected":"num")},"3",2),Yt])]),O.value==1?(p(),C(S,{key:0},[e("span",Bt,[At,s(g,{disabled:"",modelValue:f.value.orderNo,"onUpdate:modelValue":a[4]||(a[4]=l=>f.value.orderNo=l),placeholder:"订单编号",style:{width:"auto"}},null,8,["modelValue"])]),e("div",Rt,[jt,s(g,{modelValue:f.value.remark,"onUpdate:modelValue":a[5]||(a[5]=l=>f.value.remark=l),placeholder:"输入升级描述",style:{width:"auto"}},null,8,["modelValue"])]),Ht,e("div",zt,[s(R,{ref_key:"multipleTableRef",ref:ye,"selection-change":ge,data:se.value,stripe:!1,style:{width:"100%",overflow:"auto"},"max-height":"400"},{default:n(()=>[s(r,{prop:"name",label:"售后工单编号"},{default:n(l=>[e("div",{style:{display:"flex","align-items":"center",color:"#165dff",cursor:"pointer"},onClick:b=>Ee(l.row)},v(l.row.name),9,Wt)]),_:1}),s(r,{prop:"distributorNo",label:"经销商名称"}),s(r,{prop:"storeName",label:"专卖店名称"}),s(r,{prop:"status__c",label:"状态"},{default:n(l=>{var b;return[e("div",Gt,v(l.row.status__c?(b=Ce.value.find($=>$.code==l.row.status__c))==null?void 0:b.name:""),1)]}),_:1}),s(r,{prop:"reporter__c",label:"提报人"}),s(r,{prop:"problemDescription__c",label:"问题描述 "}),s(r,{prop:"distributorDemands__c",label:"经销商需求描述 "}),s(r,{prop:"createdTime",label:"创建时间 "}),s(r,{prop:"operate",label:"操作"},{default:n(l=>[l.row.operate?(p(),T(i,{key:0,disabled:"",modelValue:l.row.operate,"onUpdate:modelValue":b=>l.row.operate=b,value:l.row.operate,style:{"--el-disabled-text-color":"#FF8127","--el-checkbox-disabled-checked-icon-color":"white","--el-checkbox-disabled-checked-input-fill":"#FF8127","--el-checkbox-text-color":"#ff8127"}},{default:n(()=>[h("已绑定")]),_:2},1032,["modelValue","onUpdate:modelValue","value"])):(p(),C("div",{key:1,style:{display:"flex","align-items":"center",color:"#165dff",cursor:"pointer"},onClick:b=>qe(l.row)}," 点击绑定 ",8,Kt))]),_:1})]),_:1},8,["data"])])],64)):E("",!0),O.value==2?(p(),C(S,{key:1},[e("div",Xt,[Zt,e("span",Qt,[s(o,{style:{display:"none"},class:"btn",onClick:a[6]||(a[6]=l=>Ne(1))},{default:n(()=>[h("完善问题描述")]),_:1}),s(o,{style:{display:"none"},class:"btn",onClick:a[7]||(a[7]=l=>Ne(2))},{default:n(()=>[h("定义处理方式")]),_:1})])]),e("div",es,[s(g,{modelValue:f.value.searchValue,"onUpdate:modelValue":a[8]||(a[8]=l=>f.value.searchValue=l),placeholder:"搜索"},null,8,["modelValue"])]),e("div",as,[s(D,{modelValue:f.value.orderType,"onUpdate:modelValue":a[9]||(a[9]=l=>f.value.orderType=l)},{default:n(()=>[(p(!0),C(S,null,U(Ze.value,l=>(p(),T(k,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),s(D,{modelValue:f.value.productType,"onUpdate:modelValue":a[10]||(a[10]=l=>f.value.productType=l)},{default:n(()=>[(p(!0),C(S,null,U(Qe.value,l=>(p(),T(k,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),s(D,{modelValue:f.value.productModel,"onUpdate:modelValue":a[11]||(a[11]=l=>f.value.productModel=l)},{default:n(()=>[(p(!0),C(S,null,U(ea.value,l=>(p(),T(k,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),s(D,{modelValue:f.value.treeSpecies,"onUpdate:modelValue":a[12]||(a[12]=l=>f.value.treeSpecies=l)},{default:n(()=>[(p(!0),C(S,null,U(aa.value,l=>(p(),T(k,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),s(D,{modelValue:f.value.paintColor,"onUpdate:modelValue":a[13]||(a[13]=l=>f.value.paintColor=l)},{default:n(()=>[(p(!0),C(S,null,U(la.value,l=>(p(),T(k,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),s(D,{modelValue:f.value.size,"onUpdate:modelValue":a[14]||(a[14]=l=>f.value.size=l)},{default:n(()=>[(p(!0),C(S,null,U(ta.value,l=>(p(),T(k,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),e("div",ls,[s(R,{ref_key:"multipleTableRef",ref:ye,"selection-change":ge,data:M.value,stripe:!1,style:{width:"100%","max-height":"200px",overflow:"auto"}},{default:n(()=>[s(r,{prop:"checked",label:"全选",width:"80px"},{default:n(l=>[s(i,{modelValue:l.row.checked,"onUpdate:modelValue":b=>l.row.checked=b},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),s(r,{prop:"orderPo",label:"订单编号"}),s(r,{prop:"sku",label:"详单编号"}),s(r,{prop:"category1",label:"产品大类"}),s(r,{prop:"fscProductModel",label:"产品型号"}),s(r,{prop:"treeSpecies__c",label:"树种"}),s(r,{prop:"paintColor__c",label:"油漆颜色 "}),s(r,{prop:"fscProductSpec",label:"尺寸 "}),s(r,{prop:"ticketClassification",label:"问题大类"},{default:n(l=>{var b;return[e("div",ts,v(l.row.ticketClassification?(b=ke.value.find($=>$.code==l.row.ticketClassification))==null?void 0:b.name:""),1)]}),_:1}),s(r,{prop:"ticketProblem",label:"售后问题 "},{default:n(l=>{var b;return[e("div",ss,v(l.row.ticketProblem?(b=Te.value.find($=>$.code==l.row.ticketProblem))==null?void 0:b.name:""),1)]}),_:1}),s(r,{prop:"",label:"责任人 "}),s(r,{prop:"descriptionOfTicketProblem",label:"问题描述 "})]),_:1},8,["data"])]),e("div",os,[ns,s(D,{modelValue:y.value.problemType,"onUpdate:modelValue":a[15]||(a[15]=l=>y.value.problemType=l),placeholder:""},{default:n(()=>[(p(!0),C(S,null,U(ke.value,l=>(p(),T(k,{key:l.code,label:l.name,value:l.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),ds,s(D,{multiple:"","collapse-tags":"",modelValue:y.value.afterSalesIssues,"onUpdate:modelValue":a[16]||(a[16]=l=>y.value.afterSalesIssues=l),placeholder:""},{default:n(()=>[(p(!0),C(S,null,U(Te.value,l=>(p(),T(k,{key:l.code,label:l.name,value:l.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),is,s(g,{modelValue:y.value.responsiblePerson,"onUpdate:modelValue":a[17]||(a[17]=l=>y.value.responsiblePerson=l),style:{width:"240px"},placeholder:"请输入责任人"},null,8,["modelValue"])]),e("div",cs,[rs,s(g,{modelValue:y.value.problemDesc,"onUpdate:modelValue":a[18]||(a[18]=l=>y.value.problemDesc=l),style:{width:"440px"},rows:2,type:"textarea",placeholder:"请输入问题描述"},null,8,["modelValue"])]),us,e("div",ps,[e("span",ms,[s(ae,{name:"files","on-success":sa,class:"upload",drag:"",action:"https://sh.mengtian.com.cn:9595/md/api/common/file/upload",multiple:""},{tip:n(()=>[vs]),default:n(()=>[s(F,{class:"el-icon--upload"},{default:n(()=>[s(B)]),_:1}),_s]),_:1})])])],64)):E("",!0)]),_:1},8,["modelValue"])]),e("div",bs,[s(le,{modelValue:z.value,"onUpdate:modelValue":a[34]||(a[34]=l=>z.value=l),title:"新建配送派工单",width:"80%","show-close":!1},{footer:n(()=>[e("div",Ds,[s(o,{class:"cancel_btn",onClick:a[33]||(a[33]=l=>z.value=!1)},{default:n(()=>[h("取消")]),_:1}),P.value==1?(p(),T(o,{key:0,type:"primary",class:"primary_btn",onClick:va},{default:n(()=>[h("下一步")]),_:1})):E("",!0),P.value==2?(p(),T(o,{key:1,type:"primary",class:"primary_btn",onClick:Ua},{default:n(()=>[h("完成")]),_:1})):E("",!0)])]),default:n(()=>[e("div",hs,[e("span",ys,[e("span",{onClick:a[21]||(a[21]=l=>re(1)),class:w(P.value==1?"num_selected":"num")},"1",2),e("span",{class:w(P.value>=1?"name_selected":"name")},[h("选择配送司机 "),gs],2)]),e("span",ks,[e("span",{onClick:a[22]||(a[22]=l=>re(2)),class:w(P.value==2?"num_selected":"num")},"2",2),e("span",{class:w(P.value>=2?"name_selected":"name")},[h("输入派工单注意事项 "),Ts],2)]),e("span",Cs,[e("span",{onClick:a[23]||(a[23]=l=>re(3)),class:w(P.value==3?"num_selected":"num")},"3",2),e("span",{class:w(P.value>=3?"name_selected":"name")},[h("完成创建 "),ws],2)])]),e("div",Vs,[P.value==1?(p(),T(pe,{key:0,model:_(m),rules:Ve,ref:"deliveryOrderFormRef","label-width":"90px","label-position":"left"},{default:n(()=>[s(q,{label:"人员名称",prop:"followerId"},{default:n(()=>[s(D,{modelValue:_(m).followerId,"onUpdate:modelValue":a[24]||(a[24]=l=>_(m).followerId=l),onChange:ka,placeholder:"查找或输入服务人员姓名"},{default:n(()=>[(p(!0),C(S,null,U(H.value,l=>(p(),T(k,{key:l.name,label:l.name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),Is]),_:1}),s(q,{label:"联系方式",prop:"contactTelephone"},{default:n(()=>[s(g,{modelValue:_(m).contactTelephone,"onUpdate:modelValue":a[25]||(a[25]=l=>_(m).contactTelephone=l),placeholder:"查找或输入配送司机手机号码"},null,8,["modelValue"])]),_:1}),s(q,{label:"预约开始",prop:"appointmentStartTime"},{default:n(()=>[s(Ye,{modelValue:_(m).appointmentStartTime,"onUpdate:modelValue":a[26]||(a[26]=l=>_(m).appointmentStartTime=l),type:"datetime",placeholder:"日期/时间","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue"])]),_:1}),s(q,{label:"预约结束",prop:"appointmentEndTime"},{default:n(()=>[s(Ye,{modelValue:_(m).appointmentEndTime,"onUpdate:modelValue":a[27]||(a[27]=l=>_(m).appointmentEndTime=l),type:"datetime",placeholder:"日期/时间","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue"])]),_:1}),s(q,{label:"是否具备安装条件",class:"check_item"},{default:n(()=>[e("span",null,[s(i,{modelValue:_(m).haveInstallConditions,"onUpdate:modelValue":a[28]||(a[28]=l=>_(m).haveInstallConditions=l)},null,8,["modelValue"])])]),_:1})]),_:1},8,["model","rules"])):E("",!0),P.value==2?(p(),T(pe,{key:1,model:_(m),rules:Ve,ref:"deliveryOrderFormRef","label-width":"90px","label-position":"left"},{default:n(()=>[s(q,{label:"优先级",prop:"priority"},{default:n(()=>[s(D,{modelValue:_(m).priority,"onUpdate:modelValue":a[29]||(a[29]=l=>_(m).priority=l),placeholder:"选择优先级"},{default:n(()=>[(p(!0),C(S,null,U(ia.value,l=>(p(),T(k,{key:l.code,label:l.name,value:l.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),s(q,{label:"派工类型",prop:"fieldJobType__c"},{default:n(()=>[s(D,{modelValue:_(m).fieldJobType__c,"onUpdate:modelValue":a[30]||(a[30]=l=>_(m).fieldJobType__c=l),placeholder:"选择派工类型"},{default:n(()=>[(p(!0),C(S,null,U(da.value,l=>(p(),T(k,{key:l.code,label:l.name,value:l.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),s(q,{label:"派工单备注",class:"customLayout"},{default:n(()=>[s(g,{modelValue:_(m).remark,"onUpdate:modelValue":a[31]||(a[31]=l=>_(m).remark=l),rows:5,type:"textarea",maxlength:"500",placeholder:"请填写派工单备注","show-word-limit":""},null,8,["modelValue"])]),_:1}),s(q,{label:"上传图片",class:"custom_upload"},{default:n(()=>[s(ae,{"on-success":ba,"on-remove":fa,"auto-upload":!0,data:we.value,headers:ya.value,"before-upload":_a,"file-list":_(m).fileList,"onUpdate:fileList":a[32]||(a[32]=l=>_(m).fileList=l),class:"avatar-uploader",action:"https://sh.mengtian.com.cn:9595/md/api/common/file/upload","show-file-list":!0,"list-type":"picture-card"},{default:n(()=>[s(F,{class:"avatar-uploader-icon"},{default:n(()=>[s(_(Za))]),_:1})]),_:1},8,["data","headers","file-list"])]),_:1})]),_:1},8,["model","rules"])):E("",!0)])]),_:1},8,["modelValue"])]),e("div",Ss,[s(le,{modelValue:Z.value,"onUpdate:modelValue":a[38]||(a[38]=l=>Z.value=l),title:"编辑",width:"40%","show-close":!1},{footer:n(()=>[e("div",Ns,[s(o,{class:"cancel_btn",onClick:a[37]||(a[37]=l=>Z.value=!1)},{default:n(()=>[h("取消")]),_:1}),s(o,{type:"primary",class:"primary_btn",onClick:Ta},{default:n(()=>[h("保存")]),_:1})])]),default:n(()=>[e("div",xs,[s(pe,{model:_(I),rules:ha,ref:"deditFollowerAndPDescriptFormRef","label-width":"90px","label-position":"left"},{default:n(()=>[s(q,{label:"负责人",prop:"followerId"},{default:n(()=>[s(D,{modelValue:_(I).followerId,"onUpdate:modelValue":a[35]||(a[35]=l=>_(I).followerId=l),onChange:ga,placeholder:"请选择负责人"},{default:n(()=>[(p(!0),C(S,null,U(H.value,l=>(p(),T(k,{key:l.name,label:l.name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),s(q,{label:"问题描述",prop:"problemDescription__c"},{default:n(()=>[s(g,{modelValue:_(I).problemDescription__c,"onUpdate:modelValue":a[36]||(a[36]=l=>_(I).problemDescription__c=l),placeholder:"请输入经销商处理结论"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])])]),_:1},8,["modelValue"])]),e("div",Ps,[s(le,{modelValue:X.value,"onUpdate:modelValue":a[40]||(a[40]=l=>X.value=l),title:"相关单据",width:"80%","show-close":!1},{footer:n(()=>[e("div",Rs,[s(o,{type:"primary",class:"primary_btn",onClick:a[39]||(a[39]=l=>X.value=!1)},{default:n(()=>[h("返回")]),_:1})])]),default:n(()=>[e("div",Ls,[e("span",Us,[Os,e("span",qs,[s(R,{data:ee.value,stripe:!1,style:{width:"100%"}},{default:n(()=>[s(r,{prop:"name",label:"售后工单编号"}),s(r,{prop:"serviceTicketType__c",label:"类别"}),s(r,{prop:"text3",label:"负责人"}),s(r,{prop:"status__c",label:"状态"},{default:n(l=>{var b;return[e("div",$s,v(l.row.status__c?(b=Ce.value.find($=>$.code==l.row.status__c))==null?void 0:b.name:""),1)]}),_:1}),s(r,{prop:"updatedTime",label:"修改时间"}),s(r,{label:"操作",width:"80px"},{default:n(l=>[e("div",{style:{display:"flex","align-items":"center",color:"#165dff",cursor:"pointer"},onClick:b=>Ee(l.row)}," 查看 ",8,Js)]),_:1})]),_:1},8,["data"])])]),e("span",Es,[Fs,e("span",Ms,[s(R,{data:ie.value,stripe:!1,style:{width:"100%"}},{default:n(()=>[s(r,{prop:"caseNo",label:"派工单编号"}),s(r,{prop:"fieldJobType__c",label:"类别"},{default:n(l=>{var b;return[e("div",Ys,v(l.row.fieldJobType__c?(b=ca.value.find($=>$.code==l.row.fieldJobType__c))==null?void 0:b.name:"配送派工单"),1)]}),_:1}),s(r,{prop:"followerName",label:"负责人"}),s(r,{prop:"status",label:"状态"},{default:n(l=>{var b;return[e("div",Bs,v(l.row.stage__c?(b=ra.value.find($=>$.code==l.row.stage__c))==null?void 0:b.name:"待开始"),1)]}),_:1}),s(r,{prop:"updatedTime",label:"修改时间"}),s(r,{label:"操作",width:"80px"},{default:n(l=>[e("div",{style:{display:"flex","align-items":"center",color:"#165dff",cursor:"pointer"},onClick:b=>Pa(l.row)}," 查看 ",8,As)]),_:1})]),_:1},8,["data"])])])])]),_:1},8,["modelValue"])])])}}}),Ks=dl(js,[["__scopeId","data-v-ceebcbab"]]);export{Ks as default};
