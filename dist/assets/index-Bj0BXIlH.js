import{_ as Oe,a as Ee,b as Le}from"./tips-DfmWQaVF.js";import{_ as Ye}from"./add-CRTT_dyr.js";import{d as $e,g as Re,r as h,y as Fe,a as P,k as Je,E as D,c as L,b as e,s as d,i as c,n as y,w as s,q as g,x as I,e as a,F as A,v as G,m as Be,z as je,f as C,p as Me,h as He,o as v,u as _,t as Z,_ as ze}from"./index-yO3R9-1p.js";import{a as Ae,b as Ge,c as de}from"./common-C989s-vj.js";const u=Y=>(Me("data-v-78223fa3"),Y=Y(),He(),Y),Ze={class:"main"},Ke={class:"header"},Qe=u(()=>e("span",{class:"title"},"任务状态",-1)),We={class:"step"},Xe={class:"item"},et={class:"item"},tt={class:"item"},at={class:"item"},lt={class:"item"},st={class:"task_info"},ot={class:"title"},nt={class:"main_field"},it={class:"row_field"},rt={class:"field"},dt=u(()=>e("span",{class:"label"},"任务编号：",-1)),pt={class:"value"},ut={class:"field"},ct=u(()=>e("span",{class:"label"},"经销商：",-1)),mt={class:"value"},_t={class:"field"},ft=u(()=>e("span",{class:"label"},"经销商负责人：",-1)),vt={class:"value"},ht={class:"row_field"},bt={class:"field"},yt=u(()=>e("span",{class:"label"},"客户名称：",-1)),gt={class:"value"},Vt={class:"field"},xt=u(()=>e("span",{class:"label"},"当前负责人：",-1)),kt={class:"value"},Ct={class:"field"},Tt=u(()=>e("span",{class:"label"},"创建时间：",-1)),wt={class:"value"},It={class:"row_field"},Dt={class:"field"},Nt=u(()=>e("span",{class:"label"},"客户电话：",-1)),Pt={class:"value"},St=Be('<span class="field" data-v-78223fa3><span class="label" data-v-78223fa3>客户地址：</span><span class="value" data-v-78223fa3></span></span><span class="field" data-v-78223fa3><span class="label" data-v-78223fa3></span><span class="value" data-v-78223fa3></span></span>',2),Ut={class:"order_status"},qt=u(()=>e("span",{class:"title"},"订单状态",-1)),Ot={class:"step"},Et={class:"item"},Lt={class:"item"},Yt={class:"item"},$t={class:"item"},Rt={class:"item"},Ft={class:"item"},Jt={class:"item"},Bt={class:"related_item_order"},jt=u(()=>e("span",{class:"table_title"},"相关项>订单",-1)),Mt={class:"table_content"},Ht=["onClick"],zt={class:"related_item_invoice"},At=u(()=>e("span",{class:"table_title"},"相关项>发货单",-1)),Gt={class:"table_content"},Zt=["onClick"],Kt=u(()=>e("span",null,"查看",-1)),Qt=u(()=>e("span",null,"批量提货",-1)),Wt={class:"related_item_invoice"},Xt=u(()=>e("span",{class:"table_title"},"相关项>派工单",-1)),ea={class:"table_content"},ta={style:{display:"flex","align-items":"center",color:"#165dff",cursor:"pointer"}},aa=["onClick"],la={class:"action_list"},sa=u(()=>e("img",{src:Oe,alt:""},null,-1)),oa={class:"right"},na={class:"userinfo"},ia=u(()=>e("img",{src:Ee,alt:""},null,-1)),ra={class:"username"},da={class:"content"},pa={class:"date"},ua=u(()=>e("span",{class:"reply"},"回复",-1)),ca=u(()=>e("img",{class:"tips",src:Le,alt:""},null,-1)),ma={class:"deliveryOrderDialog"},_a={class:"step"},fa={class:"item"},va=u(()=>e("span",{class:"remark"},"选择配送货品的司机",-1)),ha={class:"item"},ba=u(()=>e("span",{class:"remark"},"如有,请填写关键备注",-1)),ya={class:"item"},ga=u(()=>e("span",{class:"remark"},"等待司机配送",-1)),Va={class:"content"},xa={class:"dialog-footer"},ka={class:"installationOrderDialog"},Ca={class:"step"},Ta={class:"item"},wa=u(()=>e("span",{class:"remark"},"选择负责安装的技工",-1)),Ia={class:"item"},Da=u(()=>e("span",{class:"remark"},"如有,请填写关键备注",-1)),Na={class:"item"},Pa=u(()=>e("span",{class:"remark"},"等待现场服务",-1)),Sa={class:"content"},Ua={style:{width:"300px"}},qa=u(()=>e("span",{class:"custom_item"},[e("img",{src:Ye,alt:""})],-1)),Oa={class:"dialog-footer"},Ea={class:"problemReportingDialog"},La={class:"step"},Ya={class:"item"},$a=u(()=>e("span",{class:"name"},[c("完善提报信息 "),e("span",{class:"remark"},"完善问题提报的信息")],-1)),Ra={class:"item"},Fa=u(()=>e("span",{class:"name"},[c("完成创建 "),e("span",{class:"remark"},"等待售服部处理")],-1)),Ja={class:"content"},Ba={class:"dialog-footer"},ja=$e({__name:"index",setup(Y){const{proxy:K}=Re(),V=h(4),Q=h([]),b=Fe();b.query.id,b.query.serviceCaseId;const pe=b.query.orderId,W=b.query.status!=null?parseInt(b.query.status.toString(),0)+1:1;b.query.taskType;const N=h({taskid:b.query.id,serviceCaseNeoId:b.query.serviceCaseId,orderId:b.query.orderId,taskStatus:W,accountName:b.query.accountName,distributorName:b.query.distributorName,followerName:b.query.followerName,createdTime:b.query.createdTime,createdBy:b.query.createdBy}),f=h(W),x=h(1),k=h(1),X=h(1),ee=h();let p=P({fieldJobContactName:"",contactTelephone:"",priority:"",type:"配送派工",remark:"",appointmentStartTime:"",appointmentEndTime:"",haveInstallConditions:!1,field_job_order_id:b.query.orderId,fieldJobType__c:0,stage__c:0,name:N.value.accountName+"的配送派工单",fileList:[],filePath:[],followerId:1});const te=P({followerId:[{required:!0,message:"Please input username",trigger:"blur"}],fieldJobContactName:[{required:!0,message:"Please input username",trigger:"blur"}],contactTelephone:[{required:!0,message:"Please input phone",trigger:"blur"}],priority:[{required:!0,message:"Please input priority",trigger:"blur"}],appointmentStartTime:[{required:!0,message:"Please input appointment start time",trigger:"blur"}],appointmentEndTime:[{required:!0,message:"Please input appointment end time",trigger:"blur"}]}),i=P({username:"",phone:"",remark:"",installationTeam:!1,priority:"",appointmentStartTime:"",appointmentEndTime:"",fileList:[],filePath:[],fieldJobContactName:""}),ae=P({username:[{required:!0,message:"Please input username",trigger:"blur"}],phone:[{required:!0,message:"Please input phone",trigger:"blur"}],priority:[{required:!0,message:"Please input priority",trigger:"blur"}],appointmentStartTime:[{required:!0,message:"Please input appointment start time",trigger:"blur"}],appointmentEndTime:[{required:!0,message:"Please input appointment end time",trigger:"blur"}]}),T=P({orderNo:"",customerName:"",customerPhone:"",desc:"",fileList:[]}),ue=P({customerName:[{required:!0,message:"Please input customer name",trigger:"blur"}],customerPhone:[{required:!0,message:"Please input customer phone",trigger:"blur"}],desc:[{required:!0,message:"Please input problem description",trigger:"blur"}]}),S=h(!1),U=h(!1),q=h(!1),le=h({}),ce=h([{text1:"",text2:"GZ0111-03528-01",text3:"渠道",text4:"35",text5:"2024-02-01",text6:"2024-03-15",text7:"2024-02-01 10:30:50"}]),me=h([{text1:"",text2:"FH0111-03010-01",text3:"待发货",text4:"快递",text5:"",text6:"2024-02-21 10:30:50"}]),F=h([]),se=h({Content:"application/json",Authorization:"",isImage:"true",needFileId:"true","Trace-Id":""}),$=h({files:[],name:"files"}),J=n=>{x.value=n},B=n=>{k.value=n},_e=()=>{S.value=!0},fe=()=>{U.value=!0},ve=()=>{x.value=2},he=()=>{k.value=2},O=h([]),be=async()=>{console.log(i);let n={fieldJobContactName:i.fieldJobContactName,contactTelephone:i.phone,priority:i.priority,remark:i.remark,haveInstallConditions:!1,field_job_order_id:b.query.orderId,name:N.value.accountName+"的安装派工单",type:"安装派工",fieldJobType__c:1,stage__c:0,picture:i.filePath.join(";"),appointmentStartTime:i.appointmentStartTime,appointmentEndTime:i.appointmentEndTime,followerId:i.username};de(n).then(t=>{let o=t.data.data;F.value.push(o),o!=null?(D({message:"新增派工单成功",type:"success"}),U.value=!1,k.value=1,f.value=5,i.username="",i.phone="",i.remark="",i.priority="",i.appointmentStartTime="",i.appointmentEndTime="",i.fileList=[],i.filePath=[],i.fieldJobContactName="",i.contactTelephone=""):D({message:"新增派工单失败",type:"error"})}).catch(t=>{D({message:"请求新增派工单失败，请重试",type:"error"})})},ye=n=>{K.$router.push({path:"/dispatch_details",query:{id:n.id}})},ge=()=>{let n=p;n.picture=n.filePath.join(","),n.goods_picture__c=n.filePath.join(","),de(n).then(t=>{let o=t.data.data;F.value.push(o),o!=null?D({message:"新增派工单成功",type:"success"}):D({message:"新增派工单失败",type:"error"}),Object.keys(p).forEach(r=>{!r.includes("type")&&!r.includes("haveInstallConditions")&&r!=="field_job_order_id"&&r!=="fieldJobType__c"&&r!=="stage__c"&&r!=="name"&&(p[r]=""),r==="haveInstallConditions"&&(p[r]=!1),(r=="fileList"||r=="filePath")&&(p[r]=[])})}).catch(t=>{D({message:"请求新增派工单失败，请重试",type:"error"}),Object.keys(p).forEach(o=>{o!=="type"&&o!=="haveInstallConditions"&&o!=="field_job_order_id"&&o!=="fieldJobType__c"&&o!=="stage__c"&&o!=="name"&&(p[o]=""),o=="haveInstallConditions"&&(p[o]=!1),(o=="fileList"||o=="filePath")&&(p[o]=[])}),console.error("请求新增派工单失败:",t)}),S.value=!1,x.value=1,f.value=5},Ve=()=>{q.value=!0},xe=()=>{q.value=!1,K.$message.success("提交成功!")},ke=()=>{je.prompt("请填写评论内容","发起评论",{inputPattern:/\S/,inputErrorMessage:"评论内容不能为空!",confirmButtonText:"确认",cancelButtonText:"取消"}).then(({value:n})=>{Q.value.push({userName:"经销商",text:n,date:new Date().toLocaleString()})}).catch(()=>{})};Je(()=>{Ie(!1,pe),De(!1)});const Ce=n=>{if(console.log(n),n.code=="success"){let t=n.data.map(o=>o.fileUrl);p.filePath=p.filePath.concat(t)}},Te=n=>{n.response},we=n=>{$.value.files.push(n)},Ie=(n,t)=>{Ae(t).then(o=>{let r=o.data.data;r!=null?(le.value=r,n&&D({message:"查询成功",type:"success"})):n&&D({message:"获取数据失败",type:"error"})})},De=n=>{Ge({userType:1,name:"",phone:""}).then(o=>{let r=o.data.data;r!=null&&r.length>0?(O.value=r,n&&D({message:"查询成功",type:"success"})):n&&D({message:"获取数据失败",type:"error"})})},Ne=n=>{if(console.log(n),n.code=="success"){let t=n.data.map(o=>o.fileUrl);i.filePath=i.filePath.concat(t)}},Pe=n=>{n.response},Se=n=>{$.value.files.push(n)},Ue=n=>{let t=O.value.find(o=>o.id==n);t&&(i.fieldJobContactName=t.name)},qe=n=>{let t=O.value.find(o=>o.id==n);t&&(p.fieldJobContactName=t.name)};return(n,t)=>{const o=C("el-button"),r=C("el-table-column"),j=C("el-table"),w=C("el-input"),m=C("el-form-item"),oe=C("el-option"),ne=C("el-select"),R=C("el-date-picker"),ie=C("el-checkbox"),E=C("el-form"),M=C("el-icon"),H=C("el-upload"),z=C("el-dialog");return v(),L("div",Ze,[e("span",Ke,[Qe,e("span",We,[e("span",Xe,[e("span",{class:d(f.value==1?"num_selected":"num")},"1",2),e("span",{class:d(f.value>=1?"name_selected":"name")},"待处理",2)]),e("span",et,[e("span",{class:d(f.value==3?"num_selected":"num")},"2",2),e("span",{class:d(f.value>=3?"name_selected":"name")},"入库",2)]),e("span",tt,[e("span",{onClick:t[0]||(t[0]=l=>f.value=4),class:d(f.value==4?"num_selected":"num")},"3",2),e("span",{class:d(f.value>=4?"name_selected":"name")},"配送",2)]),e("span",at,[e("span",{class:d(f.value==5?"num_selected":"num")},"4",2),e("span",{class:d(f.value>=5?"name_selected":"name")},"安装",2)]),e("span",lt,[e("span",{class:d(f.value==6?"num_selected":"num")},"5",2),e("span",{class:d(f.value>=6?"name_selected":"name")},"完成",2)])])]),e("span",st,[e("span",ot,[c("任务详情 "),f.value>=5?(v(),y(o,{key:0,type:"primary",class:"primary_blue_btn"},{default:s(()=>[c("已派工配送")]),_:1})):g("",!0),f.value==6?(v(),y(o,{key:1,type:"primary",class:"primary_green_btn"},{default:s(()=>[c("已派工安装")]),_:1})):g("",!0)]),e("span",nt,[e("span",it,[e("span",rt,[dt,e("span",pt,I(N.value.taskid),1),g("",!0)]),e("span",ut,[ct,e("span",mt,I(N.value.distributorName),1)]),e("span",_t,[ft,e("span",vt,I(N.value.followerName),1)])]),e("span",ht,[e("span",bt,[yt,e("span",gt,I(N.value.accountName),1)]),e("span",Vt,[xt,e("span",kt,I(N.value.createdBy),1)]),e("span",Ct,[Tt,e("span",wt,I(N.value.createdTime),1)])]),e("span",It,[e("span",Dt,[Nt,e("span",Pt,I(le.value.contactTel),1)]),St])])]),e("span",Ut,[qt,e("span",Ot,[e("span",Et,[e("span",{class:d(V.value==1?"num_selected":"num")},"1",2),e("span",{class:d(V.value>=1?"name_selected":"name")},"...",2)]),e("span",Lt,[e("span",{class:d(V.value==2?"num_selected":"num")},"2",2),e("span",{class:d(V.value>=2?"name_selected":"name")},"已包装",2)]),e("span",Yt,[e("span",{class:d(V.value==3?"num_selected":"num")},"3",2),e("span",{class:d(V.value>=3?"name_selected":"name")},"已成品入库",2)]),e("span",$t,[e("span",{class:d(V.value==4?"num_selected":"num")},"4",2),e("span",{class:d(V.value>=4?"name_selected":"name")},"已发货",2)]),e("span",Rt,[e("span",{class:d(V.value==5?"num_selected":"num")},"5",2),e("span",{class:d(V.value>=5?"name_selected":"name")},"已经销商收货",2)]),e("span",Ft,[e("span",{class:d(V.value==6?"num_selected":"num")},"6",2),e("span",{class:d(f.value>=6?"name_selected":"name")},"订单完结",2)]),e("span",Jt,[e("span",{class:d(V.value==7?"num_selected":"num")},"7",2),e("span",{class:d(f.value>=7?"name_selected":"name")},"...",2)])])]),e("span",Bt,[jt,e("span",Mt,[a(j,{data:ce.value,stripe:!1,style:{width:"100%"}},{default:s(()=>[a(r,{prop:"text1",label:"操作",width:"80px"},{default:s(l=>[e("div",{style:{display:"flex","align-items":"center",color:"#165dff",cursor:"pointer"},onClick:re=>console.log(l)}," 查看 ",8,Ht)]),_:1}),a(r,{prop:"text2",label:"订单编号"}),a(r,{prop:"text3",label:"订单流程"}),a(r,{prop:"text4",label:"交期天数"}),a(r,{prop:"text5",label:"订货日期"}),a(r,{prop:"text6",label:"计划交货日期"}),a(r,{prop:"text7",label:"创建时间"})]),_:1},8,["data"])])]),e("span",zt,[At,e("span",Gt,[a(j,{data:me.value,stripe:!1,style:{width:"100%"}},{default:s(()=>[a(r,{prop:"text1",label:"操作",width:"160px"},{default:s(l=>[e("div",{style:{display:"flex","align-items":"center",color:"#165dff",cursor:"pointer"},onClick:re=>console.log(l)},[Kt,c("  "),Qt],8,Zt)]),_:1}),a(r,{prop:"text2",label:"发货单编号"}),a(r,{prop:"text3",label:"发货单状态"}),a(r,{prop:"text4",label:"出库方式"}),a(r,{prop:"text5",label:"供应基地"}),a(r,{prop:"text6",label:"创建时间"})]),_:1},8,["data"])])]),e("span",Wt,[Xt,e("span",ea,[a(j,{data:F.value,stripe:!1,style:{width:"100%"}},{default:s(()=>[a(r,{prop:"view",label:"操作",width:"160px"},{default:s(l=>[e("div",ta,[e("span",{onClick:re=>ye(l.row)},"查看",8,aa)])]),_:1}),a(r,{prop:"id",label:"派工单编号"}),a(r,{prop:"stage__c",label:"状态"},{default:s(l=>[e("span",null,I(l.row.stage__c=="0"?"待开始":l.row.stage__c=="1"?"进行中":"已完成"),1)]),_:1}),a(r,{prop:"appointmentStartTime",label:"计划开始时间"}),a(r,{prop:"appointmentEndTime",label:"计划结束时间"}),a(r,{prop:"createTime",label:"创建时间"})]),_:1},8,["data"])])]),e("div",la,[e("div",{class:"left"},[sa,e("span",{class:"initiate_comments",onClick:ke},"发起评论")]),e("div",oa,[f.value==4?(v(),y(o,{key:0,type:"primary",onClick:_e,class:"primary_btn"},{default:s(()=>[c("创建配送派工单")]),_:1})):g("",!0),f.value==4?(v(),y(o,{key:1,type:"primary",onClick:t[1]||(t[1]=l=>{f.value=5,V.value=5}),class:"primary_btn"},{default:s(()=>[c("一键跳过配送")]),_:1})):g("",!0),f.value==5?(v(),y(o,{key:2,type:"primary",onClick:fe,class:"primary_btn"},{default:s(()=>[c("创建安装派工单")]),_:1})):g("",!0),a(o,{type:"primary",onClick:Ve,class:"primary_btn"},{default:s(()=>[c("问题提报")]),_:1})])]),(v(!0),L(A,null,G(Q.value,l=>(v(),L("div",{class:"comment",key:l.date},[e("div",na,[ia,e("span",ra,I(l.userName),1)]),e("div",da,I(l.text),1),e("div",pa,I(l.date),1),ua,ca]))),128)),e("div",ma,[a(z,{modelValue:S.value,"onUpdate:modelValue":t[15]||(t[15]=l=>S.value=l),title:"新建配送派工单",width:"80%","show-close":!1},{footer:s(()=>[e("div",xa,[a(o,{class:"cancel_btn",onClick:t[14]||(t[14]=l=>S.value=!1)},{default:s(()=>[c("取消")]),_:1}),x.value==1?(v(),y(o,{key:0,type:"primary",class:"primary_btn",onClick:ve},{default:s(()=>[c("下一步")]),_:1})):g("",!0),x.value==2?(v(),y(o,{key:1,type:"primary",class:"primary_btn",onClick:ge},{default:s(()=>[c("完成")]),_:1})):g("",!0)])]),default:s(()=>[e("div",_a,[e("span",fa,[e("span",{onClick:t[2]||(t[2]=l=>J(1)),class:d(x.value==1?"num_selected":"num")},"1",2),e("span",{class:d(x.value>=1?"name_selected":"name")},[c("选择配送司机 "),va],2)]),e("span",ha,[e("span",{onClick:t[3]||(t[3]=l=>J(2)),class:d(x.value==2?"num_selected":"num")},"2",2),e("span",{class:d(x.value>=2?"name_selected":"name")},[c("输入派工单注意事项 "),ba],2)]),e("span",ya,[e("span",{onClick:t[4]||(t[4]=l=>J(3)),class:d(x.value==3?"num_selected":"num")},"3",2),e("span",{class:d(x.value>=3?"name_selected":"name")},[c("完成创建 "),ga],2)])]),e("div",Va,[x.value==1?(v(),y(E,{key:0,model:_(p),rules:te,ref_key:"deliveryOrderFormRef",ref:ee,"label-width":"90px","label-position":"left"},{default:s(()=>[a(m,{label:"联系方式",prop:"contactTelephone"},{default:s(()=>[a(w,{modelValue:_(p).contactTelephone,"onUpdate:modelValue":t[5]||(t[5]=l=>_(p).contactTelephone=l),placeholder:"查找或输入配送司机手机号码"},null,8,["modelValue"])]),_:1}),a(m,{label:"人员名称",prop:"followerId"},{default:s(()=>[a(ne,{modelValue:_(p).followerId,"onUpdate:modelValue":t[6]||(t[6]=l=>_(p).followerId=l),onChange:qe,placeholder:"查找或输入服务人员姓名"},{default:s(()=>[(v(!0),L(A,null,G(O.value,l=>(v(),y(oe,{key:l.name,label:l.name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(m,{label:"预约开始",prop:"appointmentStartTime"},{default:s(()=>[a(R,{modelValue:_(p).appointmentStartTime,"onUpdate:modelValue":t[7]||(t[7]=l=>_(p).appointmentStartTime=l),type:"datetime",placeholder:"日期/时间","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue"])]),_:1}),a(m,{label:"预约结束",prop:"appointmentEndTime"},{default:s(()=>[a(R,{modelValue:_(p).appointmentEndTime,"onUpdate:modelValue":t[8]||(t[8]=l=>_(p).appointmentEndTime=l),type:"datetime",placeholder:"日期/时间","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue"])]),_:1}),a(m,{label:"是否具备安装条件",class:"check_item"},{default:s(()=>[e("span",null,[a(ie,{modelValue:_(p).haveInstallConditions,"onUpdate:modelValue":t[9]||(t[9]=l=>_(p).haveInstallConditions=l)},null,8,["modelValue"])])]),_:1})]),_:1},8,["model","rules"])):g("",!0),x.value==2?(v(),y(E,{key:1,model:_(p),rules:te,ref_key:"deliveryOrderFormRef",ref:ee,"label-width":"90px","label-position":"left"},{default:s(()=>[a(m,{label:"优先级",prop:"priority"},{default:s(()=>[a(w,{placeholder:"1-最高 2-高 3-中 4-低",modelValue:_(p).priority,"onUpdate:modelValue":t[10]||(t[10]=l=>_(p).priority=l)},null,8,["modelValue"])]),_:1}),a(m,{label:"派工类型",prop:"type"},{default:s(()=>[a(w,{disabled:"",placeholder:"配送派工",modelValue:_(p).type,"onUpdate:modelValue":t[11]||(t[11]=l=>_(p).type=l)},null,8,["modelValue"])]),_:1}),a(m,{label:"派工单备注",class:"customLayout"},{default:s(()=>[a(w,{modelValue:_(p).remark,"onUpdate:modelValue":t[12]||(t[12]=l=>_(p).remark=l),rows:5,type:"textarea",maxlength:"500",placeholder:"请填写派工单备注","show-word-limit":""},null,8,["modelValue"])]),_:1}),a(m,{label:"上传图片",class:"custom_upload"},{default:s(()=>[a(H,{"on-success":Ce,"on-remove":Te,"auto-upload":!0,data:$.value,headers:se.value,"before-upload":we,"file-list":_(p).fileList,"onUpdate:fileList":t[13]||(t[13]=l=>_(p).fileList=l),class:"avatar-uploader",action:"https://sh.mengtian.com.cn:9595/md/api/common/file/upload","show-file-list":!0,"list-type":"picture-card"},{default:s(()=>[a(M,{class:"avatar-uploader-icon"},{default:s(()=>[a(_(Z))]),_:1})]),_:1},8,["data","headers","file-list"])]),_:1})]),_:1},8,["model","rules"])):g("",!0)])]),_:1},8,["modelValue"])]),e("div",ka,[a(z,{modelValue:U.value,"onUpdate:modelValue":t[27]||(t[27]=l=>U.value=l),title:"新建安装派工单",width:"80%","show-close":!1},{footer:s(()=>[e("div",Oa,[a(o,{class:"cancel_btn",onClick:t[26]||(t[26]=l=>U.value=!1)},{default:s(()=>[c("取消")]),_:1}),k.value==1?(v(),y(o,{key:0,type:"primary",class:"primary_btn",onClick:he},{default:s(()=>[c("下一步")]),_:1})):g("",!0),k.value==2?(v(),y(o,{key:1,type:"primary",class:"primary_btn",onClick:be},{default:s(()=>[c("完成")]),_:1})):g("",!0)])]),default:s(()=>[e("div",Ca,[e("span",Ta,[e("span",{onClick:t[16]||(t[16]=l=>B(1)),class:d(k.value==1?"num_selected":"num")},"1",2),e("span",{class:d(k.value>=1?"name_selected":"name")},[c("选择安装技工 "),wa],2)]),e("span",Ia,[e("span",{onClick:t[17]||(t[17]=l=>B(2)),class:d(k.value==2?"num_selected":"num")},"2",2),e("span",{class:d(k.value>=2?"name_selected":"name")},[c("输入安装派工单注意事项 "),Da],2)]),e("span",Na,[e("span",{onClick:t[18]||(t[18]=l=>B(3)),class:d(k.value==3?"num_selected":"num")},"3",2),e("span",{class:d(k.value>=3?"name_selected":"name")},[c("完成创建 "),Pa],2)])]),e("div",Sa,[k.value==1?(v(),y(E,{key:0,model:i,rules:ae,"label-width":"80px","label-position":"left"},{default:s(()=>[a(m,{label:"联系方式",prop:"phone"},{default:s(()=>[a(w,{placeholder:"输入联系方式",modelValue:i.phone,"onUpdate:modelValue":t[19]||(t[19]=l=>i.phone=l)},null,8,["modelValue"])]),_:1}),a(m,{label:"人员名称",prop:"username"},{default:s(()=>[a(ne,{modelValue:i.username,"onUpdate:modelValue":t[20]||(t[20]=l=>i.username=l),onChange:Ue,placeholder:"查找或输入服务人员姓名"},{default:s(()=>[(v(!0),L(A,null,G(O.value,l=>(v(),y(oe,{key:l.name,label:l.name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(m,{label:"预约开始",prop:"appointmentStartTime"},{default:s(()=>[a(R,{modelValue:i.appointmentStartTime,"onUpdate:modelValue":t[21]||(t[21]=l=>i.appointmentStartTime=l),type:"datetime",placeholder:"日期/时间","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue"])]),_:1}),a(m,{label:"预约结束",prop:"appointmentEndTime"},{default:s(()=>[a(R,{modelValue:i.appointmentEndTime,"onUpdate:modelValue":t[22]||(t[22]=l=>i.appointmentEndTime=l),type:"datetime",placeholder:"日期/时间","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue"])]),_:1}),a(m,{label:"安装小组"},{default:s(()=>[e("span",Ua,[a(ie,{modelValue:i.installationTeam,"onUpdate:modelValue":t[23]||(t[23]=l=>i.installationTeam=l)},null,8,["modelValue"])])]),_:1}),i.installationTeam?(v(),y(m,{key:0,label:"添加组员"},{default:s(()=>[qa]),_:1})):g("",!0)]),_:1},8,["model","rules"])):g("",!0),k.value==2?(v(),y(E,{key:1,model:i,rules:ae,"label-width":"90px","label-position":"left"},{default:s(()=>[a(m,{label:"优先级",prop:"priority"},{default:s(()=>[a(w,{modelValue:i.priority,"onUpdate:modelValue":t[24]||(t[24]=l=>i.priority=l),placeholder:"1-最高 2-高 3-中 4-低"},null,8,["modelValue"])]),_:1}),a(m,{label:"派工单备注",class:"customLayout"},{default:s(()=>[a(w,{modelValue:i.remark,"onUpdate:modelValue":t[25]||(t[25]=l=>i.remark=l),rows:5,type:"textarea",maxlength:"500",placeholder:"请填写派工单备注","show-word-limit":""},null,8,["modelValue"])]),_:1}),a(m,{label:"上传图片",class:"custom_upload"},{default:s(()=>[a(H,{"on-success":Ne,"on-remove":Pe,"auto-upload":!0,data:$.value,headers:se.value,"before-upload":Se,"file-list":i.fileList,"list-type":"picture-card",class:"avatar-uploader",action:"https://sh.mengtian.com.cn:9595/md/api/common/file/upload","show-file-list":!0},{default:s(()=>[a(M,{class:"avatar-uploader-icon"},{default:s(()=>[a(_(Z))]),_:1})]),_:1},8,["data","headers","file-list"])]),_:1})]),_:1},8,["model","rules"])):g("",!0)])]),_:1},8,["modelValue"])]),e("div",Ea,[a(z,{modelValue:q.value,"onUpdate:modelValue":t[34]||(t[34]=l=>q.value=l),title:"问题提报",width:"80%","show-close":!1},{footer:s(()=>[e("div",Ba,[a(o,{class:"cancel_btn",onClick:t[33]||(t[33]=l=>q.value=!1)},{default:s(()=>[c("取消")]),_:1}),a(o,{type:"primary",class:"primary_btn",onClick:xe},{default:s(()=>[c("提交")]),_:1})])]),default:s(()=>[e("span",La,[e("span",Ya,[e("span",{class:d(X.value==1?"num_selected":"num")},"1",2),$a]),e("span",Ra,[e("span",{class:d(X.value==2?"num_selected":"num")},"2",2),Fa])]),e("div",Ja,[a(E,{model:T,rules:ue,"label-width":"90px","label-position":"left"},{default:s(()=>[a(m,{label:"订单编号",prop:"orderNo"},{default:s(()=>[a(w,{placeholder:"请选择订单编号",modelValue:T.orderNo,"onUpdate:modelValue":t[28]||(t[28]=l=>T.orderNo=l)},null,8,["modelValue"])]),_:1}),a(m,{label:"客户姓名",prop:"customerName"},{default:s(()=>[a(w,{placeholder:"请输入客户姓名",modelValue:T.customerName,"onUpdate:modelValue":t[29]||(t[29]=l=>T.customerName=l)},null,8,["modelValue"])]),_:1}),a(m,{label:"客户电话",prop:"customerPhone"},{default:s(()=>[a(w,{placeholder:"请输入客户电话",modelValue:T.customerPhone,"onUpdate:modelValue":t[30]||(t[30]=l=>T.customerPhone=l)},null,8,["modelValue"])]),_:1}),a(m,{label:"问题描述",class:"customLayout",prop:"desc"},{default:s(()=>[a(w,{modelValue:T.desc,"onUpdate:modelValue":t[31]||(t[31]=l=>T.desc=l),rows:5,type:"textarea",maxlength:"500",placeholder:"请输入问题描述","show-word-limit":""},null,8,["modelValue"])]),_:1}),a(m,{label:"上传图片",class:"custom_upload"},{default:s(()=>[a(H,{class:"avatar-uploader",action:"https://sh.mengtian.com.cn:9595/md/api/common/file/upload","show-file-list":!1,"file-list":T.fileList,"onUpdate:fileList":t[32]||(t[32]=l=>T.fileList=l)},{default:s(()=>[a(M,{class:"avatar-uploader-icon"},{default:s(()=>[a(_(Z))]),_:1})]),_:1},8,["file-list"])]),_:1})]),_:1},8,["model","rules"])])]),_:1},8,["modelValue"])])])}}}),Ga=ze(ja,[["__scopeId","data-v-78223fa3"]]);export{Ga as default};
