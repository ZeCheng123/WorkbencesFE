import{_ as et,a as tt,b as at}from"./tips-DfmWQaVF.js";import{_ as ne}from"./add-CRTT_dyr.js";import{d as lt,g as st,r as h,B as ot,a as $,o as nt,A as it,E as k,c as q,h as e,y as _,j as b,x as y,w as o,v as w,t as N,b as l,F as J,q as R,C as ye,e as P,p as rt,f as dt,i as f,u as v,z as oe,_ as ut}from"./index-DwwqDRnZ.js";import{f as ct,h as pt,i as mt,j as _t,k as ft,u as vt,n as ge,e as ht}from"./common-DNv9NPC-.js";import"./userinfo-B4NFwAcm.js";const u=z=>(rt("data-v-e4d37891"),z=z(),dt(),z),bt={class:"header"},yt=u(()=>e("span",{class:"title"},"任务状态",-1)),gt={class:"step"},Tt={class:"item"},Ct={class:"item"},Vt={class:"item"},kt={class:"item"},wt={class:"item"},Nt={class:"task_info"},Dt={class:"title"},xt={class:"main_field"},Pt={class:"row_field"},St={class:"field"},It=u(()=>e("span",{class:"label"},"任务编号：",-1)),Ot={class:"value"},qt={class:"field"},Et=u(()=>e("span",{class:"label"},"经销商：",-1)),Ut={class:"value"},Lt={class:"field"},$t=u(()=>e("span",{class:"label"},"经销商负责人：",-1)),Jt={class:"value"},Rt={class:"row_field"},Ft={class:"field"},Bt=u(()=>e("span",{class:"label"},"客户名称：",-1)),Yt={class:"value"},Ht={class:"field"},Mt=u(()=>e("span",{class:"label"},"当前负责人：",-1)),At={class:"value"},zt={class:"field"},jt=u(()=>e("span",{class:"label"},"创建时间：",-1)),Wt={class:"value"},Gt={class:"row_field"},Kt={class:"field"},Qt=u(()=>e("span",{class:"label"},"客户电话：",-1)),Xt={class:"value"},Zt={class:"field"},ea=u(()=>e("span",{class:"label"},"客户地址：",-1)),ta={class:"value"},aa=u(()=>e("span",{class:"field"},[e("span",{class:"label"}),e("span",{class:"value"})],-1)),la={class:"order_status"},sa=u(()=>e("span",{class:"title"},"订单状态",-1)),oa={class:"step"},na={class:"item"},ia={class:"related_item_order"},ra=u(()=>e("span",{class:"table_title"},"相关项>订单",-1)),da={class:"table_content"},ua=["onClick"],ca={class:"related_item_invoice"},pa=u(()=>e("span",{class:"table_title"},"相关项>包装清单",-1)),ma={class:"table_content"},_a=["onClick"],fa=u(()=>e("span",null,"查看",-1)),va=[fa],ha={class:"related_item_invoice"},ba=u(()=>e("span",{class:"table_title"},"相关项>派工单",-1)),ya={class:"table_content"},ga={style:{display:"flex","align-items":"center",color:"#165dff",cursor:"pointer"}},Ta=["onClick"],Ca={style:{color:"blue"}},Va={style:{display:"flex","align-items":"center"}},ka={class:"action_list"},wa=u(()=>e("img",{src:et,alt:""},null,-1)),Na={class:"right"},Da={class:"userinfo"},xa=u(()=>e("img",{src:tt,alt:""},null,-1)),Pa={class:"username"},Sa={class:"content"},Ia={class:"date"},Oa=u(()=>e("span",{class:"reply"},"回复",-1)),qa=u(()=>e("img",{class:"tips",src:at,alt:""},null,-1)),Ea={class:"deliveryOrderDialog"},Ua={class:"step"},La={class:"item"},$a=u(()=>e("span",{class:"remark"},"选择配送货品的司机",-1)),Ja={class:"item"},Ra=u(()=>e("span",{class:"remark"},"如有,请填写关键备注",-1)),Fa={class:"item"},Ba=u(()=>e("span",{class:"remark"},"等待司机配送",-1)),Ya={class:"content"},Ha=u(()=>e("img",{src:ne,alt:""},null,-1)),Ma=[Ha],Aa={class:"dialog-footer"},za={class:"installationOrderDialog"},ja={class:"step"},Wa={class:"item"},Ga=u(()=>e("span",{class:"remark"},"选择负责安装的技工",-1)),Ka={class:"item"},Qa=u(()=>e("span",{class:"remark"},"如有,请填写关键备注",-1)),Xa={class:"item"},Za=u(()=>e("span",{class:"remark"},"等待现场服务",-1)),el={class:"content"},tl=u(()=>e("img",{src:ne,alt:""},null,-1)),al=[tl],ll={style:{width:"300px"}},sl=u(()=>e("span",{class:"custom_item"},[e("img",{src:ne,alt:""})],-1)),ol={class:"dialog-footer"},nl={class:"problemReportingDialog"},il={class:"step"},rl={class:"item"},dl=u(()=>e("span",{class:"name"},[b("完善提报信息 "),e("span",{class:"remark"},"完善问题提报的信息")],-1)),ul={class:"item"},cl=u(()=>e("span",{class:"name"},[b("完成创建 "),e("span",{class:"remark"},"等待售服部处理")],-1)),pl={class:"content"},ml={class:"dialog-footer"},_l=lt({__name:"index",setup(z){const{proxy:E}=st(),ie=h(4),re=h([]),j=new Date,C=ot();C.query.id;const Te=C.query.orderId,de=C.query.status!=null?parseInt(C.query.status.toString(),0)+1:1;C.query.taskType;const I=C.query.mergedOrderNo,U=h({taskid:C.query.id,orderId:C.query.orderId,taskStatus:de,accountName:C.query.accountName,distributorName:C.query.distributorName,followerName:C.query.followerName,createdTime:C.query.createdTime,createdBy:C.query.createdBy}),Ce=h([{code:"0",name:"配送派工单"},{code:"1",name:"安装派工单"},{code:"2",name:"维修派工单"}]),g=h(de),D=h(1),x=h(1),ue=h(1),ce=h(),pe=h([{code:"1",name:"最高级"},{code:"2",name:"高"},{code:"3",name:"中"},{code:"4",name:"低"}]);let d=$({fieldJobContactName:"",contactTelephone:"",priority:"",type:"配送派工",remark:"",appointmentStartTime:"",appointmentEndTime:"",haveInstallConditions:!1,fieldJobOrderId:C.query.orderId,fieldJobType__c:0,stage__c:0,name:U.value.accountName+"的配送派工单",fileList:[],filePath:[],followerId:null,address:""});const me=$({followerId:[{required:!0,message:"Please input username",trigger:"blur"}],fieldJobContactName:[{required:!0,message:"Please input username",trigger:"blur"}],contactTelephone:[{required:!0,message:"Please input phone",trigger:"blur"}],priority:[{required:!0,message:"Please input priority",trigger:"blur"}],appointmentStartTime:[{required:!0,message:"Please input appointment start time",trigger:"blur"}],appointmentEndTime:[{required:!0,message:"Please input appointment end time",trigger:"blur"}]}),r=$({username:"",phone:"",remark:"",installationTeam:!1,priority:"",appointmentStartTime:"",appointmentEndTime:"",fileList:[],filePath:[],fieldJobContactName:""}),_e=$({username:[{required:!0,message:"Please input username",trigger:"blur"}],phone:[{required:!0,message:"Please input phone",trigger:"blur"}],priority:[{required:!0,message:"Please input priority",trigger:"blur"}],appointmentStartTime:[{required:!0,message:"Please input appointment start time",trigger:"blur"}],appointmentEndTime:[{required:!0,message:"Please input appointment end time",trigger:"blur"}]}),c=h({}),p=$({orderNo:"",customerName:"",customerPhone:"",desc:"",fileList:[],filePath:[]}),Ve=$({customerName:[{required:!0,message:"Please input customer name",trigger:"blur"}],customerPhone:[{required:!0,message:"Please input customer phone",trigger:"blur"}],desc:[{required:!0,message:"Please input problem description",trigger:"blur"}]}),F=h(!1),B=h(!1),Y=h(!1),Q=h([]),fe=h([]),W=h([]),H=h(null),X=h({Content:"application/json",Authorization:"",isImage:"true",needFileId:"true","Trace-Id":""}),ve=h({files:[],name:"files"}),ke=h({files:[],name:"files"}),Z=h({files:[],name:"files"}),ee=s=>{D.value=s},te=s=>{x.value=s},we=()=>{F.value=!0},Ne=()=>{B.value=!0},De=()=>{D.value=2},xe=()=>{x.value=2},L=h([]),Pe=async()=>{console.log(r);let s={fieldJobContactName:c.value.accountName__C==null?"":c.value.accountName__C,contactTelephone:c.value.contactTel==null?"":c.value.contactTel,priority:r.priority,remark:r.remark,haveInstallConditions:!1,fieldJobOrderId:c.value.neoid,orderNo__c:c.value.po,mergedOrderNo:I??"",name:c.value.accountName__C+"的安装派工单",type:"安装派工",fieldJobType__c:1,stage__c:0,docPicture:r.filePath,appointmentStartTime:r.appointmentStartTime,appointmentEndTime:r.appointmentEndTime,followerId:r.username,address:c.value.customerAddress==null?"":c.value.customerAddress,status:1,source__c:1};ge(s).then(t=>{let n=t.data.data;W.value.push(n),n!=null?(k({message:"新增派工单成功",type:"success"}),B.value=!1,x.value=1,g.value=5,r.username="",r.phone="",r.remark="",r.priority="",r.appointmentStartTime="",r.appointmentEndTime="",r.fileList=[],r.filePath=[],r.fieldJobContactName="",r.contactTelephone=""):k({message:"新增派工单失败",type:"error"})}).catch(t=>{k({message:"请求新增派工单失败，请重试",type:"error"})})},Se=s=>{E.$router.push({path:"/dispatch_details",query:{id:s.id}})},Ie=s=>{E.$router.push({path:"/historical_orders_details",query:{id:s.id,po:s.po,status_c:s.status_c}})},Oe=()=>{let s=d;s.fieldJobContactName=c.value.accountName__C==null?"":c.value.accountName__C.toString(),s.contactTelephone=c.value.contactTel==null?"":c.value.contactTel.toString(),s.address=c.value.customerAddress==null?"":c.value.customerAddress,s.picture=s.filePath,s.goodsPicture=s.filePath,s.name=c.value.accountName__C+"的配送派工单",s.status=1,s.orderNo__c=c.value.po,s.source__c=1,s.fieldJobOrderId=c.value.neoid,s.mergedOrderNo=I??"",ge(s).then(t=>{let n=t.data.data;W.value.push(n),n!=null?k({message:"新增派工单成功",type:"success"}):k({message:"新增派工单失败",type:"error"}),Object.keys(d).forEach(i=>{!i.includes("type")&&!i.includes("haveInstallConditions")&&i!=="fieldJobOrderId"&&i!=="fieldJobType__c"&&i!=="stage__c"&&i!=="name"&&(d[i]=""),i==="haveInstallConditions"&&(d[i]=!1),(i=="fileList"||i=="filePath")&&(d[i]=[])})}).catch(t=>{k({message:"请求新增派工单失败，请重试",type:"error"}),Object.keys(d).forEach(n=>{n!=="type"&&n!=="haveInstallConditions"&&n!=="fieldJobOrderId"&&n!=="fieldJobType__c"&&n!=="stage__c"&&n!=="name"&&(d[n]=""),n=="haveInstallConditions"&&(d[n]=!1),(n=="fileList"||n=="filePath")&&(d[n]=[])}),console.error("请求新增派工单失败:",t)}),F.value=!1,D.value=1},qe=()=>{Y.value=!0},Ee=()=>{console.log("problemReportingForm",p);for(let t in p)if(t!="orderNo"&&t!="fileList"&&t!="filePath"&&p[t]==""){E.$message.error("必填字段不能为空!");return}let s={orderNeoId:c.value.neoid,customerName:p.customerName,phone:p.customerPhone,problemDescription:p.desc,picture:p.filePath,caseStatus:"1",questionType:1,complaintSourceC:4,caseSource:11,clientCaseStatusC:1};ht(s).then(t=>{let n=t.data;n.code=="success"?(p.orderNo="",p.customerName="",p.customerPhone="",p.desc="",p.fileList=[],p.filePath=[],Y.value=!1,E.$message.success("提交成功!")):E.$message.error(n==null?void 0:n.message)})},Ue=()=>{ye.prompt("请填写评论内容","发起评论",{inputPattern:/\S/,inputErrorMessage:"评论内容不能为空!",confirmButtonText:"确认",cancelButtonText:"取消"}).then(({value:s})=>{re.value.push({userName:"经销商",text:s,date:new Date().toLocaleString()})}).catch(()=>{})};nt(()=>{Re(!1,Te),Be(!1);const s="100%"/"100%";if(window.addEventListener("resize",it.debounce(function(){const n=document.body.clientHeight,i=document.body.clientWidth;if(i<1680){const T=n/i;let[S,O]=[0,0];if(T<s){S=n/1080;const m=1920*S,V=i-m;O=V>0?`translate(${V/2}px, 0)`:""}else{S=(i-20)/1920;const m=1080*S,V=n-m;O=V>0?`translate(0, ${V/2}px)`:""}H.value&&(H.value.style.height=`calc(${document.body.clientHeight/S}px - ${40*S}px - 10px)`)}else H.value&&(H.value.style.height=`calc(${document.body.clientHeight}px - 40px)`)},0)),document.createEvent){var t=document.createEvent("HTMLEvents");t.initEvent("resize",!0,!0),window.dispatchEvent(t)}else typeof Event=="function"&&window.dispatchEvent(new Event("resize"))});const Le=s=>{if(console.log(s),s.code=="success"){let t=s.data.map(n=>n.fileId);t[0]&&d.filePath.push(t[0])}},$e=s=>{s.response},Je=s=>{ve.value.files=[s]},Re=(s,t)=>{if(ct(t).then(n=>{let i=n.data.data;i!=null?(c.value=i,p.orderNo=c.value.po,Fe(!1,c.value.neoid),I&&I!=""?he(!1,I):(he(!1,c.value.po),Q.value.push(i)),s&&k({message:"查询成功",type:"success"})):s&&k({message:"获取数据失败",type:"error"})}),I&&I!=""){let n={orderNo:I.toString().split(";")};pt(n).then(i=>{let T=i.data.data;T!=null&&(console.log("orderlist:",T),Q.value=T)})}},Fe=(s,t)=>{if(t==null)return;mt({fieldJobOrderId:t}).then(i=>{let T=i.data.data;T!=null?(W.value=T,s&&k({message:"查询成功",type:"success"})):s&&k({message:"获取数据失败",type:"error"})})},he=(s,t)=>{if(t==null)return;let n={orderNo:t.split(";")};_t(n).then(i=>{let T=i.data.data;T!=null?(fe.value=T,s&&k({message:"查询成功",type:"success"})):s&&k({message:"获取数据失败",type:"error"})})},Be=s=>{ft({userType:1,name:"",phone:""}).then(n=>{let i=n.data.data;i!=null&&i.length>0?(L.value=i,s&&k({message:"查询成功",type:"success"})):s&&k({message:"获取数据失败",type:"error"})})},Ye=s=>{if(console.log(s),s.code=="success"){let t=s.data.map(n=>n.fileId);t[0]&&r.filePath.push(t[0])}},He=s=>{s.response},Me=s=>{Z.value.files=[s]},Ae=s=>{if(console.log(s),s.code=="success"){let t=s.data.map(n=>n.fileId);t[0]&&p.filePath.push(t[0])}},ze=s=>{s.response},je=s=>{Z.value.files=[s]},We=s=>{let t=L.value.find(n=>n.id==s);t&&(r.fieldJobContactName=t.name,r.phone=t.phone)},Ge=s=>{let t=L.value.find(n=>n.id==s);t&&(d.fieldJobContactName=t.name,d.contactTelephone=t.phone)},Ke=s=>{let t=L.value.find(n=>n.id==s);t&&(p.customerName=t.name,p.customerPhone=t.phone)},Qe=()=>{if(g.value>=4){E.$message.warning("配送已完成，无法点击配送");return}ye.confirm("确认到货后，再进行派单?","配送",{confirmButtonText:"是",cancelButtonText:"否",type:"warning"}).then(()=>{let s={id:U.value.taskid,status:3};vt(s).then(t=>{(t.data.code="success")&&(g.value=4)})}).catch(()=>{})},G=s=>s.getTime()<Date.now()-24*60*60*1e3,be=()=>{E.$router.push("my_personnel")};return(s,t)=>{const n=P("el-button"),i=P("el-table-column"),T=P("el-table"),S=P("el-option"),O=P("el-select"),m=P("el-form-item"),V=P("el-input"),K=P("el-date-picker"),M=P("el-form"),ae=P("el-icon"),le=P("el-upload"),se=P("el-dialog"),Xe=P("el-checkbox");return f(),q("div",{ref_key:"mainRef",ref:H,class:"main"},[e("span",bt,[yt,e("span",gt,[e("span",Tt,[e("span",{class:_(g.value==1?"num_selected":"num")},"1",2),e("span",{class:_(g.value>=1?"name_selected":"name")},"待处理",2)]),e("span",Ct,[e("span",{class:_(g.value==3?"num_selected":"num")},"2",2),e("span",{class:_(g.value>=3?"name_selected":"name")},"入库",2)]),e("span",Vt,[e("span",{onClick:Qe,class:_(g.value==4?"num_selected":"num")},"3",2),e("span",{class:_(g.value>=4?"name_selected":"name")},"配送",2)]),e("span",kt,[e("span",{class:_(g.value==5?"num_selected":"num")},"4",2),e("span",{class:_(g.value>=5?"name_selected":"name")},"安装",2)]),e("span",wt,[e("span",{class:_(g.value==6?"num_selected":"num")},"5",2),e("span",{class:_(g.value>=6?"name_selected":"name")},"完成",2)])])]),e("span",Nt,[e("span",Dt,[b("任务详情 "),g.value>=5?(f(),y(n,{key:0,type:"primary",class:"primary_blue_btn"},{default:o(()=>[b("已派工配送")]),_:1})):w("",!0),g.value==6?(f(),y(n,{key:1,type:"primary",class:"primary_green_btn"},{default:o(()=>[b("已派工安装")]),_:1})):w("",!0)]),e("span",xt,[e("span",Pt,[e("span",St,[It,e("span",Ot,N(U.value.taskid),1),w("",!0)]),e("span",qt,[Et,e("span",Ut,N(U.value.distributorName),1)]),e("span",Lt,[$t,e("span",Jt,N(U.value.followerName),1)])]),e("span",Rt,[e("span",Ft,[Bt,e("span",Yt,N(c.value.accountName__C),1)]),e("span",Ht,[Mt,e("span",At,N(U.value.createdBy),1)]),e("span",zt,[jt,e("span",Wt,N(U.value.createdTime),1)])]),e("span",Gt,[e("span",Kt,[Qt,e("span",Xt,N(c.value.contactTel),1)]),e("span",Zt,[ea,e("span",ta,N(c.value.customerAddress),1)]),aa])])]),e("span",la,[sa,e("span",oa,[e("span",na,[e("span",{class:_(ie.value==1?"num_selected":"num")},"1",2),e("span",{class:_(ie.value>=1?"name_selected":"name")},N(c.value.status__c),3)])])]),e("span",ia,[ra,e("span",da,[l(T,{data:Q.value,stripe:!1,style:{width:"100%"},"max-height":"115"},{default:o(()=>[l(i,{prop:"id",label:"操作",width:"80px"},{default:o(a=>[e("div",{style:{display:"flex","align-items":"center",color:"#165dff",cursor:"pointer"},onClick:A=>Ie(a.row)}," 查看 ",8,ua)]),_:1}),l(i,{prop:"po",label:"订单编号"}),l(i,{prop:"orderFlow",label:"订单流程"}),l(i,{prop:"estimatedDeliveryDays",label:"交期天数"}),l(i,{prop:"orderDate",label:"订货日期"}),l(i,{prop:"planedDeliveryDate",label:"计划交货日期"}),l(i,{prop:"createdTime",label:"创建时间"})]),_:1},8,["data"])])]),e("span",ca,[pa,e("span",ma,[l(T,{data:fe.value,stripe:!1,style:{width:"100%"},"max-height":"115"},{default:o(()=>[l(i,{prop:"id",label:"操作",width:"160px"},{default:o(a=>[e("div",{style:{display:"flex","align-items":"center",color:"#165dff",cursor:"pointer"},onClick:A=>console.log(a)},va,8,_a)]),_:1}),l(i,{prop:"name",label:"发货单编号"}),l(i,{prop:"status",label:"发货单状态"}),l(i,{prop:"shipVia",label:"出库方式"}),l(i,{prop:"shipCarrier",label:"供应基地"}),l(i,{prop:"createdTime",label:"创建时间"})]),_:1},8,["data"])])]),e("span",ha,[ba,e("span",ya,[l(T,{data:W.value,stripe:!1,style:{width:"100%"},"max-height":"115"},{default:o(()=>[l(i,{prop:"view",label:"操作",width:"160px"},{default:o(a=>[e("div",ga,[e("span",{onClick:A=>Se(a.row)},"查看",8,Ta)])]),_:1}),l(i,{prop:"caseNo",label:"派工单编号"}),l(i,{prop:"stage__c",label:"状态"},{default:o(a=>[e("span",Ca,N(a.row.stage__c=="0"?"待开始":a.row.stage__c=="1"?"进行中":"已完成"),1)]),_:1}),l(i,{prop:"fieldJobType__c",label:"派工种类"},{default:o(a=>{var A;return[e("div",Va,N(a.row.fieldJobType__c?(A=Ce.value.find(Ze=>Ze.code==a.row.fieldJobType__c))==null?void 0:A.name:"配送派工单"),1)]}),_:1}),l(i,{prop:"appointmentStartTime",label:"计划开始时间"}),l(i,{prop:"appointmentEndTime",label:"计划结束时间"}),l(i,{prop:"createdTime",label:"创建时间"})]),_:1},8,["data"])])]),e("div",ka,[e("div",{class:"left"},[wa,e("span",{class:"initiate_comments",onClick:Ue},"发起评论")]),e("div",Na,[g.value==4?(f(),y(n,{key:0,type:"primary",onClick:we,class:"primary_btn"},{default:o(()=>[b("创建配送派工单")]),_:1})):w("",!0),g.value==5?(f(),y(n,{key:1,type:"primary",onClick:Ne,class:"primary_btn"},{default:o(()=>[b("创建安装派工单")]),_:1})):w("",!0),l(n,{type:"primary",onClick:qe,class:"primary_btn"},{default:o(()=>[b("问题提报")]),_:1})])]),(f(!0),q(J,null,R(re.value,a=>(f(),q("div",{class:"comment",key:a.date},[e("div",Da,[xa,e("span",Pa,N(a.userName),1)]),e("div",Sa,N(a.text),1),e("div",Ia,N(a.date),1),Oa,qa]))),128)),e("div",Ea,[l(se,{modelValue:F.value,"onUpdate:modelValue":t[12]||(t[12]=a=>F.value=a),title:"新建配送派工单",width:"80%","show-close":!1},{footer:o(()=>[e("div",Aa,[l(n,{class:"cancel_btn",onClick:t[11]||(t[11]=a=>F.value=!1)},{default:o(()=>[b("取消")]),_:1}),D.value==1?(f(),y(n,{key:0,type:"primary",class:"primary_btn",onClick:De},{default:o(()=>[b("下一步")]),_:1})):w("",!0),D.value==2?(f(),y(n,{key:1,type:"primary",class:"primary_btn",onClick:Oe},{default:o(()=>[b("完成")]),_:1})):w("",!0)])]),default:o(()=>[e("div",Ua,[e("span",La,[e("span",{onClick:t[0]||(t[0]=a=>ee(1)),class:_(D.value==1?"num_selected":"num")},"1",2),e("span",{class:_(D.value>=1?"name_selected":"name")},[b("选择配送司机 "),$a],2)]),e("span",Ja,[e("span",{onClick:t[1]||(t[1]=a=>ee(2)),class:_(D.value==2?"num_selected":"num")},"2",2),e("span",{class:_(D.value>=2?"name_selected":"name")},[b("输入派工单注意事项 "),Ra],2)]),e("span",Fa,[e("span",{onClick:t[2]||(t[2]=a=>ee(3)),class:_(D.value==3?"num_selected":"num")},"3",2),e("span",{class:_(D.value>=3?"name_selected":"name")},[b("完成创建 "),Ba],2)])]),e("div",Ya,[D.value==1?(f(),y(M,{key:0,model:v(d),rules:me,ref_key:"deliveryOrderFormRef",ref:ce,"label-width":"90px","label-position":"left"},{default:o(()=>[l(m,{label:"人员名称",prop:"followerId"},{default:o(()=>[l(O,{modelValue:v(d).followerId,"onUpdate:modelValue":t[3]||(t[3]=a=>v(d).followerId=a),onChange:Ge,placeholder:"查找或输入服务人员姓名"},{default:o(()=>[(f(!0),q(J,null,R(L.value,a=>(f(),y(S,{key:a.name,label:a.name,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),e("span",{class:"custom_item",onClick:be},Ma)]),_:1}),l(m,{label:"联系方式",prop:"contactTelephone"},{default:o(()=>[l(V,{modelValue:v(d).contactTelephone,"onUpdate:modelValue":t[4]||(t[4]=a=>v(d).contactTelephone=a),placeholder:"查找或输入配送司机手机号码"},null,8,["modelValue"])]),_:1}),l(m,{label:"预约开始",prop:"appointmentStartTime"},{default:o(()=>[l(K,{modelValue:v(d).appointmentStartTime,"onUpdate:modelValue":t[5]||(t[5]=a=>v(d).appointmentStartTime=a),type:"datetime",placeholder:"日期/时间","value-format":"YYYY-MM-DD HH:mm:ss","default-time":v(j),"disabled-date":G},null,8,["modelValue","default-time"])]),_:1}),l(m,{label:"预约结束",prop:"appointmentEndTime"},{default:o(()=>[l(K,{modelValue:v(d).appointmentEndTime,"onUpdate:modelValue":t[6]||(t[6]=a=>v(d).appointmentEndTime=a),type:"datetime",placeholder:"日期/时间","value-format":"YYYY-MM-DD HH:mm:ss","default-time":v(j),"disabled-date":G},null,8,["modelValue","default-time"])]),_:1})]),_:1},8,["model","rules"])):w("",!0),D.value==2?(f(),y(M,{key:1,model:v(d),rules:me,ref_key:"deliveryOrderFormRef",ref:ce,"label-width":"90px","label-position":"left"},{default:o(()=>[l(m,{label:"优先级",prop:"priority"},{default:o(()=>[l(O,{modelValue:v(d).priority,"onUpdate:modelValue":t[7]||(t[7]=a=>v(d).priority=a),placeholder:"请选择优先级"},{default:o(()=>[(f(!0),q(J,null,R(pe.value,a=>(f(),y(S,{key:a.code,label:a.name,value:a.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(m,{label:"派工类型",prop:"type"},{default:o(()=>[l(V,{disabled:"",placeholder:"配送派工",modelValue:v(d).type,"onUpdate:modelValue":t[8]||(t[8]=a=>v(d).type=a)},null,8,["modelValue"])]),_:1}),l(m,{label:"派工单备注",class:"customLayout"},{default:o(()=>[l(V,{modelValue:v(d).remark,"onUpdate:modelValue":t[9]||(t[9]=a=>v(d).remark=a),rows:5,type:"textarea",maxlength:"500",placeholder:"请填写派工单备注","show-word-limit":""},null,8,["modelValue"])]),_:1}),l(m,{label:"上传图片",class:"custom_upload"},{default:o(()=>[l(le,{"on-success":Le,"on-remove":$e,"auto-upload":!0,data:ve.value,headers:X.value,"before-upload":Je,"file-list":v(d).fileList,"onUpdate:fileList":t[10]||(t[10]=a=>v(d).fileList=a),class:"avatar-uploader",action:"https://sh.mengtian.com.cn:9595/md/api/common/file/upload","show-file-list":!0,"list-type":"picture-card"},{default:o(()=>[l(ae,{class:"avatar-uploader-icon"},{default:o(()=>[l(v(oe))]),_:1})]),_:1},8,["data","headers","file-list"])]),_:1})]),_:1},8,["model","rules"])):w("",!0)])]),_:1},8,["modelValue"])]),e("div",za,[l(se,{modelValue:B.value,"onUpdate:modelValue":t[24]||(t[24]=a=>B.value=a),title:"新建安装派工单",width:"80%","show-close":!1},{footer:o(()=>[e("div",ol,[l(n,{class:"cancel_btn",onClick:t[23]||(t[23]=a=>B.value=!1)},{default:o(()=>[b("取消")]),_:1}),x.value==1?(f(),y(n,{key:0,type:"primary",class:"primary_btn",onClick:xe},{default:o(()=>[b("下一步")]),_:1})):w("",!0),x.value==2?(f(),y(n,{key:1,type:"primary",class:"primary_btn",onClick:Pe},{default:o(()=>[b("完成")]),_:1})):w("",!0)])]),default:o(()=>[e("div",ja,[e("span",Wa,[e("span",{onClick:t[13]||(t[13]=a=>te(1)),class:_(x.value==1?"num_selected":"num")},"1",2),e("span",{class:_(x.value>=1?"name_selected":"name")},[b("选择安装技工 "),Ga],2)]),e("span",Ka,[e("span",{onClick:t[14]||(t[14]=a=>te(2)),class:_(x.value==2?"num_selected":"num")},"2",2),e("span",{class:_(x.value>=2?"name_selected":"name")},[b("输入安装派工单注意事项 "),Qa],2)]),e("span",Xa,[e("span",{onClick:t[15]||(t[15]=a=>te(3)),class:_(x.value==3?"num_selected":"num")},"3",2),e("span",{class:_(x.value>=3?"name_selected":"name")},[b("完成创建 "),Za],2)])]),e("div",el,[x.value==1?(f(),y(M,{key:0,model:r,rules:_e,"label-width":"80px","label-position":"left"},{default:o(()=>[l(m,{label:"人员名称",prop:"username"},{default:o(()=>[l(O,{modelValue:r.username,"onUpdate:modelValue":t[16]||(t[16]=a=>r.username=a),onChange:We,placeholder:"查找或输入服务人员姓名"},{default:o(()=>[(f(!0),q(J,null,R(L.value,a=>(f(),y(S,{key:a.name,label:a.name,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),e("span",{class:"custom_item1",onClick:be},al)]),_:1}),l(m,{label:"联系方式",prop:"phone"},{default:o(()=>[l(V,{placeholder:"输入联系方式",modelValue:r.phone,"onUpdate:modelValue":t[17]||(t[17]=a=>r.phone=a)},null,8,["modelValue"])]),_:1}),l(m,{label:"预约开始",prop:"appointmentStartTime"},{default:o(()=>[l(K,{modelValue:r.appointmentStartTime,"onUpdate:modelValue":t[18]||(t[18]=a=>r.appointmentStartTime=a),type:"datetime",placeholder:"日期/时间","value-format":"YYYY-MM-DD HH:mm:ss",":default-time":v(j),"disabled-date":G},null,8,["modelValue",":default-time"])]),_:1}),l(m,{label:"预约结束",prop:"appointmentEndTime"},{default:o(()=>[l(K,{modelValue:r.appointmentEndTime,"onUpdate:modelValue":t[19]||(t[19]=a=>r.appointmentEndTime=a),type:"datetime",placeholder:"日期/时间","value-format":"YYYY-MM-DD HH:mm:ss","default-time":v(j),"disabled-date":G},null,8,["modelValue","default-time"])]),_:1}),l(m,{label:"安装小组"},{default:o(()=>[e("span",ll,[l(Xe,{modelValue:r.installationTeam,"onUpdate:modelValue":t[20]||(t[20]=a=>r.installationTeam=a)},null,8,["modelValue"])])]),_:1}),r.installationTeam?(f(),y(m,{key:0,label:"添加组员"},{default:o(()=>[sl]),_:1})):w("",!0)]),_:1},8,["model","rules"])):w("",!0),x.value==2?(f(),y(M,{key:1,model:r,rules:_e,"label-width":"90px","label-position":"left"},{default:o(()=>[l(m,{label:"优先级",prop:"priority"},{default:o(()=>[l(O,{modelValue:r.priority,"onUpdate:modelValue":t[21]||(t[21]=a=>r.priority=a),placeholder:"请选择优先级"},{default:o(()=>[(f(!0),q(J,null,R(pe.value,a=>(f(),y(S,{key:a.code,label:a.name,value:a.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(m,{label:"派工单备注",class:"customLayout"},{default:o(()=>[l(V,{modelValue:r.remark,"onUpdate:modelValue":t[22]||(t[22]=a=>r.remark=a),rows:5,type:"textarea",maxlength:"500",placeholder:"请填写派工单备注","show-word-limit":""},null,8,["modelValue"])]),_:1}),l(m,{label:"上传图片",class:"custom_upload"},{default:o(()=>[l(le,{"on-success":Ye,"on-remove":ze,"auto-upload":!0,data:ke.value,headers:X.value,"before-upload":je,"file-list":r.fileList,"list-type":"picture-card",class:"avatar-uploader",action:"https://sh.mengtian.com.cn:9595/md/api/common/file/upload","show-file-list":!0},{default:o(()=>[l(ae,{class:"avatar-uploader-icon"},{default:o(()=>[l(v(oe))]),_:1})]),_:1},8,["data","headers","file-list"])]),_:1})]),_:1},8,["model","rules"])):w("",!0)])]),_:1},8,["modelValue"])]),e("div",nl,[l(se,{modelValue:Y.value,"onUpdate:modelValue":t[30]||(t[30]=a=>Y.value=a),title:"问题提报",width:"80%","show-close":!1},{footer:o(()=>[e("div",ml,[l(n,{class:"cancel_btn",onClick:t[29]||(t[29]=a=>Y.value=!1)},{default:o(()=>[b("取消")]),_:1}),l(n,{type:"primary",class:"primary_btn",onClick:Ee},{default:o(()=>[b("提交")]),_:1})])]),default:o(()=>[e("span",il,[e("span",rl,[e("span",{class:_(ue.value==1?"num_selected":"num")},"1",2),dl]),e("span",ul,[e("span",{class:_(ue.value==2?"num_selected":"num")},"2",2),cl])]),e("div",pl,[l(M,{model:p,rules:Ve,"label-width":"90px","label-position":"left"},{default:o(()=>[l(m,{label:"订单编号",prop:"orderNo"},{default:o(()=>[l(V,{placeholder:"请选择订单编号",modelValue:p.orderNo,"onUpdate:modelValue":t[25]||(t[25]=a=>p.orderNo=a)},null,8,["modelValue"])]),_:1}),l(m,{label:"客户姓名",prop:"customerName"},{default:o(()=>[l(O,{modelValue:p.customerName,"onUpdate:modelValue":t[26]||(t[26]=a=>p.customerName=a),onChange:Ke,placeholder:"查找或选择服务人员姓名"},{default:o(()=>[(f(!0),q(J,null,R(L.value,a=>(f(),y(S,{key:a.name,label:a.name,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(m,{label:"客户电话",prop:"customerPhone"},{default:o(()=>[l(V,{placeholder:"请输入客户电话",modelValue:p.customerPhone,"onUpdate:modelValue":t[27]||(t[27]=a=>p.customerPhone=a)},null,8,["modelValue"])]),_:1}),l(m,{label:"问题描述",class:"customLayout",prop:"desc"},{default:o(()=>[l(V,{modelValue:p.desc,"onUpdate:modelValue":t[28]||(t[28]=a=>p.desc=a),rows:5,type:"textarea",maxlength:"500",placeholder:"请输入问题描述","show-word-limit":""},null,8,["modelValue"])]),_:1}),l(m,{label:"上传图片",class:"custom_upload"},{default:o(()=>[l(le,{"on-success":Ae,"on-remove":He,"auto-upload":!0,data:Z.value,headers:X.value,"before-upload":Me,"file-list":p.fileList,"list-type":"picture-card",class:"avatar-uploader",action:"https://sh.mengtian.com.cn:9595/md/api/common/file/upload","show-file-list":!0},{default:o(()=>[l(ae,{class:"avatar-uploader-icon"},{default:o(()=>[l(v(oe))]),_:1})]),_:1},8,["data","headers","file-list"])]),_:1})]),_:1},8,["model","rules"])])]),_:1},8,["modelValue"])])],512)}}}),gl=ut(_l,[["__scopeId","data-v-e4d37891"]]);export{gl as default};
