import{_ as B,a as U,b as O}from"./logoXX-KcEG4fMf.js";import{_ as R}from"./download-Dan4AgsM.js";import{r as T}from"./common-DNv9NPC-.js";import{d as $,g as L,a as M,r as b,o as Q,A as Z,E as k,c as V,h as s,j as A,b as t,w as l,e as d,p as G,f as K,i as S,F as Y,q as F,x as W,t as q,_ as j}from"./index-DwwqDRnZ.js";import"./userinfo-B4NFwAcm.js";const J="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAPCAYAAADQ4S5JAAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAACFSURBVCiR3ZKxDcIwEEWfLZcp0sMgLtgAtmAOKsZJyQApQkvBBAxBi/RoHCmKRGS3POmKu3v/qoOCmtSzOqnvUlOZJZaonTr6m1HtloHbhjwzzHKukGdyBE7Uc4zAriGwjw0yAP8S6Bv8PgEP4FkZ+IT1RL0Ch9LeQwiXzRPlVV6l8nr/BYGarc4yhMG+AAAAAElFTkSuQmCC",g=y=>(G("data-v-b932facd"),y=y(),K(),y),X={class:"main"},ee={class:"header"},te=g(()=>s("span",{class:"title"},"售后工单",-1)),ae=g(()=>s("img",{src:J,alt:""},null,-1)),oe={class:"search"},le={class:"left"},se=g(()=>s("span",{style:{width:"336px",height:"32px"}},null,-1)),ne={class:"right"},re=g(()=>s("img",{src:U,alt:""},null,-1)),ce=g(()=>s("img",{src:O,alt:""},null,-1)),ie={class:"table_header"},de=g(()=>s("span",{class:"left"},[s("img",{src:B,alt:""}),s("span",{class:"title"})],-1)),pe={class:"right"},ue=g(()=>s("img",{src:R,alt:""},null,-1)),me={style:{display:"flex","align-items":"center"}},_e=["onClick"],he=$({__name:"index",setup(y){const{proxy:E}=L(),e=M({workNo:"",customerName:"",customerPhone:"",filterMethod:"",createDate:[],orderStatus:""});b([{value:"all",label:"全部"}]);const N=b([{code:"",name:"全部"},{code:"1",name:"开始"},{code:"2",name:"已提报问题"},{code:"3",name:"售后审核"},{code:"4",name:"已定损"},{code:"5",name:"定责发起"},{code:"6",name:"已提交OA审批"},{code:"7",name:"已追责"},{code:"8",name:"已追责"},{code:"8",name:"结束"}]),v=b({pageIndex:1,pageSize:15,total:0}),C=b([]),h=b(null);Q(()=>{w(!1);const r="100%"/"100%";if(window.addEventListener("resize",Z.debounce(function(){const c=document.body.clientHeight,p=document.body.clientWidth;if(p<1680){const i=c/p;let[a,m]=[0,0];if(i<r){a=c/1080;const u=1920*a,f=p-u;m=f>0?`translate(${f/2}px, 0)`:""}else{a=(p-20)/1920;const u=1080*a,f=c-u;m=f>0?`translate(0, ${f/2}px)`:""}if(i<.52){let u=document.body.clientHeight/a-242*a-10;h.value&&(h.value.style.height=`${u}px`)}else if(h.value){let u=document.body.clientHeight*a+242*a+10;h.value.style.height=`${u}px`}}else h.value&&(h.value.style.height=`calc(${document.body.clientHeight}px - 242px)`)},66)),document.createEvent){var n=document.createEvent("HTMLEvents");n.initEvent("resize",!0,!0),window.dispatchEvent(n)}else typeof Event=="function"&&window.dispatchEvent(new Event("resize"))});const w=r=>{console.log(e);const n=e.customerName==null?"":e.customerName,c=e.customerPhone==null?"":e.customerPhone;let i={ticketNo:e.workNo==null?"":e.workNo,customerName:n,customerPhone:c,status:e.orderStatus,from:e.createDate==null||e.createDate[0]==null?"":e.createDate[0]+" 00:00:00",to:e.createDate==null||e.createDate[1]==null?"":e.createDate[1]+" 23:59:59",pageSize:v.value.pageSize,pageNo:v.value.pageIndex};T(i).then(a=>{let m=a.data.data;m&&m.length>0?(C.value=m,r&&k({message:"查询成功",type:"success"})):k({message:"暂无数据",type:"warning"}),v.value={pageIndex:a.data.current==null?1:parseInt(a.data.current),pageSize:a.data.size,total:a.data.total}}).catch(a=>{k({message:"请求数据失败，请重试",type:"error"}),console.error("请求数据失败:",a)})},z=r=>{E.$router.push({path:"/aftersales_workorder_details",query:{id:r.id}})},D=r=>{v.value.pageIndex=r,w(!0)};return(r,n)=>{const c=d("el-button"),p=d("el-input"),i=d("el-form-item"),a=d("el-form"),m=d("el-date-picker"),u=d("el-option"),f=d("el-select"),_=d("el-table-column"),I=d("el-table"),P=d("el-pagination");return S(),V("div",X,[s("span",ee,[te,A(),t(c,{type:"primary",class:"tips_btn"},{icon:l(()=>[ae]),default:l(()=>[A("售后工单草稿箱")]),_:1})]),s("span",oe,[s("span",le,[t(a,{model:e,rules:r.rule,"label-width":"80px","label-position":"left"},{default:l(()=>[t(i,{label:"工单编号"},{default:l(()=>[t(p,{placeholder:"请输入工单编号",modelValue:e.workNo,"onUpdate:modelValue":n[0]||(n[0]=o=>e.workNo=o)},null,8,["modelValue"])]),_:1}),t(i,{label:"客户名称"},{default:l(()=>[t(p,{placeholder:"输入客户名称",modelValue:e.customerName,"onUpdate:modelValue":n[1]||(n[1]=o=>e.customerName=o)},null,8,["modelValue"])]),_:1}),t(i,{label:"客户电话"},{default:l(()=>[t(p,{placeholder:"请输入客户电话",modelValue:e.customerPhone,"onUpdate:modelValue":n[2]||(n[2]=o=>e.customerPhone=o)},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"]),t(a,{model:e,rules:r.rule,"label-width":"80px","label-position":"left"},{default:l(()=>[t(i,{label:"创建时间"},{default:l(()=>[t(m,{modelValue:e.createDate,"onUpdate:modelValue":n[3]||(n[3]=o=>e.createDate=o),type:"daterange","range-separator":"~","start-placeholder":"开始时间","end-placeholder":"结束时间","value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1}),t(i,{label:"售后状态"},{default:l(()=>[t(f,{modelValue:e.orderStatus,"onUpdate:modelValue":n[4]||(n[4]=o=>e.orderStatus=o),placeholder:"请选择售后状态"},{default:l(()=>[(S(!0),V(Y,null,F(N.value,o=>(S(),W(u,{key:o.code,label:o.name,value:o.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),se]),_:1},8,["model","rules"])]),s("span",ne,[t(c,{type:"primary",onClick:n[5]||(n[5]=o=>w(!1)),class:"search_btn"},{icon:l(()=>[re]),default:l(()=>[A("查询")]),_:1}),t(c,{type:"primary",class:"reset_btn"},{icon:l(()=>[ce]),default:l(()=>[A("重置")]),_:1})])]),s("span",ie,[de,s("span",pe,[t(c,{type:"primary",class:"reset_btn"},{icon:l(()=>[ue]),default:l(()=>[A("下载")]),_:1})])]),s("span",{class:"table",ref_key:"mainTable",ref:h},[t(I,{class:"table_content",data:C.value,stripe:!1,style:{width:"100%"}},{default:l(()=>[t(_,{prop:"name",label:"售后工单编号"}),t(_,{prop:"storeName",label:"专卖店名称"}),t(_,{prop:"productionOrderNo__c",label:"生产单号"}),t(_,{prop:"accountName",label:"客户名称"}),t(_,{prop:"text5",label:"处理方式"}),t(_,{prop:"createdTime",label:"创建时间"}),t(_,{prop:"status__c",label:"售后状态"},{default:l(o=>{var x;return[s("div",me,q(o.row.status__c?(x=N.value.find(H=>H.code==o.row.status__c))==null?void 0:x.name:""),1)]}),_:1}),t(_,{prop:"text8",label:"操作",width:"80px"},{default:l(o=>[s("div",{style:{display:"flex","align-items":"center",color:"#165dff",cursor:"pointer"},onClick:x=>z(o.row)}," 查看 ",8,_e)]),_:1})]),_:1},8,["data"]),t(P,{class:"table_pagination","page-size":v.value.pageSize,"pager-count":15,layout:"total, prev, pager, next",total:v.value.total,onCurrentChange:D},null,8,["page-size","total"])],512)])}}}),ye=j(he,[["__scopeId","data-v-b932facd"]]);export{ye as default};
