import{_ as F,a as L,b as M}from"./tips-DfmWQaVF.js";import{d as O,g as q,r as p,y as z,k as U,E as v,c as x,b as s,s as d,x as o,u as l,q as A,e as i,w as h,F as G,v as P,m as R,z as W,f as b,p as j,h as H,o as g,i as K,_ as Q}from"./index-yO3R9-1p.js";import{f as X}from"./common-C989s-vj.js";const t=f=>(j("data-v-fe1ac97e"),f=f(),H(),f),Y={class:"main"},Z={class:"header"},ss=t(()=>s("span",{class:"title"},"派工单状态",-1)),es={class:"step"},ts={class:"order_info"},as=t(()=>s("span",{class:"title"},"派工单详情",-1)),ns={class:"main_field"},os={class:"row_field"},ls={class:"field"},cs=t(()=>s("span",{class:"label"},"派工编号：",-1)),is={class:"value"},_s={class:"field"},ds=t(()=>s("span",{class:"label"},"派工类型：",-1)),ps={class:"value"},rs={class:"field"},ms=t(()=>s("span",{class:"label"},"派工状态：",-1)),us={class:"value"},hs={class:"row_field"},fs={class:"field"},vs=t(()=>s("span",{class:"label"},"服务技工：",-1)),xs={class:"value"},bs={class:"field"},gs=t(()=>s("span",{class:"label"},"服务技工电话：",-1)),ys={class:"value"},Cs={class:"field"},Ss=t(()=>s("span",{class:"label"},"客户地址：",-1)),ks={class:"value"},ws=R('<span class="row_field" data-v-fe1ac97e><span class="field" data-v-fe1ac97e><span class="label" data-v-fe1ac97e>客户姓名：</span><span class="value" data-v-fe1ac97e></span></span><span class="field" data-v-fe1ac97e><span class="label" data-v-fe1ac97e>客户电话：</span><span class="value" data-v-fe1ac97e></span></span></span>',1),Ns=t(()=>s("span",{class:"title"},"派工要求",-1)),Ts={class:"other_field"},Es={class:"row_field"},Bs={class:"field"},$s=t(()=>s("span",{class:"label"},"计划开始：",-1)),Ds={class:"value"},Js={class:"field"},Is=t(()=>s("span",{class:"label"},"计划结束：",-1)),Vs={class:"value"},Fs={class:"field"},Ls=t(()=>s("span",{class:"label"},"优先级：",-1)),Ms={class:"value"},Os={class:"row_field"},qs={class:"field"},zs=t(()=>s("span",{class:"label"},"是否具备安装条件：",-1)),Us={class:"value"},As={class:"service_evaluation_list"},Gs=t(()=>s("span",{class:"table_title"},"服务评价",-1)),Ps={class:"table_content"},Rs=["onClick"],Ws={class:"dispatch_attachment_list"},js=t(()=>s("span",{class:"table_title"},"派工附件",-1)),Hs={class:"table_content"},Ks=["onClick"],Qs={class:"action_list"},Xs=t(()=>s("img",{src:F,alt:""},null,-1)),Ys={class:"right"},Zs={class:"userinfo"},se=t(()=>s("img",{src:L,alt:""},null,-1)),ee={class:"username"},te={class:"content"},ae={class:"date"},ne=t(()=>s("span",{class:"reply"},"回复",-1)),oe=t(()=>s("img",{class:"tips",src:M,alt:""},null,-1)),le=O({__name:"index",setup(f){q();const _=p(3),y=p([]),N=z();let a=p({});const T=p([{code:"1",name:"最高"},{code:"2",name:"高"},{code:"3",name:"中"},{code:"4",name:"低"}]),E=p([{code:"all",name:"全部"},{code:"0",name:"配送派工单"},{code:"1",name:"安装派工单"},{code:"2",name:"维修派工单"}]),B=p([{code:"all",name:"全部"},{code:"0",name:"待开始"},{code:"1",name:"进行中"},{code:"2",name:"已完成"}]);p([{text1:"CS0011-06665-01",text2:"门套",text3:"示例字段...",text4:"混油米灰1#",text5:"2021-02-28 10:30:50",text6:""},{text1:"CS0011-06665-01",text2:"门套",text3:"示例字段...",text4:"混油米灰1#",text5:"2021-02-28 10:30:50",text6:""},{text1:"CS0011-06665-01",text2:"门套",text3:"示例字段...",text4:"混油米灰1#",text5:"2021-02-28 10:30:50",text6:""}]);const $=p([{text1:"SU2024030101",text2:"已评价",text3:"示例字段...",text4:"李工",text5:"2021-02-28 10:30:50",text6:""}]),D=p([{text1:"SU2024030101",text2:"已上传",text3:"image.com...",text4:"李工",text5:""}]),m=r=>{_.value=r},C=()=>{W.prompt("请填写评论内容","发起评论",{inputPattern:/\S/,inputErrorMessage:"评论内容不能为空!",confirmButtonText:"确认",cancelButtonText:"取消"}).then(({value:r})=>{y.value.push({userName:"经销商",text:r,date:new Date().toLocaleString()})}).catch(()=>{})};U(()=>{J(!0,N.query.id)});const J=(r,c)=>{X(c).then(n=>{let u=n.data.data;u!=null?(a.value=u,m(u.status),r&&v({message:"查询成功",type:"success"})):r&&v({message:"获取数据失败",type:"error"})}).catch(n=>{v({message:"请求数据失败，请重试",type:"error"}),console.error("请求数据失败:",n)})};return(r,c)=>{var S,k,w;const n=b("el-table-column"),u=b("el-table"),I=b("el-button");return g(),x("div",Y,[s("span",Z,[ss,s("span",es,[s("span",{class:"item",onClick:c[0]||(c[0]=e=>m(1))},[s("span",{class:d(_.value==1?"num_selected":"num")},"1",2),s("span",{class:d(_.value>=1?"name_selected":"name")},"已新建",2)]),s("span",{class:"item",onClick:c[1]||(c[1]=e=>m(2))},[s("span",{class:d(_.value==2?"num_selected":"num")},"2",2),s("span",{class:d(_.value>=2?"name_selected":"name")},"待开始",2)]),s("span",{class:"item",onClick:c[2]||(c[2]=e=>m(3))},[s("span",{class:d(_.value==3?"num_selected":"num")},"3",2),s("span",{class:d(_.value>=3?"name_selected":"name")},"进行中",2)]),s("span",{class:"item",onClick:c[3]||(c[3]=e=>m(4))},[s("span",{class:d(_.value==4?"num_selected":"num")},"4",2),s("span",{class:d(_.value>=4?"name_selected":"name")},"已完成",2)]),s("span",{class:"item",onClick:c[4]||(c[4]=e=>m(5))},[s("span",{class:d(_.value==5?"num_selected":"num")},"5",2),s("span",{class:d(_.value>=5?"name_selected":"name")},"已评价",2)])])]),s("span",ts,[as,s("span",ns,[s("span",os,[s("span",ls,[cs,s("span",is,o(l(a).caseNo),1),A("",!0)]),s("span",_s,[ds,s("span",ps,o(l(a).fieldJobType__c?(S=E.value.find(e=>e.code==l(a).fieldJobType__c))==null?void 0:S.name:"配送派工单"),1)]),s("span",rs,[ms,s("span",us,o(l(a).stage__c?(k=B.value.find(e=>e.code==l(a).stage__c))==null?void 0:k.name:"待开始"),1)])]),s("span",hs,[s("span",fs,[vs,s("span",xs,o(l(a).fieldJobContactName),1)]),s("span",bs,[gs,s("span",ys,o(l(a).contactTelephone),1)]),s("span",Cs,[Ss,s("span",ks,o(l(a).address),1)])]),ws]),Ns,s("span",Ts,[s("span",Es,[s("span",Bs,[$s,s("span",Ds,o(l(a).appointmentStartTime),1)]),s("span",Js,[Is,s("span",Vs,o(l(a).appointmentEndTime),1)]),s("span",Fs,[Ls,s("span",Ms,o(l(a).priority?(w=T.value.find(e=>e.code==l(a).priority))==null?void 0:w.name:""),1)])]),s("span",Os,[s("span",qs,[zs,s("span",Us,o(l(a).whetherEvaluation===!1?"否":"是"),1)])])])]),s("span",As,[Gs,s("span",Ps,[i(u,{data:$.value,stripe:!1,style:{width:"100%"}},{default:h(()=>[i(n,{prop:"text1",label:"服务评价号"}),i(n,{prop:"text2",label:"状态"}),i(n,{prop:"text3",label:"其它字段"}),i(n,{prop:"text4",label:"服务技工"}),i(n,{prop:"text6",label:"操作",width:"80px"},{default:h(e=>[s("div",{style:{display:"flex","align-items":"center",color:"#165dff",cursor:"pointer"},onClick:V=>console.log(e)}," 查看 ",8,Rs)]),_:1})]),_:1},8,["data"])])]),s("span",Ws,[js,s("span",Hs,[i(u,{data:D.value,stripe:!1,style:{width:"100%"}},{default:h(()=>[i(n,{prop:"text1",label:"附件编号"}),i(n,{prop:"text2",label:"状态"}),i(n,{prop:"text3",label:"附件链接"}),i(n,{prop:"text4",label:"操作",width:"80px"},{default:h(e=>[s("div",{style:{display:"flex","align-items":"center",color:"#165dff",cursor:"pointer"},onClick:V=>console.log(e)}," 查看 ",8,Ks)]),_:1})]),_:1},8,["data"])])]),s("span",Qs,[s("div",{class:"left"},[Xs,s("span",{class:"initiate_comments",onClick:C},"发起任务评论")]),s("div",Ys,[i(I,{type:"primary",onClick:C,class:"primary_btn"},{default:h(()=>[K("编辑")]),_:1})])]),(g(!0),x(G,null,P(y.value,e=>(g(),x("div",{class:"comment",key:e.date},[s("div",Zs,[se,s("span",ee,o(e.userName),1)]),s("div",te,o(e.text),1),s("div",ae,o(e.date),1),ne,oe]))),128))])}}}),de=Q(le,[["__scopeId","data-v-fe1ac97e"]]);export{de as default};
