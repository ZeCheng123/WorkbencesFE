import{_ as j,a as J,b as K}from"./logoXX-KcEG4fMf.js";import{_ as Q}from"./plus-B8sn_dc4.js";import{K as X,a as Z}from"./common-DZytvcl-.js";import{d as ee,g as le,r as v,o as ae,y as te,E as w,c as N,h as o,b as a,w as t,F as T,e as _,p as oe,f as se,i as g,m as E,s as S,j as x,t as z,q as ne,_ as re}from"./index-BNw8j_YZ.js";import"./userinfo-CbCawm5q.js";const k=C=>(oe("data-v-a0c4bd2a"),C=C(),se(),C),ue={class:"main"},de=k(()=>o("span",{class:"header"}," 我的人员 ",-1)),ie={class:"search"},pe={class:"left"},me=k(()=>o("span",{style:{width:"336px",height:"32px"}},null,-1)),ce={class:"right"},ve=k(()=>o("img",{src:J,alt:""},null,-1)),_e=k(()=>o("img",{src:K,alt:""},null,-1)),ge={class:"table_header"},fe=k(()=>o("span",{class:"left"},[o("img",{src:j,alt:""}),o("span",{class:"title"})],-1)),be={class:"right"},he=k(()=>o("img",{src:Q,alt:""},null,-1)),ye=["onClick"],Ve={class:"showDialog"},ke={class:"content"},we={class:"custom-row"},Ne={class:"custom-row"},Te={class:"custom-row"},xe={class:"custom-row"},Ce={class:"custom-row"},Ue={class:"dialog-footer"},Ee=ee({__name:"index",setup(C){const{proxy:A}=le(),b=v({pageIndex:1,pageSize:15,total:0}),$=v(),y=v(!1),m=v({userType:"",name:"",phone:""}),s=v({userType:"",name:"",phone:"",status:1,storeNo:"HY0011",storeName:"梦天木门集团有限公司",distributorNo:"HY01",distributorName:"梦天集团",generalAgentNo:"GD01",generalAgentName:"梦天",skill:""}),B=v({name:[{required:!0,message:"姓名不能为空",trigger:"blur"}],phone:[{required:!0,message:"电话不能为空",trigger:"blur"},{validator:(i,l)=>/^1\d{10}$/.test(l)?Promise.resolve():Promise.reject("电话格式不正确"),trigger:"blur"}],userType:[{required:!0,message:"人员类型不能为空",trigger:"blur"}],status:[{required:!0,message:"状态不能为空",trigger:"blur"}]}),I=v([{code:1,name:"安装工程师"},{code:2,name:"售后人员"},{code:3,name:"配送司机"},{code:4,name:"美容工程师"},{code:5,name:"仓管员"},{code:6,name:"售后管理员"}]),F=v([{code:1,name:"门"},{code:2,name:"墙"},{code:3,name:"柜"}]),D=v([{code:1,name:"在职"},{code:2,name:"离职"}]),H=v([]),f=v("add"),h=v(null);ae(()=>{console.log(A.$router.options.routes),U();const i="100%"/"100%";if(window.addEventListener("resize",te.debounce(function(){const n=document.body.clientHeight,c=document.body.clientWidth;if(c<1680){const u=n/c;let[r,V]=[0,0];if(u<i){r=n/1080;const p=1920*r,d=c-p;V=d>0?`translate(${d/2}px, 0)`:""}else{r=(c-20)/1920;const p=1080*r,d=n-p;V=d>0?`translate(0, ${d/2}px)`:""}if(u<.52){let p=document.body.clientHeight/r-242*r-10;h.value&&(h.value.style.height=`${p}px`)}else if(h.value){let p=document.body.clientHeight*r+242*r+10;h.value.style.height=`${p}px`}}else h.value&&(h.value.style.height=`calc(${document.body.clientHeight}px - 242px)`)},66)),document.createEvent){var l=document.createEvent("HTMLEvents");l.initEvent("resize",!0,!0),window.dispatchEvent(l)}else typeof Event=="function"&&window.dispatchEvent(new Event("resize"))});const U=()=>{let i={userType:m.value.userType,name:m.value.name,phone:m.value.phone,pageNo:b.value.pageIndex,pageSize:b.value.pageSize};X(i).then(l=>{let n=l.data;n.code=="success"?(H.value=n.data,b.value={pageIndex:l.data.current==null?1:parseInt(l.data.current),pageSize:l.data.size,total:l.data.total}):(H.value=[],b.value={pageIndex:1,pageSize:15,total:0},console.log("失败"))}).catch(l=>{w({message:"请求数据失败，请重试",type:"error"}),console.error("请求数据失败:",l)})},L=()=>{m.value={userType:"",name:"",phone:""}},O=()=>{f.value="add",y.value=!0},Y=()=>{s.value={userType:1,name:"",phone:"",status:1,storeNo:"HY0011",storeName:"梦天木门集团有限公司",distributorNo:"HY01",distributorName:"梦天集团",generalAgentNo:"GD01",generalAgentName:"梦天",skill:""},$.value.clearValidate(),y.value=!1},q=()=>{$.value.validate(i=>{if(i){let l=s.value;if(f.value=="edit"&&delete l.createdTime,(l.userType=="1"||l.userType=="4")&&Array.isArray(l.skill)&&l.skill.length>0){w({message:"人员类型为安装工程师或美容工程师时，人员技能不能为空,"+f.value=="add"?"新增失败!":"编辑失败!",type:"warning"});return}Z(l).then(n=>{var c,u;if(((c=n==null?void 0:n.data)==null?void 0:c.code)=="success")s.value={userType:1,name:"",phone:"",status:1,storeNo:"HY0011",storeName:"梦天木门集团有限公司",distributorNo:"HY01",distributorName:"梦天集团",generalAgentNo:"GD01",generalAgentName:"梦天",skill:""},y.value=!1,w({message:f.value=="add"?"新增成功!":"编辑成功!",type:"success"}),setTimeout(()=>{U()},500);else{console.log("失败");let r=(u=n==null?void 0:n.data)==null?void 0:u.message;r=="user phone existed"&&(r="用户已存在，"),w({message:r+f.value=="add"?"新增失败!":"编辑失败!",type:"warning"})}}).catch(n=>{w({message:f.value=="add"?"新增失败!":"编辑失败!",type:"error"}),console.error("新增失败:",n)})}})},M=i=>{let l=JSON.parse(JSON.stringify(i));s.value=l,f.value="edit",y.value=!0},W=i=>{b.value.pageIndex=i,U()};return(i,l)=>{const n=_("el-option"),c=_("el-select"),u=_("el-form-item"),r=_("el-input"),V=_("el-form"),p=_("el-button"),d=_("el-table-column"),G=_("el-table"),P=_("el-pagination"),R=_("el-dialog");return g(),N(T,null,[o("div",ue,[de,o("span",ie,[o("span",pe,[a(V,{model:m.value,rules:i.rule,"label-width":"80px","label-position":"left"},{default:t(()=>[a(u,{label:"人员类型"},{default:t(()=>[a(c,{modelValue:m.value.userType,"onUpdate:modelValue":l[0]||(l[0]=e=>m.value.userType=e),placeholder:"请选择人员类型",clearable:""},{default:t(()=>[(g(!0),N(T,null,E(I.value,e=>(g(),S(n,{key:e.code,label:e.name,value:e.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(u,{label:"人员姓名"},{default:t(()=>[a(r,{placeholder:"输入人员姓名",modelValue:m.value.name,"onUpdate:modelValue":l[1]||(l[1]=e=>m.value.name=e)},null,8,["modelValue"])]),_:1}),a(u,{label:"人员电话"},{default:t(()=>[a(r,{placeholder:"输入人员电话",modelValue:m.value.phone,"onUpdate:modelValue":l[2]||(l[2]=e=>m.value.phone=e)},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"]),a(V,{model:m.value,rules:i.rule,"label-width":"80px","label-position":"left"},{default:t(()=>[me]),_:1},8,["model","rules"])]),o("span",ce,[a(p,{onClick:l[3]||(l[3]=e=>U()),type:"primary",class:"search_btn"},{icon:t(()=>[ve]),default:t(()=>[x("查询")]),_:1}),a(p,{type:"primary",onClick:l[4]||(l[4]=e=>L()),class:"reset_btn"},{icon:t(()=>[_e]),default:t(()=>[x("重置")]),_:1})])]),o("span",ge,[fe,o("span",be,[a(p,{onClick:l[5]||(l[5]=e=>O()),type:"primary",class:"search_btn"},{icon:t(()=>[he]),default:t(()=>[x("新建")]),_:1})])]),o("span",{class:"table",ref_key:"mainTable",ref:h},[a(G,{class:"table_content",data:H.value,stripe:!1,style:{width:"100%"}},{default:t(()=>[a(d,{prop:"id",label:"人员编号"}),a(d,{prop:"name",label:"姓名"}),a(d,{prop:"phone",label:"电话"}),a(d,{prop:"userType",label:"人员类型"},{default:t(e=>[o("div",null,z(e.row.userType==1?"安装工程师":e.row.userType==2?"售后专员":e.row.userType==3?"配送司机":e.row.userType==4?"美容工程师":e.row.userType==5?"仓管员":"售后管理员"),1)]),_:1}),a(d,{prop:"skill",label:"技能"},{default:t(e=>[o("div",null,z(e.row.skill==1?"门":e.row.skill==2?"墙":"柜"),1)]),_:1}),a(d,{prop:"status",label:"人员状态"},{default:t(e=>[o("div",null,z(e.row.status==1?"在职":"离职"),1)]),_:1}),a(d,{prop:"distributorName",label:"经销商名称"}),a(d,{prop:"createdTime",label:"创建时间"}),a(d,{prop:"userType",label:"操作",width:"80px"},{default:t(e=>[o("div",{style:{display:"flex","align-items":"center",color:"#165dff",cursor:"pointer"},onClick:Se=>M(e.row)}," 编辑 ",8,ye)]),_:1})]),_:1},8,["data"]),a(P,{"pager-count-format":i.pagerCountFormat,onCurrentChange:W,class:"table_pagination","page-size":b.value.pageSize,layout:"total, prev, pager, next",total:b.value.total},null,8,["pager-count-format","page-size","total"])],512)]),o("div",Ve,[a(R,{modelValue:y.value,"onUpdate:modelValue":l[18]||(l[18]=e=>y.value=e),title:f.value=="add"?"新增人员":"编辑人员",width:"60%","show-close":!1},{footer:t(()=>[o("div",Ue,[a(p,{class:"cancel_btn",onClick:l[16]||(l[16]=e=>Y())},{default:t(()=>[x("取消")]),_:1}),a(p,{onClick:l[17]||(l[17]=e=>q()),type:"primary",class:"primary_btn"},{default:t(()=>[x("确认")]),_:1})])]),default:t(()=>[o("div",ke,[a(V,{model:s.value,rules:B.value,ref_key:"formRef",ref:$,"label-width":"90px","label-position":"right"},{default:t(()=>[o("div",we,[a(u,{label:"姓名",prop:"name"},{default:t(()=>[a(r,{placeholder:"请输入姓名",modelValue:s.value.name,"onUpdate:modelValue":l[6]||(l[6]=e=>s.value.name=e)},null,8,["modelValue"])]),_:1}),a(u,{label:"电话",prop:"phone"},{default:t(()=>[a(r,{placeholder:"请输入电话",modelValue:s.value.phone,"onUpdate:modelValue":l[7]||(l[7]=e=>s.value.phone=e)},null,8,["modelValue"])]),_:1})]),o("div",Ne,[a(u,{label:"人员类型",prop:"userType"},{default:t(()=>[a(c,{modelValue:s.value.userType,"onUpdate:modelValue":l[8]||(l[8]=e=>s.value.userType=e),placeholder:"请选择人员类型"},{default:t(()=>[(g(!0),N(T,null,E(I.value,e=>(g(),S(n,{key:e.code,label:e.name,value:e.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(u,{label:"人员状态",prop:"status"},{default:t(()=>[a(c,{modelValue:s.value.status,"onUpdate:modelValue":l[9]||(l[9]=e=>s.value.status=e),placeholder:"请选择人员状态"},{default:t(()=>[(g(!0),N(T,null,E(D.value,e=>(g(),S(n,{key:e.code,label:e.name,value:e.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),o("div",Te,[a(u,{label:"人员技能",prop:"skill"},{default:t(()=>[a(c,{multiple:"","collapse-tags":"",modelValue:s.value.skill,"onUpdate:modelValue":l[10]||(l[10]=e=>s.value.skill=e),placeholder:"请选择人员类型"},{default:t(()=>[(g(!0),N(T,null,E(F.value,e=>(g(),S(n,{key:e.code,label:e.name,value:e.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),ne("",!0)]),o("div",xe,[a(u,{label:"门店编码"},{default:t(()=>[a(r,{placeholder:"请输入门店编码",modelValue:s.value.storeNo,"onUpdate:modelValue":l[12]||(l[12]=e=>s.value.storeNo=e)},null,8,["modelValue"])]),_:1}),a(u,{label:"门店名称"},{default:t(()=>[a(r,{placeholder:"请输入门店名称",modelValue:s.value.storeName,"onUpdate:modelValue":l[13]||(l[13]=e=>s.value.storeName=e)},null,8,["modelValue"])]),_:1})]),o("div",Ce,[a(u,{label:"经销商编码"},{default:t(()=>[a(r,{placeholder:"请输入经销商编码",modelValue:s.value.distributorNo,"onUpdate:modelValue":l[14]||(l[14]=e=>s.value.distributorNo=e)},null,8,["modelValue"])]),_:1}),a(u,{label:"经销商名称"},{default:t(()=>[a(r,{placeholder:"请输入经销商名称",modelValue:s.value.distributorName,"onUpdate:modelValue":l[15]||(l[15]=e=>s.value.distributorName=e)},null,8,["modelValue"])]),_:1})])]),_:1},8,["model","rules"])])]),_:1},8,["modelValue","title"])])],64)}}}),Be=re(Ee,[["__scopeId","data-v-a0c4bd2a"]]);export{Be as default};
