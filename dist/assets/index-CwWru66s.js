import{_ as H,a as M,b as B}from"./logoXX-KcEG4fMf.js";import{_ as L}from"./download-Dan4AgsM.js";import{b as T}from"./common-DZytvcl-.js";import{d as U,g as W,a as Y,r as v,o as F,y as O,E as V,c as w,h as n,b as t,w as s,e as u,p as j,f as q,i as S,F as A,m as G,s as J,j as D,_ as K}from"./index-BNw8j_YZ.js";import"./userinfo-CbCawm5q.js";const b=y=>(j("data-v-1ec68d2a"),y=y(),q(),y),Q={class:"main"},R=b(()=>n("span",{class:"header"}," 订单中心 ",-1)),X={class:"search"},Z={class:"left"},ee=b(()=>n("span",{style:{width:"336px",height:"32px"}},null,-1)),te={class:"right"},ae=b(()=>n("img",{src:M,alt:""},null,-1)),oe=b(()=>n("img",{src:B,alt:""},null,-1)),le={class:"table_header"},se=b(()=>n("span",{class:"left"},[n("img",{src:H,alt:""}),n("span",{class:"title"})],-1)),ne={class:"right"},re=b(()=>n("img",{src:L,alt:""},null,-1)),ce=["onClick"],de=U({__name:"index",setup(y){const{proxy:C}=W(),e=Y({orderNo:"",customerName:"",customerPhone:"",filterMethod:"",createDate:[],orderStatus:""}),g=v({pageIndex:1,pageSize:15,total:0});v([{value:"all",label:"全部"}]);const E=v([{code:"",name:"全部"},{code:"0",name:"正在录单"},{code:"1",name:"已打单"},{code:"2",name:"已入成品库"},{code:"3",name:"已提交"},{code:"4",name:"已生产下单"},{code:"5",name:"已发货"},{code:"6",name:"已订单审核"},{code:"7",name:"已财务审核"},{code:"8",name:"已经销商确认"},{code:"9",name:"已物料产能稽核"},{code:"10",name:"已物流到货"},{code:"11",name:"已白坏稽核"},{code:"12",name:"已经销商收货"},{code:"13",name:"已油漆"},{code:"14",name:"订单完结"},{code:"15",name:"已包装"},{code:"16",name:"锁定"}]),N=v([]),h=v(null);F(()=>{x(!1);const i="100%"/"100%";if(window.addEventListener("resize",O.debounce(function(){const p=document.body.clientHeight,r=document.body.clientWidth;if(r<1680){const f=p/r;let[o,c]=[0,0];if(f<i){o=p/1080;const d=1920*o,m=r-d;c=m>0?`translate(${m/2}px, 0)`:""}else{o=(r-20)/1920;const d=1080*o,m=p-d;c=m>0?`translate(0, ${m/2}px)`:""}if(f<.52){let d=document.body.clientHeight/o-242*o-10;h.value&&(h.value.style.height=`${d}px`)}else if(h.value){let d=document.body.clientHeight*o+242*o+10;h.value.style.height=`${d}px`}}else h.value&&(h.value.style.height=`calc(${document.body.clientHeight}px - 242px)`)},66)),document.createEvent){var a=document.createEvent("HTMLEvents");a.initEvent("resize",!0,!0),window.dispatchEvent(a)}else typeof Event=="function"&&window.dispatchEvent(new Event("resize"))});const x=i=>{const a=e.orderNo,p=e.customerName,r=e.customerPhone,f=e.orderStatus;let o={pageNo:g.value.pageIndex,pageSize:g.value.pageSize};a!=""&&(o.po=a),p!=""&&(o.accountName=p),r!=""&&(o.accountPhone=r),f!=""&&(o.status__c=f),e.createDate!=null&&e.createDate[0]!=null&&e.createDate[0]!=""&&(o.from=e.createDate[0]+" 00:00:00"),e.createDate!=null&&e.createDate[1]!=null&&e.createDate[1]!=""&&(o.to=e.createDate[1]+" 23:59:59"),T(o).then(c=>{let d=c.data.data;d.length>0?(N.value=d,i&&V({message:"查询成功",type:"success"})):(N.value=[],V({message:"暂无数据",type:"error"})),g.value={pageIndex:c.data.current==null?1:parseInt(c.data.current),pageSize:c.data.size,total:c.data.total}}).catch(c=>{V({message:"请求数据失败，请重试",type:"error"}),console.error("请求数据失败:",c)})},k=i=>{C.$router.push({path:"/historical_orders_details",query:{id:i.id,po:i.po,status__c:i.status__c}})},z=i=>{g.value.pageIndex=i,x(!1)},I=()=>{e.orderNo="",e.customerName="",e.customerPhone="",e.filterMethod="",e.createDate=[],e.orderStatus="",x(!1)};return(i,a)=>{const p=u("el-input"),r=u("el-form-item"),f=u("el-form"),o=u("el-date-picker"),c=u("el-option"),d=u("el-select"),m=u("el-button"),_=u("el-table-column"),P=u("el-table"),$=u("el-pagination");return S(),w("div",Q,[R,n("span",X,[n("span",Z,[t(f,{model:e,"label-width":"80px","label-position":"left"},{default:s(()=>[t(r,{label:"订单编号"},{default:s(()=>[t(p,{placeholder:"请输入任务编号",modelValue:e.orderNo,"onUpdate:modelValue":a[0]||(a[0]=l=>e.orderNo=l)},null,8,["modelValue"])]),_:1}),t(r,{label:"客户姓名"},{default:s(()=>[t(p,{placeholder:"输入客户姓名",modelValue:e.customerName,"onUpdate:modelValue":a[1]||(a[1]=l=>e.customerName=l)},null,8,["modelValue"])]),_:1}),t(r,{label:"客户电话"},{default:s(()=>[t(p,{placeholder:"请输入客户电话",modelValue:e.customerPhone,"onUpdate:modelValue":a[2]||(a[2]=l=>e.customerPhone=l)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"]),t(f,{model:e,"label-width":"80px","label-position":"left"},{default:s(()=>[t(r,{label:"创建时间"},{default:s(()=>[t(o,{modelValue:e.createDate,"onUpdate:modelValue":a[3]||(a[3]=l=>e.createDate=l),type:"daterange","range-separator":"~","start-placeholder":"开始时间","end-placeholder":"结束时间","value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1}),t(r,{label:"订单状态"},{default:s(()=>[t(d,{modelValue:e.orderStatus,"onUpdate:modelValue":a[4]||(a[4]=l=>e.orderStatus=l),placeholder:"请选择订单状态"},{default:s(()=>[(S(!0),w(A,null,G(E.value,l=>(S(),J(c,{key:l.code,label:l.name,value:l.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),ee]),_:1},8,["model"])]),n("span",te,[t(m,{onClick:a[5]||(a[5]=l=>x(!0)),type:"primary",class:"search_btn"},{icon:s(()=>[ae]),default:s(()=>[D("查询")]),_:1}),t(m,{onClick:a[6]||(a[6]=l=>I()),type:"primary",class:"reset_btn"},{icon:s(()=>[oe]),default:s(()=>[D("重置")]),_:1})])]),n("span",le,[se,n("span",ne,[t(m,{type:"primary",class:"reset_btn"},{icon:s(()=>[re]),default:s(()=>[D("下载")]),_:1})])]),n("span",{class:"table",ref_key:"mainTable",ref:h},[t(P,{class:"table_content",data:N.value,stripe:!1,style:{width:"100%"}},{default:s(()=>[t(_,{prop:"po",label:"订单编号"}),t(_,{prop:"storeName__c",label:"专卖店名称"}),t(_,{prop:"storeNo",label:"专卖店编号"}),t(_,{prop:"accountName__C",label:"客户名称"}),t(_,{prop:"customerAddress",label:"客户地址"}),t(_,{prop:"productionOrderNo__c",label:"生产单号"}),t(_,{prop:"createdTime",label:"创建时间"}),t(_,{prop:"status__c",label:"状态"}),t(_,{prop:"text8",label:"操作",width:"80px"},{default:s(l=>[n("div",{style:{display:"flex","align-items":"center",color:"#165dff",cursor:"pointer"},onClick:ie=>k(l.row)}," 查看 ",8,ce)]),_:1})]),_:1},8,["data"]),t($,{class:"table_pagination","page-size":g.value.pageSize,"pager-count":15,layout:"total, prev, pager, next",total:g.value.total,onCurrentChange:z},null,8,["page-size","total"])],512)])}}}),he=K(de,[["__scopeId","data-v-1ec68d2a"]]);export{he as default};
