import{_ as q,a as z,b as A}from"./tips-DfmWQaVF.js";import{d as H,g as R,r as d,H as W,k as Y,Y as K,G as b,L as Q,c as I,b as s,D as u,t as c,y as n,C as X,e as P,w as S,F as D,x as j,M as Z,f as N,p as U,h as ss,o as C,B as es,i as ts,_ as as}from"./index-1-lRGkZt.js";const a=k=>(U("data-v-1fdd0c66"),k=k(),ss(),k),os={class:"main"},ns={class:"header"},cs=a(()=>s("span",{class:"title"},"派工单状态",-1)),ls={class:"step"},is={class:"order_info"},ds=a(()=>s("span",{class:"title"},"派工单详情",-1)),_s={class:"main_field"},ps={class:"row_field"},rs={class:"field"},us=a(()=>s("span",{class:"label"},"派工编号：",-1)),hs={class:"value"},ms={class:"field"},fs=a(()=>s("span",{class:"label"},"派工类型：",-1)),vs={class:"value"},gs={class:"field"},xs=a(()=>s("span",{class:"label"},"派工状态：",-1)),ys={class:"value"},bs={class:"row_field"},Ps={class:"field"},Cs=a(()=>s("span",{class:"label"},"服务技工：",-1)),ks={class:"value"},ws={class:"field"},Is=a(()=>s("span",{class:"label"},"服务技工电话：",-1)),Ns={class:"value"},Es={class:"field"},Ss=a(()=>s("span",{class:"label"},"客户地址：",-1)),Ts={class:"value"},Bs={class:"row_field"},Ds={class:"field"},js=a(()=>s("span",{class:"label"},"客户姓名：",-1)),Js={class:"value"},Fs={class:"field"},Ls=a(()=>s("span",{class:"label"},"客户电话：",-1)),Vs={class:"value"},$s=a(()=>s("span",{class:"title"},"派工要求",-1)),Ms={class:"other_field"},Os={class:"row_field"},Gs={class:"field"},qs=a(()=>s("span",{class:"label"},"计划开始：",-1)),zs={class:"value"},As={class:"field"},Hs=a(()=>s("span",{class:"label"},"计划结束：",-1)),Rs={class:"value"},Ws={class:"field"},Ys=a(()=>s("span",{class:"label"},"优先级：",-1)),Ks={class:"value"},Qs={class:"row_field"},Xs={class:"field"},Zs=a(()=>s("span",{class:"label"},"是否具备安装条件：",-1)),Us={class:"value"},se={class:"dispatch_attachment_list"},ee=a(()=>s("span",{class:"table_title"},"派工附件",-1)),te={class:"table_content"},ae={class:"action_list"},oe=a(()=>s("img",{src:q,alt:""},null,-1)),ne={class:"right"},ce={class:"userinfo"},le=a(()=>s("img",{src:z,alt:""},null,-1)),ie={class:"username"},de={class:"content"},_e={class:"date"},pe=a(()=>s("span",{class:"reply"},"回复",-1)),re=a(()=>s("img",{class:"tips",src:A,alt:""},null,-1)),ue=H({__name:"index",setup(k){R();const _=d(3),T=d([]),J=W();let o=d({});const E=d([]),F=d([{code:"1",name:"最高"},{code:"2",name:"高"},{code:"3",name:"中"},{code:"4",name:"低"}]),L=d([{code:"all",name:"全部"},{code:"0",name:"配送派工单"},{code:"1",name:"安装派工单"},{code:"2",name:"维修派工单"}]),V=d([{code:"all",name:"全部"},{code:"0",name:"待开始"},{code:"1",name:"进行中"},{code:"2",name:"已完成"}]);d([{text1:"CS0011-06665-01",text2:"门套",text3:"示例字段...",text4:"混油米灰1#",text5:"2021-02-28 10:30:50",text6:""},{text1:"CS0011-06665-01",text2:"门套",text3:"示例字段...",text4:"混油米灰1#",text5:"2021-02-28 10:30:50",text6:""},{text1:"CS0011-06665-01",text2:"门套",text3:"示例字段...",text4:"混油米灰1#",text5:"2021-02-28 10:30:50",text6:""}]),d([{text1:"SU2024030101",text2:"未评价",text3:"待填写",text4:"李工",text5:"2021-02-28 10:30:50",text6:""}]);const h=d([]),m=i=>{_.value=i},B=()=>{Z.prompt("请填写评论内容","发起评论",{inputPattern:/\S/,inputErrorMessage:"评论内容不能为空!",confirmButtonText:"确认",cancelButtonText:"取消"}).then(({value:i})=>{T.value.push({userName:"经销商",text:i,date:new Date().toLocaleString()})}).catch(()=>{})};Y(()=>{$(!0,J.query.id),M(!1)});const $=(i,l)=>{K(l).then(p=>{let e=p.data.data;if(e!=null){o.value=e,m(e.stage__c);var r="https://sh.mengtian.com.cn:9595/md/api/common/file/direct-download?fileId=";if(e.goodsPicture!=null&&e.goodsPicture.length>0){var w=[];e.goodsPicture.forEach(t=>{w.push(r+t)}),h.value.push({picNo:e.goodsPicture.join(","),type:"货物图片",goodsPicture:w})}if(e.docPicture!=null&&e.docPicture.length>0){var f=[];e.docPicture.forEach(t=>{f.push(r+t)}),h.value.push({picNo:e.docPicture.join(","),type:"安装图片",goodsPicture:f})}if(e.checkInPicture!=null&&e.checkInPicture.length>0){var v=[];e.checkInPicture.forEach(t=>{v.push(r+t)}),h.value.push({picNo:e.checkInPicture.join(","),type:"打卡签到",goodsPicture:v})}if(e.scenePicture!=null&&e.scenePicture.length>0){var g=[];e.scenePicture.forEach(t=>{g.push(r+t)}),h.value.push({picNo:e.scenePicture.join(","),type:"现场墙面保护",goodsPicture:g})}if(e.afterInstallPicture!=null&&e.afterInstallPicture.length>0){var x=[];e.afterInstallPicture.forEach(t=>{x.push(r+t)}),h.value.push({picNo:e.afterInstallPicture.join(","),type:"安装后图片",goodsPicture:x})}if(e.completePicture!=null&&e.completePicture.length>0){var y=[];e.completePicture.forEach(t=>{y.push(r+t)}),h.value.push({picNo:e.completePicture.join(","),type:"完工证明",goodsPicture:y})}i&&b({message:"查询成功",type:"success"})}else i&&b({message:"获取数据失败",type:"error"})}).catch(p=>{b({message:"请求数据失败，请重试",type:"error"}),console.error("请求数据失败:",p)})},M=i=>{Q({userType:1,name:"",phone:""}).then(p=>{let e=p.data.data;e!=null&&e.length>0?(E.value=e,i&&b({message:"查询成功",type:"success"})):i&&b({message:"获取数据失败",type:"error"})})};return(i,l)=>{var f,v,g,x,y;const p=N("el-table-column"),e=N("el-image"),r=N("el-table"),w=N("el-button");return C(),I("div",os,[s("span",ns,[cs,s("span",ls,[s("span",{class:"item",onClick:l[0]||(l[0]=t=>m(0))},[s("span",{class:u(_.value==0?"num_selected":"num")},"1",2),s("span",{class:u(_.value>=0?"name_selected":"name")},"待开始",2)]),s("span",{class:"item",onClick:l[1]||(l[1]=t=>m(1))},[s("span",{class:u(_.value==1?"num_selected":"num")},"2",2),s("span",{class:u(_.value>=1?"name_selected":"name")},"进行中",2)]),s("span",{class:"item",onClick:l[2]||(l[2]=t=>m(2))},[s("span",{class:u(_.value==2?"num_selected":"num")},"3",2),s("span",{class:u(_.value>=2?"name_selected":"name")},"已完成",2)]),s("span",{class:"item",onClick:l[3]||(l[3]=t=>m(3))},[s("span",{class:u(_.value==3?"num_selected":"num")},"4",2),s("span",{class:u(_.value>=3?"name_selected":"name")},"已评价",2)])])]),s("span",is,[ds,s("span",_s,[s("span",ps,[s("span",rs,[us,s("span",hs,c(n(o).caseNo),1),X("",!0)]),s("span",ms,[fs,s("span",vs,c(n(o).fieldJobType__c?(f=L.value.find(t=>t.code==n(o).fieldJobType__c))==null?void 0:f.name:"配送派工单"),1)]),s("span",gs,[xs,s("span",ys,c(n(o).stage__c?(v=V.value.find(t=>t.code==n(o).stage__c))==null?void 0:v.name:"待开始"),1)])]),s("span",bs,[s("span",Ps,[Cs,s("span",ks,c(n(o).followerId?(g=E.value.find(t=>t.id==n(o).followerId))==null?void 0:g.name:""),1)]),s("span",ws,[Is,s("span",Ns,c(n(o).followerId?(x=E.value.find(t=>t.id==n(o).followerId))==null?void 0:x.phone:""),1)]),s("span",Es,[Ss,s("span",Ts,c(n(o).address),1)])]),s("span",Bs,[s("span",Ds,[js,s("span",Js,c(n(o).fieldJobContactName),1)]),s("span",Fs,[Ls,s("span",Vs,c(n(o).contactTelephone),1)])])]),$s,s("span",Ms,[s("span",Os,[s("span",Gs,[qs,s("span",zs,c(n(o).appointmentStartTime),1)]),s("span",As,[Hs,s("span",Rs,c(n(o).appointmentEndTime),1)]),s("span",Ws,[Ys,s("span",Ks,c(n(o).priority?(y=F.value.find(t=>t.code==n(o).priority))==null?void 0:y.name:""),1)])]),s("span",Qs,[s("span",Xs,[Zs,s("span",Us,c(n(o).whetherEvaluation===!1?"否":"是"),1)])])])]),s("span",se,[ee,s("span",te,[P(r,{data:h.value,stripe:!1,style:{width:"100%"},"max-height":"100"},{default:S(()=>[P(p,{prop:"picNo",label:"附件编号"}),P(p,{prop:"type",label:"类型"}),P(p,{prop:"text3",label:"附件链接"},{default:S(({row:t})=>[(C(!0),I(D,null,j(t.goodsPicture,(O,G)=>(C(),es(e,{key:G,style:{"margin-right":"5px",width:"50px"},src:O,"preview-src-list":t.goodsPicture},null,8,["src","preview-src-list"]))),128))]),_:1})]),_:1},8,["data"])])]),s("span",ae,[s("div",{class:"left"},[oe,s("span",{class:"initiate_comments",onClick:B},"发起任务评论")]),s("div",ne,[P(w,{type:"primary",onClick:B,class:"primary_btn"},{default:S(()=>[ts("编辑")]),_:1})])]),(C(!0),I(D,null,j(T.value,t=>(C(),I("div",{class:"comment",key:t.date},[s("div",ce,[le,s("span",ie,c(t.userName),1)]),s("div",de,c(t.text),1),s("div",_e,c(t.date),1),pe,re]))),128))])}}}),fe=as(ue,[["__scopeId","data-v-1fdd0c66"]]);export{fe as default};
