import{_ as B,a as U,b as O}from"./logoXX-KcEG4fMf.js";import{_ as R}from"./download-Dan4AgsM.js";import{r as T}from"./common-DvLzv8E6.js";import{d as $,g as L,a as M,r as v,o as Q,A as Z,E as S,c as N,h as l,j as b,b as e,w as o,e as p,p as G,f as K,i as C,F as Y,q as F,x as W,t as q,_ as j}from"./index-CYx_7u_I.js";import"./userinfo-CGvVdpj9.js";const J="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAPCAYAAADQ4S5JAAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAACFSURBVCiR3ZKxDcIwEEWfLZcp0sMgLtgAtmAOKsZJyQApQkvBBAxBi/RoHCmKRGS3POmKu3v/qoOCmtSzOqnvUlOZJZaonTr6m1HtloHbhjwzzHKukGdyBE7Uc4zAriGwjw0yAP8S6Bv8PgEP4FkZ+IT1RL0Ch9LeQwiXzRPlVV6l8nr/BYGarc4yhMG+AAAAAElFTkSuQmCC",g=A=>(G("data-v-2c6a0bd1"),A=A(),K(),A),X={class:"main"},ee={class:"header"},te=g(()=>l("span",{class:"title"},"售后工单",-1)),ae=g(()=>l("img",{src:J,alt:""},null,-1)),oe={class:"search"},le={class:"left"},se=g(()=>l("span",{style:{width:"336px",height:"32px"}},null,-1)),ne={class:"right"},re=g(()=>l("img",{src:U,alt:""},null,-1)),ce=g(()=>l("img",{src:O,alt:""},null,-1)),ie={class:"table_header"},de=g(()=>l("span",{class:"left"},[l("img",{src:B,alt:""}),l("span",{class:"title"})],-1)),pe={class:"right"},ue=g(()=>l("img",{src:R,alt:""},null,-1)),me={style:{display:"flex","align-items":"center"}},_e=["onClick"],he=$({__name:"index",setup(A){const{proxy:E}=L(),t=M({workNo:"",customerName:"",customerPhone:"",filterMethod:"",createDate:[],orderStatus:""});v([{value:"all",label:"全部"}]);const V=v([{code:"",name:"全部"},{code:"1",name:"开始"},{code:"2",name:"已提报问题"},{code:"3",name:"售后审核"},{code:"4",name:"已定损"},{code:"5",name:"定责发起"},{code:"6",name:"已提交OA审批"},{code:"7",name:"已追责"},{code:"8",name:"已追责"},{code:"8",name:"结束"}]),f=v({pageIndex:1,pageSize:15,total:0}),k=v([]),_=v(null);Q(()=>{w(!1);const c="100%"/"100%";if(window.addEventListener("resize",Z.debounce(function(){const i=document.body.clientHeight,d=document.body.clientWidth;if(d<1680){const n=i/d;let[r,y]=[0,0];if(n<c){r=i/1080;const u=1920*r,h=d-u;y=h>0?`translate(${h/2}px, 0)`:""}else{r=(d-20)/1920;const u=1080*r,h=i-u;y=h>0?`translate(0, ${h/2}px)`:""}if(n<.52){let u=document.body.clientHeight/r-242*r-10;_.value&&(_.value.style.height=`${u}px`)}else if(_.value){let u=document.body.clientHeight*r+242*r+10;_.value.style.height=`${u}px`}}else _.value&&(_.value.style.height=`calc(${document.body.clientHeight}px - 242px)`)},66)),document.createEvent){var s=document.createEvent("HTMLEvents");s.initEvent("resize",!0,!0),window.dispatchEvent(s)}else typeof Event=="function"&&window.dispatchEvent(new Event("resize"))});const w=c=>{console.log(t);const s=t.customerName==null?"":t.customerName,i=t.customerPhone==null?"":t.customerPhone;let d={customerName:s,customerPhone:i,status:t.orderStatus,from:t.createDate==null||t.createDate[0]==null?"":t.createDate[0]+" 00:00:00",to:t.createDate==null||t.createDate[1]==null?"":t.createDate[1]+" 23:59:59",pageSize:f.value.pageSize,pageNo:f.value.pageIndex};T(d).then(n=>{let r=n.data.data;r.length>0?(k.value=r,c&&S({message:"查询成功",type:"success"})):S({message:"暂无数据",type:"warning"}),f.value={pageIndex:n.data.current==null?1:parseInt(n.data.current),pageSize:n.data.size,total:n.data.total}}).catch(n=>{S({message:"请求数据失败，请重试",type:"error"}),console.error("请求数据失败:",n)})},z=c=>{E.$router.push({path:"/aftersales_workorder_details",query:{id:c.id}})},D=c=>{f.value.pageIndex=c,w(!0)};return(c,s)=>{const i=p("el-button"),d=p("el-input"),n=p("el-form-item"),r=p("el-form"),y=p("el-date-picker"),u=p("el-option"),h=p("el-select"),m=p("el-table-column"),I=p("el-table"),P=p("el-pagination");return C(),N("div",X,[l("span",ee,[te,b(),e(i,{type:"primary",class:"tips_btn"},{icon:o(()=>[ae]),default:o(()=>[b("售后工单草稿箱")]),_:1})]),l("span",oe,[l("span",le,[e(r,{model:t,rules:c.rule,"label-width":"80px","label-position":"left"},{default:o(()=>[e(n,{label:"工单编号"},{default:o(()=>[e(d,{placeholder:"请输入工单编号",modelValue:t.workNo,"onUpdate:modelValue":s[0]||(s[0]=a=>t.workNo=a)},null,8,["modelValue"])]),_:1}),e(n,{label:"客户名称"},{default:o(()=>[e(d,{placeholder:"输入客户名称",modelValue:t.customerName,"onUpdate:modelValue":s[1]||(s[1]=a=>t.customerName=a)},null,8,["modelValue"])]),_:1}),e(n,{label:"客户电话"},{default:o(()=>[e(d,{placeholder:"请输入客户电话",modelValue:t.customerPhone,"onUpdate:modelValue":s[2]||(s[2]=a=>t.customerPhone=a)},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"]),e(r,{model:t,rules:c.rule,"label-width":"80px","label-position":"left"},{default:o(()=>[e(n,{label:"创建时间"},{default:o(()=>[e(y,{modelValue:t.createDate,"onUpdate:modelValue":s[3]||(s[3]=a=>t.createDate=a),type:"daterange","range-separator":"~","start-placeholder":"开始时间","end-placeholder":"结束时间","value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1}),e(n,{label:"售后状态"},{default:o(()=>[e(h,{modelValue:t.orderStatus,"onUpdate:modelValue":s[4]||(s[4]=a=>t.orderStatus=a),placeholder:"请选择售后状态"},{default:o(()=>[(C(!0),N(Y,null,F(V.value,a=>(C(),W(u,{key:a.code,label:a.name,value:a.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),se]),_:1},8,["model","rules"])]),l("span",ne,[e(i,{type:"primary",onClick:s[5]||(s[5]=a=>w(!1)),class:"search_btn"},{icon:o(()=>[re]),default:o(()=>[b("查询")]),_:1}),e(i,{type:"primary",class:"reset_btn"},{icon:o(()=>[ce]),default:o(()=>[b("重置")]),_:1})])]),l("span",ie,[de,l("span",pe,[e(i,{type:"primary",class:"reset_btn"},{icon:o(()=>[ue]),default:o(()=>[b("下载")]),_:1})])]),l("span",{class:"table",ref_key:"mainTable",ref:_},[e(I,{class:"table_content",data:k.value,stripe:!1,style:{width:"100%"}},{default:o(()=>[e(m,{prop:"name",label:"售后工单编号"}),e(m,{prop:"storeName",label:"专卖店名称"}),e(m,{prop:"productionOrderNo__c",label:"生产单号"}),e(m,{prop:"accountName",label:"客户名称"}),e(m,{prop:"text5",label:"处理方式"}),e(m,{prop:"createdTime",label:"创建时间"}),e(m,{prop:"status__c",label:"售后状态"},{default:o(a=>{var x;return[l("div",me,q(a.row.status__c?(x=V.value.find(H=>H.code==a.row.status__c))==null?void 0:x.name:""),1)]}),_:1}),e(m,{prop:"text8",label:"操作",width:"80px"},{default:o(a=>[l("div",{style:{display:"flex","align-items":"center",color:"#165dff",cursor:"pointer"},onClick:x=>z(a.row)}," 查看 ",8,_e)]),_:1})]),_:1},8,["data"]),e(P,{class:"table_pagination","page-size":f.value.pageSize,"pager-count":15,layout:"total, prev, pager, next",total:f.value.total,onCurrentChange:D},null,8,["page-size","total"])],512)])}}}),ye=j(he,[["__scopeId","data-v-2c6a0bd1"]]);export{ye as default};
