import{_ as ra,a as ua,b as pa}from"./tips-DfmWQaVF.js";import{_ as ma}from"./add-CRTT_dyr.js";import{d as _a,g as va,r as d,B as fa,a as ge,k as ha,M as ba,T as Z,U as ee,c as C,b as e,e as t,w as n,v as V,t as b,q,F as x,A as w,G as ya,E as O,H as ga,V as Ca,N as ka,f as T,p as Va,h as xa,o as u,i as f,n as g,x as h,y as Ta,W as Ia,C as Da,X as wa,I as Sa,_ as Na}from"./index-W4iu8axL.js";const c=F=>(Va("data-v-8496dcf8"),F=F(),xa(),F),Pa={class:"main"},La={class:"header"},Ua={class:"title"},qa=c(()=>e("span",null,"问题提报状态",-1)),Oa={class:"step"},$a={class:"item"},Ea={class:"item"},Ja={class:"item"},Ba={class:"problem_report_info"},Ma=c(()=>e("span",{class:"title"},"问题提报详情",-1)),Fa={class:"main_field"},ja={class:"row_field"},Ra={class:"field"},Ya=c(()=>e("span",{class:"label"},"问题编号：",-1)),Aa={class:"value"},za={class:"field"},Ha=c(()=>e("span",{class:"label"},"专卖店名称：",-1)),Wa={class:"value"},Ga={class:"field"},Xa=c(()=>e("span",{class:"label"},"问题类别：",-1)),Ka={class:"value"},Qa={class:"row_field"},Za={class:"field"},el=c(()=>e("span",{class:"label"},"订单编号：",-1)),al={class:"value"},ll={class:"field"},tl=c(()=>e("span",{class:"label"},"负责人：",-1)),sl={class:"value"},ol={class:"field"},nl=c(()=>e("span",{class:"label"},"创建时间：",-1)),dl={class:"value"},cl={class:"row_field"},il={class:"field"},rl=c(()=>e("span",{class:"label"},"问题描述：",-1)),ul={class:"value"},pl=c(()=>e("span",{class:"title"},"其他字段",-1)),ml={class:"other_field"},_l={class:"row_field"},vl={class:"field"},fl=c(()=>e("span",{class:"label"},"客户姓名：",-1)),hl={class:"value"},bl={class:"field"},yl=c(()=>e("span",{class:"label"},"客户手机号：",-1)),gl={class:"value"},Cl={class:"field"},kl=c(()=>e("span",{class:"label"},"来源：",-1)),Vl={class:"value"},xl={class:"row_field"},Tl={class:"field"},Il=c(()=>e("span",{class:"label"},"省份：",-1)),Dl={class:"value"},wl={class:"field"},Sl=c(()=>e("span",{class:"label"},"城市：",-1)),Nl={class:"value"},Pl={class:"field"},Ll=c(()=>e("span",{class:"label"},"区：",-1)),Ul={class:"value"},ql={class:"row_field"},Ol={class:"field"},$l=c(()=>e("span",{class:"label"},"经销商内部提报：",-1)),El={class:"field"},Jl=c(()=>e("span",{class:"label"},"提报人：",-1)),Bl={class:"value"},Ml={class:"field"},Fl=c(()=>e("span",{class:"label"},"提报人电话：",-1)),jl={class:"value"},Rl={class:"related_documents"},Yl=c(()=>e("span",{class:"title"},"相关单据",-1)),Al={class:"action_list"},zl=c(()=>e("img",{src:ra,alt:""},null,-1)),Hl={class:"right"},Wl={class:"userinfo"},Gl=c(()=>e("img",{src:ua,alt:""},null,-1)),Xl={class:"username"},Kl={class:"content"},Ql={class:"date"},Zl=c(()=>e("span",{class:"reply"},"回复",-1)),et=c(()=>e("img",{class:"tips",src:pa,alt:""},null,-1)),at={class:"showMainDialog"},lt={class:"step"},tt={class:"item"},st=c(()=>e("span",{class:"name"},[f("确认问题订单 "),e("span",{class:"remark"},"选择或确认问题订单")],-1)),ot={class:"item"},nt=c(()=>e("span",{class:"name"},[f("完善必填信息 "),e("span",{class:"remark"},"完善问题描述与处理方式")],-1)),dt={class:"item"},ct=c(()=>e("span",{class:"name"},[f("提交升级 "),e("span",{class:"remark"},"提交售后至总部")],-1)),it={class:"form_row"},rt=c(()=>e("span",{class:"label required"},"订单编号",-1)),ut={class:"form_row"},pt=c(()=>e("span",{class:"label"},"升级备注",-1)),mt={class:"desc_action"},_t=c(()=>e("span",{class:"desc"},"搜索和选择/批量编辑问题产品",-1)),vt={class:"action"},ft={class:"search"},ht={class:"filter_list"},bt={class:"table"},yt={style:{display:"flex","align-items":"center"}},gt={style:{display:"flex","align-items":"center"}},Ct={class:"responsibilityPerson"},kt=c(()=>e("span",{class:"label required"},"问题大类",-1)),Vt=c(()=>e("span",{class:"label required"},"售后问题",-1)),xt=c(()=>e("span",{class:"label required"},"责任人",-1)),Tt={class:"responsibilityPerson"},It=c(()=>e("span",{class:"label required"},"问题描述",-1)),Dt=c(()=>e("div",{class:"responsibilityPerson"},[e("span",{class:"label"},"上传文件")],-1)),wt={class:"containerUpload"},St={class:"item"},Nt=c(()=>e("div",{class:"el-upload__text"},"将文件拖至此处 或 点击上传",-1)),Pt=c(()=>e("div",{class:"el-upload__tip"}," jpg/png files with a size less than 500kb ",-1)),Lt={class:"dialog-footer"},Ut={class:"deliveryOrderDialog"},qt={class:"step"},Ot={class:"item"},$t=c(()=>e("span",{class:"remark"},"选择配送货品的司机",-1)),Et={class:"item"},Jt=c(()=>e("span",{class:"remark"},"如有,请填写关键备注",-1)),Bt={class:"item"},Mt=c(()=>e("span",{class:"remark"},"等待司机配送",-1)),Ft={class:"content"},jt=c(()=>e("span",{class:"custom_item"},[e("img",{src:ma,alt:""})],-1)),Rt={class:"dialog-footer"},Yt={class:"relatedDocumentsDialog"},At={class:"content"},zt={class:"tableItem"},Ht=c(()=>e("span",{class:"tableTitle"}," 1. 售后工单 ",-1)),Wt={class:"tableContent"},Gt=["onClick"],Xt={class:"tableItem"},Kt=c(()=>e("span",{class:"tableTitle"}," 2. 派工单 ",-1)),Qt={class:"tableContent"},Zt=["onClick"],es={class:"dialog-footer"},as=_a({__name:"index",setup(F){const{proxy:N}=va(),ae=d([]),I=d(1),D=fa(),le=d(D.query.id),j=d(D.query.neoid);let R="";const Ce=D.query.status!=null?parseInt(D.query.status.toString(),0)+1:1,Y=d(!1),te=d([]),H=d([]),ke=d([]),B=d(!1),$=d([]);d([]);const m=d({}),se=d([]),oe=d([]),ne=d([]);let A="";const _=d({orderNo:"",remark:"",searchValue:"",orderType:"1",productType:"1",productModel:"1",treeSpecies:"1",paintColor:"1",size:"1"}),k=d({serviceTicketId:0,problemType:"",afterSalesIssues:[],responsiblePerson:"",problemDesc:"",fileList:[],poductType:"",componentType:"",badType:"",qualityIndicator1:"",qualityIndicator2:"",handleWay:""}),Ve=d([{label:"全部订单",value:"1"}]),xe=d([{label:"产品大类",value:"1"}]),Te=d([{label:"产品型号",value:"1"}]),Ie=d([{label:"树种",value:"1"}]),De=d([{label:"油漆颜色",value:"1"}]),we=d([{label:"尺寸",value:"1"}]),z=d([]),Se=o=>{z.value=z.value.concat(o.data.map(l=>l.fileId))},Ne=d(),Pe=d([]),Le=o=>{console.info("选择的数据：",o),Pe.value=o};d([{text1:"CS0011-06665-01",text2:"门套",text3:"示例字段...",text4:"混油米灰1#",text5:"2021-02-28 10:30:50",text6:""},{text1:"CS0011-06665-01",text2:"门套",text3:"示例字段...",text4:"混油米灰1#",text5:"2021-02-28 10:30:50",text6:""},{text1:"CS0011-06665-01",text2:"门套",text3:"示例字段...",text4:"混油米灰1#",text5:"2021-02-28 10:30:50",text6:""},{text1:"CS0011-06665-01",text2:"门套",text3:"示例字段...",text4:"混油米灰1#",text5:"2021-02-28 10:30:50",text6:""}]),d([{text1:"SU2024030101",text2:"已评价",text3:"其他",text4:"满意",text5:"2021-02-28 10:30:50",text6:""}]);const de=d([{code:"1",name:"经销商问题"},{code:"2",name:"公司问题"},{code:"3",name:"物流问题"}]),ce=d([{code:"1",name:"店面测量师漏单"},{code:"2",name:"店面测量师量错"},{code:"3",name:"店里设计师漏分解"},{code:"4",name:"店里设计师分解错"},{code:"5",name:"店里设计不合理"},{code:"6",name:"店里下单员漏单"},{code:"7",name:"店里下单员下错"},{code:"8",name:"店里安装师问题"},{code:"9",name:"消费者补单"},{code:"10",name:"消费者使用不当"},{code:"11",name:"产品丢失"}]);d([{code:"1",name:"墙板"},{code:"2",name:"线条"},{code:"3",name:"五金"},{code:"4",name:"门套"},{code:"5",name:"门扇"},{code:"6",name:"柜体"},{code:"7",name:"柜门"},{code:"8",name:"玻璃"},{code:"9",name:"挂板"},{code:"10",name:"罗马柱"},{code:"11",name:"帽头"},{code:"12",name:"装饰块"},{code:"13",name:"雕花件"},{code:"14",name:"色板"},{code:"15",name:"整单"},{code:"16",name:"入户门"}]),d([{code:"1",name:"边梃"},{code:"2",name:"挂线条"},{code:"3",name:"芯板"},{code:"4",name:"金属条"},{code:"5",name:"码头"},{code:"6",name:"封边"},{code:"7",name:"L边"},{code:"8",name:"整体"},{code:"9",name:"面板执手"},{code:"10",name:"锁体"},{code:"11",name:"铰链"},{code:"12",name:"铰链底座"},{code:"13",name:"灯带"},{code:"14",name:"抽屉轨道"},{code:"15",name:"三合一"},{code:"16",name:"其他五金"},{code:"17",name:"档条"},{code:"18",name:"密封条"},{code:"19",name:"套板"},{code:"20",name:"门套"},{code:"21",name:"玻璃"},{code:"22",name:"门标"},{code:"23",name:"门芯板"},{code:"24",name:"配件"},{code:"25",name:"五金配件"},{code:"26",name:"8属边"},{code:"27",name:"背板"},{code:"28",name:"层板"},{code:"29",name:"抽屉板"},{code:"30",name:"底板"},{code:"31",name:"顶板"},{code:"32",name:"台面板"},{code:"33",name:"立板"},{code:"34",name:"侧板"},{code:"35",name:"踢脚板"},{code:"36",name:"五金件"},{code:"37",name:"挂板"},{code:"38",name:"罗马柱"},{code:"39",name:"帽头"},{code:"40",name:"装饰块"},{code:"41",name:"雕花件"},{code:"42",name:"色板"},{code:"43",name:"整单"},{code:"44",name:"修补漆"},{code:"45",name:"入户门扇"}]),d([{code:"1",name:"消费者"},{code:"2",name:"经销商"},{code:"3",name:"订单分解"},{code:"4",name:"备料"},{code:"5",name:"加工"},{code:"6",name:"免漆加工"},{code:"7",name:"油漆"},{code:"8",name:"少货"},{code:"9",name:"包装问题"},{code:"10",name:"五金问题"},{code:"11",name:"辅料问题"},{code:"12",name:"仓库发货"},{code:"13",name:"物流送达"},{code:"14",name:"系统问题"},{code:"15",name:"新品设计问题"},{code:"16",name:"隔音等级"},{code:"17",name:"受潮"},{code:"18",name:"无法提供证明的少货"},{code:"19",name:"交期延误"},{code:"20",name:"霉变"},{code:"21",name:"气味"},{code:"22",name:"长虫"},{code:"23",name:"过质保期"},{code:"24",name:"变色"},{code:"25",name:"入户门问题"}]),d({}),d([{code:"1",name:"订单分解错"},{code:"2",name:"订单漏分解"},{code:"3",name:"变形"}]),d([{code:"1",name:"漏备注"},{code:"2",name:"产品漏分解"},{code:"3",name:"配件漏分解"},{code:"4",name:"五金漏分解"},{code:"5",name:"孔位漏分解"}]),d([{label:"处理方式",value:"1"}]);const ie=d([]),Ue=d([{code:"1",name:"配送技工"},{code:"2",name:"安装技工"},{code:"3",name:"终端用户"},{code:"4",name:"经销商"}]),qe=d([{code:"0",name:"配送派工"},{code:"1",name:"安装派工"},{code:"2",name:"维修"}]),Oe=d([{code:"1",name:"最高"},{code:"2",name:"高"},{code:"3",name:"中"},{code:"4",name:"低"}]),L=d(1),E=d(!1),$e=d(!1),Ee=d(1),Je=()=>{B.value=!0},re=d({files:[],name:"files"}),Be=o=>{re.value.files=[o]};d({value1:"1",value2:"1",value3:"1",value4:"1",value5:"1",value6:"1"});const Me=()=>{I.value=2},W=d({taskid:D.query.id,serviceCaseNeoId:D.query.serviceCaseId,orderId:D.query.orderId,taskStatus:Ce,accountName:D.query.accountName,distributorName:D.query.distributorName,followerName:D.query.followerName,createdTime:D.query.createdTime,createdBy:D.query.createdBy});let i=ge({fieldJobContactName:"",contactTelephone:"",priority:"",type:"2",remark:"",appointmentStartTime:"",appointmentEndTime:"",haveInstallConditions:!1,fieldJobOrderId:D.query.orderId,fieldJobType__c:0,stage__c:0,name:W.value.accountName+"的配送派工单",fileList:[],filePath:[],followerId:null,address:""});const ue=ge({followerId:[{required:!0,message:"Please input username",trigger:"blur"}],fieldJobContactName:[{required:!0,message:"Please input username",trigger:"blur"}],contactTelephone:[{required:!0,message:"Please input phone",trigger:"blur"}],priority:[{required:!0,message:"Please input priority",trigger:"blur"}],appointmentStartTime:[{required:!0,message:"Please input appointment start time",trigger:"blur"}],appointmentEndTime:[{required:!0,message:"Please input appointment end time",trigger:"blur"}]}),Fe=o=>{o.response},je=o=>{if(o.code=="success"){let l=o.data.map(s=>s.fileId);l[0]&&i.filePath.push(l[0])}};d({files:[],name:"files"});const Re=d({Content:"application/json",Authorization:"",isImage:"true",needFileId:"true","Trace-Id":""}),Ye=o=>{ya({userType:1,name:"",phone:""}).then(s=>{let r=s.data.data;r!=null&&r.length>0?(H.value=r,o&&O({message:"查询成功",type:"success"})):o&&O({message:"获取数据失败",type:"error"})})},Ae=o=>{let l=H.value.find(s=>s.id==o);l&&(i.fieldJobContactName=l.name,i.contactTelephone=l.phone)};d([]);const pe=d([]);ha(()=>{ze(),Ke(),Qe(),Ze(),He(),Ye(!1)});const ze=()=>{ba({id:le.value,neoid:j.value==null?"":j.value}).then(o=>{let l=o.data;l.code=="success"?(m.value=l.data,_.value.orderNo=m.value.caseNo,console.log("wenti:"),console.log(l.data.caseNo),ca(l.data.caseNo)):N.$message.error(l==null?void 0:l.message)})},G=o=>{I.value=o},He=()=>{Z({deliveryDate:"",status__c:"",orderType__c:"",transactionDate:"",po:"",accountName:"",accountPhone:""}).then(l=>{let s=l.data;s.code=="success"?te.value=s.data:N.$message.error(s==null?void 0:s.message)})},We=()=>{E.value=!0},X=o=>{L.value=o},me=o=>{Ee.value=o,E.value=!1,$e.value=!0},Ge=()=>{_.value.orderNo?(L.value=2,ea(_.value.orderNo)):N.$message.error("订单号不能为空!")},Xe=()=>{console.info("fileIdfileId",z);const o=$.value.filter(s=>s.checked);if(console.info("过滤：",o.id),o.length<=0){N.$message.error("必须勾选数据!");return}o.forEach(s=>{s.picture=z.value,s.orderProductId=s.id,s.treeSpecies=s.treeSpecies__c,s.category=s.category1,s.paintColor=s.paintColor__c,s.ticketClassification=k.value.problemType,s.ticketProblem=k.value.afterSalesIssues,s.personLiable=k.value.responsiblePerson,s.descriptionOfTicketProblem=k.value.problemDesc,s.id=""});let l={serviceCaseId:parseInt(R),details:o};A!=""&&(l.id=A),console.info("selectDataselectData",o),!k.value.problemType||!k.value.afterSalesIssues||!k.value.responsiblePerson||!k.value.problemDesc?N.$message.error("必填选项不能为空!"):(N.$message.success("提交成功!"),setTimeout(()=>{E.value=!1,Ia(l).then(s=>{console.log(s);let r=s.data.data;r!=null&&(A=r.id)})},500))},_e=()=>{ga.prompt("请填写评论内容","发起评论",{inputPattern:/\S/,inputErrorMessage:"评论内容不能为空!",confirmButtonText:"确认",cancelButtonText:"取消"}).then(({value:o})=>{ae.value.push({userName:"经销商",text:o,date:new Date().toLocaleString()})}).catch(()=>{})},Ke=()=>{ee("province").then(o=>{let l=o.data;l.code=="success"&&(se.value=l.data)})},Qe=()=>{ee("city").then(o=>{let l=o.data;l.code=="success"&&(oe.value=l.data)})},Ze=()=>{ee("district").then(o=>{let l=o.data;l.code=="success"&&(ne.value=l.data)})},ea=o=>{Z({po:o}).then(s=>{s.data.code=="success"?Da(s.data.data[0].id).then(r=>{$.value=r.data.data.items,R=parseInt(j.value),$.value.forEach(v=>{v.checked=!1,v.orderId=_.value.orderNo}),wa(R).then(v=>{if(v.data.code=="success"){console.info("getTicketSolutionBycaseId",v),console.info("caseneoId",R);let y=v.data.details;y==null&&(y=v.data.data.details),v.data.data!=null&&(A=v.data.data.id),y&&y.length>0?($.value.forEach(S=>{let p=y.find(M=>S.id==M.orderProductId);p&&(S.descriptionOfTicketProblem=p.descriptionOfTicketProblem,S.ticketClassification=p.ticketClassification,S.ticketProblem=p.ticketProblem,S.responsibleSubject=p.responsibleSubject)}),console.log("new Date",$)):console.info("details没数据")}else console.info("接口请求失败"),N.$message.error("接口请求失败!")})}):N.$message.error("数据异常!")})},aa=o=>{N.$router.push({path:"/aftersales_workorder_details",query:{id:1}})},la=o=>{N.$router.push({path:"/dispatch_details",query:{id:69}})},ta=()=>{Y.value=!0,Ca(j.value).then(o=>{let l=o.data;if(l.code=="success"){if(l.data&&typeof l.data=="object"){let s=[{serviceTicketId:l.data.serviceTicketId,status:l.data.status}];pe.value=s}}else O({message:"请求失败，请重试;",type:"error"})}).catch(o=>{O({message:"请求失败，请重试!",type:"error"})}),ka(le.value).then(o=>{let l=o.data;if(l.data&&typeof l.data=="object"){let s=[{}];ie.value=s}else O({message:"请求失败，请重试",type:"error"})}).catch(o=>{O({message:"请求失败，请重试!!",type:"error"})})},sa=()=>{let o=i;o.fieldJobContactName=W.value.accountName==null?"":W.value.accountName.toString(),console.log(J),o.fieldJobOrderId=J.value[0].id,o.contactTelephone=J.value[0].contactTel,o.fieldJobContactName=J.value[0].accountName__C,o.name=J.value[0].accountName__C+"的维修派工单",o.picture=o.filePath,o.goodsPicture=o.filePath,Sa(o).then(l=>{let s=l.data.data;ke.value.push(s),s!=null?O({message:"新增派工单成功",type:"success"}):O({message:"新增派工单失败",type:"error"}),Object.keys(i).forEach(r=>{!r.includes("type")&&!r.includes("haveInstallConditions")&&r!=="fieldJobOrderId"&&r!=="fieldJobType__c"&&r!=="stage__c"&&r!=="name"&&(i[r]=""),r==="haveInstallConditions"&&(i[r]=!1),(r=="fileList"||r=="filePath")&&(i[r]=[])})}).catch(l=>{O({message:"请求新增派工单失败，请重试",type:"error"}),Object.keys(i).forEach(s=>{s!=="type"&&s!=="haveInstallConditions"&&s!=="fieldJobOrderId"&&s!=="fieldJobType__c"&&s!=="stage__c"&&s!=="name"&&(i[s]=""),s=="haveInstallConditions"&&(i[s]=!1),(s=="fileList"||s=="filePath")&&(i[s]=[])}),console.error("请求新增派工单失败:",l)}),B.value=!1,I.value=1},oa=o=>{let l=se.value.find(s=>s.optionCode==o);return o&&l?l.optionLabel:""},na=o=>{let l=oe.value.find(s=>s.optionCode==o);return o&&l?l.optionLabel:""},da=o=>{let l=ne.value.find(s=>s.optionCode==o);return o&&l?l.optionLabel:""},J=d({}),ca=o=>{Z({deliveryDate:"",status__c:"",orderType__c:"",transactionDate:"",po:o,accountName:"",accountPhone:""}).then(s=>{let r=s.data;r.code=="success"?(J.value=r.data,i.fieldJobOrderId=r.data.id,i.contactTelephone=r.data.contactTel,i.fieldJobContactName=r.data.accountName__C,i.name=r.data.accountName__C+"的维修派工单"):N.$message.error(r==null?void 0:r.message)})};return(o,l)=>{var ye;const s=T("el-button"),r=T("el-checkbox"),v=T("el-option"),y=T("el-select"),S=T("el-input"),p=T("el-table-column"),M=T("el-table"),ia=T("upload-filled"),ve=T("el-icon"),fe=T("el-upload"),K=T("el-dialog"),U=T("el-form-item"),he=T("el-date-picker"),be=T("el-form");return u(),C("div",Pa,[e("span",La,[e("span",Ua,[qa,t(s,{class:"btn",onClick:We},{default:n(()=>[f("升级到总部 (售后)")]),_:1})]),e("span",Oa,[e("span",$a,[e("span",{class:V(m.value.clientCaseStatusC==1?"num_selected":"num")},"1",2),e("span",{class:V(m.value.clientCaseStatusC>=1?"name_selected":"name")},"待处理",2)]),e("span",Ea,[e("span",{class:V(m.value.clientCaseStatusC==2?"num_selected":"num")},"2",2),e("span",{class:V(m.value.clientCaseStatusC>=2?"name_selected":"name")},"处理中",2)]),e("span",Ja,[e("span",{class:V(m.value.clientCaseStatusC==3?"num_selected":"num")},"3",2),e("span",{class:V(m.value.clientCaseStatusC>=3?"name_selected":"name")},"已完成",2)])])]),e("span",Ba,[Ma,e("span",Fa,[e("span",ja,[e("span",Ra,[Ya,e("span",Aa,b(m.value.caseNo),1),q("",!0)]),e("span",za,[Ha,e("span",Wa,b(m.value.storeName),1)]),e("span",Ga,[Xa,e("span",Ka,b(m.value.questionType=="1"?"售后保修":"投诉建议"),1)])]),e("span",Qa,[e("span",Za,[el,e("span",al,b(m.value.orderNeoId),1)]),e("span",ll,[tl,e("span",sl,b(m.value.responsibleSubject),1)]),e("span",ol,[nl,e("span",dl,b(m.value.createdTime),1)])]),e("span",cl,[e("span",il,[rl,e("span",ul,b(m.value.problemDescription),1)])])]),pl,e("span",ml,[e("span",_l,[e("span",vl,[fl,e("span",hl,b(m.value.caseAccountName),1)]),e("span",bl,[yl,e("span",gl,b(m.value.caseAccountPhone),1)]),e("span",Cl,[kl,e("span",Vl,b(m.value.complaintSourceC?(ye=Ue.value.find(a=>a.code==m.value.complaintSourceC))==null?void 0:ye.name:""),1)])]),e("span",xl,[e("span",Tl,[Il,e("span",Dl,b(oa(m.value.province)),1)]),e("span",wl,[Sl,e("span",Nl,b(na(m.value.city)),1)]),e("span",Pl,[Ll,e("span",Ul,b(da(m.value.district)),1)])]),e("span",ql,[e("span",Ol,[$l,t(r,{modelValue:o.checked1,"onUpdate:modelValue":l[0]||(l[0]=a=>o.checked1=a),disabled:""},null,8,["modelValue"])]),e("span",El,[Jl,e("span",Bl,b(m.value.externalUserName),1)]),e("span",Ml,[Fl,e("span",jl,b(m.value.externalUserPhone),1)])])])]),e("span",Rl,[Yl,t(s,{class:"btn"},{default:n(()=>[f("1个售后工单")]),_:1}),t(s,{class:"btn"},{default:n(()=>[f("1个派工单")]),_:1}),e("span",{class:"view",onClick:ta},"点击查看")]),e("span",Al,[e("div",{class:"left"},[zl,e("span",{class:"initiate_comments",onClick:_e},"发起评论")]),e("div",Hl,[t(s,{type:"primary",onClick:_e,class:"primary_btn"},{default:n(()=>[f("编辑")]),_:1}),t(s,{type:"primary",onClick:Je,class:"primary_btn"},{default:n(()=>[f("创建派工单")]),_:1})])]),(u(!0),C(x,null,w(ae.value,a=>(u(),C("div",{class:"comment",key:a.date},[e("div",Wl,[Gl,e("span",Xl,b(a.userName),1)]),e("div",Kl,b(a.text),1),e("div",Ql,b(a.date),1),Zl,et]))),128)),e("div",at,[t(K,{modelValue:E.value,"onUpdate:modelValue":l[21]||(l[21]=a=>E.value=a),title:"升级到总部 (售后)",width:"80% ","show-close":!1},{footer:n(()=>[e("div",Lt,[t(s,{class:"cancel_btn",onClick:l[20]||(l[20]=a=>E.value=!1)},{default:n(()=>[f("取消")]),_:1}),L.value==1?(u(),g(s,{key:0,onClick:Ge,type:"primary",class:"primary_btn",style:{}},{default:n(()=>[f("下一步")]),_:1})):q("",!0),L.value==2?(u(),g(s,{key:1,onClick:Xe,type:"primary",class:"primary_btn",style:{}},{default:n(()=>[f("提交")]),_:1})):q("",!0)])]),default:n(()=>[e("div",lt,[e("span",tt,[e("span",{onClick:l[1]||(l[1]=a=>X(1)),class:V(L.value==1?"num_selected":"num")},"1",2),st]),e("span",ot,[e("span",{onClick:l[2]||(l[2]=a=>X(2)),class:V(L.value==2?"num_selected":"num")},"2",2),nt]),e("span",dt,[e("span",{onClick:l[3]||(l[3]=a=>X(3)),class:V(L.value==3?"num_selected":"num")},"3",2),ct])]),L.value==1?(u(),C(x,{key:0},[e("span",it,[rt,t(y,{style:{width:"368px"},modelValue:_.value.orderNo,"onUpdate:modelValue":l[4]||(l[4]=a=>_.value.orderNo=a),filterable:"",onChange:l[5]||(l[5]=()=>{}),placeholder:"请选择订单编号"},{default:n(()=>[(u(!0),C(x,null,w(te.value,a=>(u(),g(v,{key:a.po,label:a.po,value:a.po},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),e("span",ut,[pt,t(S,{modelValue:_.value.remark,"onUpdate:modelValue":l[6]||(l[6]=a=>_.value.remark=a),placeholder:"输入自定义备注"},null,8,["modelValue"])])],64)):q("",!0),L.value==2?(u(),C(x,{key:1},[e("div",mt,[_t,e("span",vt,[t(s,{style:{display:"none"},class:"btn",onClick:l[7]||(l[7]=a=>me(1))},{default:n(()=>[f("完善问题描述")]),_:1}),t(s,{style:{display:"none"},class:"btn",onClick:l[8]||(l[8]=a=>me(2))},{default:n(()=>[f("定义处理方式")]),_:1})])]),e("div",ft,[t(S,{modelValue:_.value.searchValue,"onUpdate:modelValue":l[9]||(l[9]=a=>_.value.searchValue=a),placeholder:"搜索"},null,8,["modelValue"])]),e("div",ht,[t(y,{modelValue:_.value.orderType,"onUpdate:modelValue":l[10]||(l[10]=a=>_.value.orderType=a)},{default:n(()=>[(u(!0),C(x,null,w(Ve.value,a=>(u(),g(v,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),t(y,{modelValue:_.value.productType,"onUpdate:modelValue":l[11]||(l[11]=a=>_.value.productType=a)},{default:n(()=>[(u(!0),C(x,null,w(xe.value,a=>(u(),g(v,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),t(y,{modelValue:_.value.productModel,"onUpdate:modelValue":l[12]||(l[12]=a=>_.value.productModel=a)},{default:n(()=>[(u(!0),C(x,null,w(Te.value,a=>(u(),g(v,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),t(y,{modelValue:_.value.treeSpecies,"onUpdate:modelValue":l[13]||(l[13]=a=>_.value.treeSpecies=a)},{default:n(()=>[(u(!0),C(x,null,w(Ie.value,a=>(u(),g(v,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),t(y,{modelValue:_.value.paintColor,"onUpdate:modelValue":l[14]||(l[14]=a=>_.value.paintColor=a)},{default:n(()=>[(u(!0),C(x,null,w(De.value,a=>(u(),g(v,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),t(y,{modelValue:_.value.size,"onUpdate:modelValue":l[15]||(l[15]=a=>_.value.size=a)},{default:n(()=>[(u(!0),C(x,null,w(we.value,a=>(u(),g(v,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),e("div",bt,[t(M,{ref_key:"multipleTableRef",ref:Ne,"selection-change":Le,data:$.value,stripe:!1,style:{width:"100%","max-height":"200px",overflow:"auto"}},{default:n(()=>[t(p,{prop:"checked",label:"全选",width:"80px"},{default:n(a=>[t(r,{modelValue:a.row.checked,"onUpdate:modelValue":P=>a.row.checked=P},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),t(p,{prop:"orderId",label:"订单编号"}),t(p,{prop:"sku",label:"详单编号"}),t(p,{prop:"category1",label:"产品大类"}),t(p,{prop:"fscProductModel",label:"产品型号"}),t(p,{prop:"treeSpecies__c",label:"树种"}),t(p,{prop:"paintColor__c",label:"油漆颜色 "}),t(p,{prop:"fscProductSpec",label:"尺寸 "}),t(p,{prop:"ticketClassification",label:"问题大类"},{default:n(a=>{var P;return[e("div",yt,b(a.row.ticketClassification?(P=de.value.find(Q=>Q.code==a.row.ticketClassification))==null?void 0:P.name:""),1)]}),_:1}),t(p,{prop:"ticketProblem",label:"售后问题 "},{default:n(a=>{var P;return[e("div",gt,b(a.row.ticketProblem?(P=ce.value.find(Q=>Q.code==a.row.ticketProblem))==null?void 0:P.name:""),1)]}),_:1}),t(p,{prop:"",label:"责任人 "}),t(p,{prop:"descriptionOfTicketProblem",label:"问题描述 "})]),_:1},8,["data"])]),e("div",Ct,[kt,t(y,{modelValue:k.value.problemType,"onUpdate:modelValue":l[16]||(l[16]=a=>k.value.problemType=a),placeholder:""},{default:n(()=>[(u(!0),C(x,null,w(de.value,a=>(u(),g(v,{key:a.code,label:a.name,value:a.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),Vt,t(y,{multiple:"","collapse-tags":"",modelValue:k.value.afterSalesIssues,"onUpdate:modelValue":l[17]||(l[17]=a=>k.value.afterSalesIssues=a),placeholder:""},{default:n(()=>[(u(!0),C(x,null,w(ce.value,a=>(u(),g(v,{key:a.code,label:a.name,value:a.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),xt,t(S,{modelValue:k.value.responsiblePerson,"onUpdate:modelValue":l[18]||(l[18]=a=>k.value.responsiblePerson=a),style:{width:"240px"},placeholder:"请输入责任人"},null,8,["modelValue"])]),e("div",Tt,[It,t(S,{modelValue:k.value.problemDesc,"onUpdate:modelValue":l[19]||(l[19]=a=>k.value.problemDesc=a),style:{width:"440px"},rows:2,type:"textarea",placeholder:"请输入问题描述"},null,8,["modelValue"])]),Dt,e("div",wt,[e("span",St,[t(fe,{name:"files","on-success":Se,class:"upload",drag:"",action:"https://sh.mengtian.com.cn:9595/md/api/common/file/upload",multiple:""},{tip:n(()=>[Pt]),default:n(()=>[t(ve,{class:"el-icon--upload"},{default:n(()=>[t(ia)]),_:1}),Nt]),_:1})])])],64)):q("",!0)]),_:1},8,["modelValue"])]),e("div",Ut,[t(K,{modelValue:B.value,"onUpdate:modelValue":l[35]||(l[35]=a=>B.value=a),title:"新建配送派工单",width:"80%","show-close":!1},{footer:n(()=>[e("div",Rt,[t(s,{class:"cancel_btn",onClick:l[34]||(l[34]=a=>B.value=!1)},{default:n(()=>[f("取消")]),_:1}),I.value==1?(u(),g(s,{key:0,type:"primary",class:"primary_btn",onClick:Me},{default:n(()=>[f("下一步")]),_:1})):q("",!0),I.value==2?(u(),g(s,{key:1,type:"primary",class:"primary_btn",onClick:sa},{default:n(()=>[f("完成")]),_:1})):q("",!0)])]),default:n(()=>[e("div",qt,[e("span",Ot,[e("span",{onClick:l[22]||(l[22]=a=>G(1)),class:V(I.value==1?"num_selected":"num")},"1",2),e("span",{class:V(I.value>=1?"name_selected":"name")},[f("选择配送司机 "),$t],2)]),e("span",Et,[e("span",{onClick:l[23]||(l[23]=a=>G(2)),class:V(I.value==2?"num_selected":"num")},"2",2),e("span",{class:V(I.value>=2?"name_selected":"name")},[f("输入派工单注意事项 "),Jt],2)]),e("span",Bt,[e("span",{onClick:l[24]||(l[24]=a=>G(3)),class:V(I.value==3?"num_selected":"num")},"3",2),e("span",{class:V(I.value>=3?"name_selected":"name")},[f("完成创建 "),Mt],2)])]),e("div",Ft,[I.value==1?(u(),g(be,{key:0,model:h(i),rules:ue,ref:"deliveryOrderFormRef","label-width":"90px","label-position":"left"},{default:n(()=>[t(U,{label:"人员名称",prop:"followerId"},{default:n(()=>[t(y,{modelValue:h(i).followerId,"onUpdate:modelValue":l[25]||(l[25]=a=>h(i).followerId=a),onChange:Ae,placeholder:"查找或输入服务人员姓名"},{default:n(()=>[(u(!0),C(x,null,w(H.value,a=>(u(),g(v,{key:a.name,label:a.name,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),jt]),_:1}),t(U,{label:"联系方式",prop:"contactTelephone"},{default:n(()=>[t(S,{modelValue:h(i).contactTelephone,"onUpdate:modelValue":l[26]||(l[26]=a=>h(i).contactTelephone=a),placeholder:"查找或输入配送司机手机号码"},null,8,["modelValue"])]),_:1}),t(U,{label:"预约开始",prop:"appointmentStartTime"},{default:n(()=>[t(he,{modelValue:h(i).appointmentStartTime,"onUpdate:modelValue":l[27]||(l[27]=a=>h(i).appointmentStartTime=a),type:"datetime",placeholder:"日期/时间","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue"])]),_:1}),t(U,{label:"预约结束",prop:"appointmentEndTime"},{default:n(()=>[t(he,{modelValue:h(i).appointmentEndTime,"onUpdate:modelValue":l[28]||(l[28]=a=>h(i).appointmentEndTime=a),type:"datetime",placeholder:"日期/时间","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue"])]),_:1}),t(U,{label:"是否具备安装条件",class:"check_item"},{default:n(()=>[e("span",null,[t(r,{modelValue:h(i).haveInstallConditions,"onUpdate:modelValue":l[29]||(l[29]=a=>h(i).haveInstallConditions=a)},null,8,["modelValue"])])]),_:1})]),_:1},8,["model","rules"])):q("",!0),I.value==2?(u(),g(be,{key:1,model:h(i),rules:ue,ref:"deliveryOrderFormRef","label-width":"90px","label-position":"left"},{default:n(()=>[t(U,{label:"优先级",prop:"priority"},{default:n(()=>[t(y,{modelValue:h(i).priority,"onUpdate:modelValue":l[30]||(l[30]=a=>h(i).priority=a),placeholder:"选择优先级"},{default:n(()=>[(u(!0),C(x,null,w(Oe.value,a=>(u(),g(v,{key:a.code,label:a.name,value:a.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(U,{label:"派工类型",prop:"type"},{default:n(()=>[t(y,{modelValue:h(i).type,"onUpdate:modelValue":l[31]||(l[31]=a=>h(i).type=a),placeholder:"选择派工类型"},{default:n(()=>[(u(!0),C(x,null,w(qe.value,a=>(u(),g(v,{key:a.code,label:a.name,value:a.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(U,{label:"派工单备注",class:"customLayout"},{default:n(()=>[t(S,{modelValue:h(i).remark,"onUpdate:modelValue":l[32]||(l[32]=a=>h(i).remark=a),rows:5,type:"textarea",maxlength:"500",placeholder:"请填写派工单备注","show-word-limit":""},null,8,["modelValue"])]),_:1}),t(U,{label:"上传图片",class:"custom_upload"},{default:n(()=>[t(fe,{"on-success":je,"on-remove":Fe,"auto-upload":!0,data:re.value,headers:Re.value,"before-upload":Be,"file-list":h(i).fileList,"onUpdate:fileList":l[33]||(l[33]=a=>h(i).fileList=a),class:"avatar-uploader",action:"https://sh.mengtian.com.cn:9595/md/api/common/file/upload","show-file-list":!0,"list-type":"picture-card"},{default:n(()=>[t(ve,{class:"avatar-uploader-icon"},{default:n(()=>[t(h(Ta))]),_:1})]),_:1},8,["data","headers","file-list"])]),_:1})]),_:1},8,["model","rules"])):q("",!0)])]),_:1},8,["modelValue"])]),e("div",Yt,[t(K,{modelValue:Y.value,"onUpdate:modelValue":l[37]||(l[37]=a=>Y.value=a),title:"相关单据",width:"80%","show-close":!1},{footer:n(()=>[e("div",es,[t(s,{type:"primary",class:"primary_btn",onClick:l[36]||(l[36]=a=>Y.value=!1)},{default:n(()=>[f("返回")]),_:1})])]),default:n(()=>[e("div",At,[e("span",zt,[Ht,e("span",Wt,[t(M,{data:pe.value,stripe:!1,style:{width:"100%"}},{default:n(()=>[t(p,{prop:"serviceTicketId",label:"售后工单编号"}),t(p,{prop:"text2",label:"类别"}),t(p,{prop:"text3",label:"负责人"}),t(p,{prop:"text3",label:"状态"},{default:n(a=>[t(s,{class:"statusing",onClick:P=>console.log(a)},{default:n(()=>[f("进行中")]),_:2},1032,["onClick"])]),_:1}),t(p,{prop:"updatedTime",label:"修改时间"}),t(p,{label:"操作",width:"80px"},{default:n(a=>[e("div",{style:{display:"flex","align-items":"center",color:"#165dff",cursor:"pointer"},onClick:P=>aa(a.row)}," 查看 ",8,Gt)]),_:1})]),_:1},8,["data"])])]),e("span",Xt,[Kt,e("span",Qt,[t(M,{data:ie.value,stripe:!1,style:{width:"100%"}},{default:n(()=>[t(p,{prop:"text1",label:"派工单编号"}),t(p,{prop:"text2",label:"类别"}),t(p,{prop:"text3",label:"负责人"}),t(p,{prop:"text3",label:"状态"},{default:n(a=>[t(s,{class:"statusing",onClick:P=>console.log(a)},{default:n(()=>[f("进行中")]),_:2},1032,["onClick"])]),_:1}),t(p,{prop:"text5",label:"修改时间"}),t(p,{prop:"text7",label:"操作",width:"80px"},{default:n(a=>[e("div",{style:{display:"flex","align-items":"center",color:"#165dff",cursor:"pointer"},onClick:P=>la(a.row)}," 查看 ",8,Zt)]),_:1})]),_:1},8,["data"])])])])]),_:1},8,["modelValue"])])])}}}),os=Na(as,[["__scopeId","data-v-8496dcf8"]]);export{os as default};
