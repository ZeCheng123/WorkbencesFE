import{_ as E,a as U,b as Y}from"./logoXX-Cy74BE6B.js";import{_ as $}from"./download-Dan4AgsM.js";import{d as F,g as L,r as v,a as q,k as A,z as J,E as C,c as D,b as n,e as t,w as o,f as r,p as j,h as G,o as k,F as H,A as K,n as O,i as S,t as Q,_ as R}from"./index-W4iu8axL.js";const u=g=>(j("data-v-76993224"),g=g(),G(),g),W={class:"main"},X=u(()=>n("span",{class:"header"}," 交付任务 ",-1)),Z={class:"search"},ee={class:"left"},te=u(()=>n("span",{style:{width:"336px",height:"32px"}},null,-1)),ae={class:"right"},oe=u(()=>n("img",{src:U,alt:""},null,-1)),le=u(()=>n("img",{src:Y,alt:""},null,-1)),se={class:"table_header"},ne=u(()=>n("span",{class:"left"},[n("img",{src:E,alt:""}),n("span",{class:"title"})],-1)),re={class:"right"},de=u(()=>n("img",{src:$,alt:""},null,-1)),ce={class:"table"},ie={style:{display:"flex","align-items":"center"}},pe=["onClick"],ue=F({__name:"index",setup(g){const{proxy:I}=L(),p=v({pageIndex:1,pageSize:15,total:0}),e=q({orderNo:"",customerName:"",customerPhone:"",filterMethod:"",createDate:[],orderStatus:""}),N=v([]);A(()=>{h(!1)}),v([{code:"all",name:"全部"},{code:"ServiceCase",name:"服务工单"},{code:"DispatchNote",name:"发货单"},{code:"FieldJob",name:"派工单"}]);const V=v([{code:"",name:"全部"},{code:"0",name:"待开始"},{code:"1",name:"提货"},{code:"2",name:"入库"},{code:"3",name:"配送"},{code:"4",name:"安装"},{code:"5",name:"完成"}]),T=l=>{console.log(l),I.$router.push({path:"/delivery_tasks_details",query:{id:l.id,serviceCaseNeoId:l.serviceCaseId,orderId:l.orderId,taskType:l.taskType,status:l.status,distributorName:l.distributorName,followerName:l.followerName,accountName:l.accountName,createdTime:l.createdTime,createdBy:l.createdBy}})},h=l=>{const s=e.orderNo==null?"":e.orderNo,m=e.customerName==null?"":e.customerName,i=e.customerPhone==null?"":e.customerPhone;let b={status:e.orderStatus==null?"":e.orderStatus,createdTimeStart:e.createDate==null?"":e.createDate[0],createdTimeEnd:e.createDate==null?"":e.createDate[1],pageSize:p.value.pageSize,pageNo:p.value.pageIndex,accountName:m,accountPhone:i,taskNumber:s};console.log(b),J(b).then(d=>{let _=d.data.data;_.length>0?(_.forEach(f=>{f.taskType="交付"}),N.value=_,l&&C({message:"查询成功",type:"success"})):N.value=[],p.value={pageIndex:d.data.current==null?1:parseInt(d.data.current),pageSize:d.data.size,total:d.data.total}}).catch(d=>{C({message:"请求数据失败，请重试",type:"error"}),console.error("请求数据失败:",d)})},P=l=>{p.value.pageIndex=l,h(!1)},z=()=>{e.orderNo="",e.customerName="",e.customerPhone="",e.filterMethod="",e.createDate=[],e.orderStatus="",h(!1)};return(l,s)=>{const m=r("el-input"),i=r("el-form-item"),y=r("el-form"),b=r("el-date-picker"),d=r("el-option"),_=r("el-select"),f=r("el-button"),c=r("el-table-column"),B=r("el-table"),M=r("el-pagination");return k(),D("div",W,[X,n("span",Z,[n("span",ee,[t(y,{model:e,"label-width":"80px","label-position":"left"},{default:o(()=>[t(i,{label:"任务编号"},{default:o(()=>[t(m,{placeholder:"请输入任务编号",modelValue:e.orderNo,"onUpdate:modelValue":s[0]||(s[0]=a=>e.orderNo=a)},null,8,["modelValue"])]),_:1}),t(i,{label:"客户名称"},{default:o(()=>[t(m,{placeholder:"输入客户名称",modelValue:e.customerName,"onUpdate:modelValue":s[1]||(s[1]=a=>e.customerName=a)},null,8,["modelValue"])]),_:1}),t(i,{label:"客户电话"},{default:o(()=>[t(m,{placeholder:"请输入客户电话",modelValue:e.customerPhone,"onUpdate:modelValue":s[2]||(s[2]=a=>e.customerPhone=a)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"]),t(y,{model:e,"label-width":"80px","label-position":"left"},{default:o(()=>[t(i,{label:"创建时间"},{default:o(()=>[t(b,{modelValue:e.createDate,"onUpdate:modelValue":s[3]||(s[3]=a=>e.createDate=a),type:"daterange","range-separator":"~","start-placeholder":"开始时间","end-placeholder":"结束时间","value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1}),t(i,{label:"订单状态"},{default:o(()=>[t(_,{modelValue:e.orderStatus,"onUpdate:modelValue":s[4]||(s[4]=a=>e.orderStatus=a),placeholder:"请选择订单状态"},{default:o(()=>[(k(!0),D(H,null,K(V.value,a=>(k(),O(d,{key:a.code,label:a.name,value:a.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),te]),_:1},8,["model"])]),n("span",ae,[t(f,{onClick:s[5]||(s[5]=a=>h(!0)),type:"primary",class:"search_btn"},{icon:o(()=>[oe]),default:o(()=>[S("查询")]),_:1}),t(f,{onClick:s[6]||(s[6]=a=>z()),type:"primary",class:"reset_btn"},{icon:o(()=>[le]),default:o(()=>[S("重置")]),_:1})])]),n("span",se,[ne,n("span",re,[t(f,{type:"primary",class:"reset_btn"},{icon:o(()=>[de]),default:o(()=>[S("下载")]),_:1})])]),n("span",ce,[t(B,{class:"table_content",data:N.value,stripe:!1,style:{width:"100%"}},{default:o(()=>[t(c,{prop:"id",label:"任务编号"}),t(c,{prop:"distributorName",label:"经销商"}),t(c,{prop:"followerName",label:"经销商负责人"}),t(c,{prop:"accountName",label:"关联客户"}),t(c,{prop:"taskType",label:"任务类型"}),t(c,{prop:"createdTime",label:"创建时间"}),t(c,{prop:"status",label:"状态"},{default:o(a=>{var x;return[n("div",ie,Q(a.row.status?(x=V.value.find(w=>w.code==a.row.status))==null?void 0:x.name:"待开始"),1)]}),_:1}),t(c,{prop:"url",label:"操作",width:"80px"},{default:o(a=>[n("div",{style:{display:"flex","align-items":"center",color:"#165dff",cursor:"pointer"},onClick:x=>T(a.row)}," 查看 ",8,pe)]),_:1})]),_:1},8,["data"]),t(M,{class:"table_pagination","page-size":p.value.pageSize,"pager-count":15,layout:"total, prev, pager, next",total:p.value.total,onCurrentChange:P},null,8,["page-size","total"])])])}}}),ge=R(ue,[["__scopeId","data-v-76993224"]]);export{ge as default};
