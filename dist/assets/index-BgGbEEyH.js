import{_ as Ze,a as et,b as tt}from"./tips-DfmWQaVF.js";import{_ as ne}from"./add-CRTT_dyr.js";import{d as at,g as lt,r as h,B as st,a as J,o as ot,A as nt,E as w,c as q,h as e,y as _,j as b,x as y,w as o,v as k,t as N,b as l,F as $,q as R,C as be,e as P,p as it,f as rt,i as f,u as v,z as oe,_ as dt}from"./index-CYx_7u_I.js";import{f as ut,h as ct,i as pt,j as mt,k as _t,u as ft,n as ye,e as vt}from"./common-DvLzv8E6.js";import"./userinfo-CGvVdpj9.js";const u=z=>(it("data-v-4b6a6874"),z=z(),rt(),z),ht={class:"header"},bt=u(()=>e("span",{class:"title"},"任务状态",-1)),yt={class:"step"},gt={class:"item"},Tt={class:"item"},Ct={class:"item"},Vt={class:"item"},wt={class:"item"},kt={class:"task_info"},Nt={class:"title"},Dt={class:"main_field"},xt={class:"row_field"},Pt={class:"field"},St=u(()=>e("span",{class:"label"},"任务编号：",-1)),It={class:"value"},Ot={class:"field"},qt=u(()=>e("span",{class:"label"},"经销商：",-1)),Et={class:"value"},Ut={class:"field"},Lt=u(()=>e("span",{class:"label"},"经销商负责人：",-1)),Jt={class:"value"},$t={class:"row_field"},Rt={class:"field"},Ft=u(()=>e("span",{class:"label"},"客户名称：",-1)),Bt={class:"value"},Yt={class:"field"},Ht=u(()=>e("span",{class:"label"},"当前负责人：",-1)),Mt={class:"value"},At={class:"field"},zt=u(()=>e("span",{class:"label"},"创建时间：",-1)),jt={class:"value"},Wt={class:"row_field"},Gt={class:"field"},Kt=u(()=>e("span",{class:"label"},"客户电话：",-1)),Qt={class:"value"},Xt={class:"field"},Zt=u(()=>e("span",{class:"label"},"客户地址：",-1)),ea={class:"value"},ta=u(()=>e("span",{class:"field"},[e("span",{class:"label"}),e("span",{class:"value"})],-1)),aa={class:"order_status"},la=u(()=>e("span",{class:"title"},"订单状态",-1)),sa={class:"step"},oa={class:"item"},na={class:"related_item_order"},ia=u(()=>e("span",{class:"table_title"},"相关项>订单",-1)),ra={class:"table_content"},da=["onClick"],ua={class:"related_item_invoice"},ca=u(()=>e("span",{class:"table_title"},"相关项>包装清单",-1)),pa={class:"table_content"},ma=["onClick"],_a=u(()=>e("span",null,"查看",-1)),fa=[_a],va={class:"related_item_invoice"},ha=u(()=>e("span",{class:"table_title"},"相关项>派工单",-1)),ba={class:"table_content"},ya={style:{display:"flex","align-items":"center",color:"#165dff",cursor:"pointer"}},ga=["onClick"],Ta={style:{color:"blue"}},Ca={style:{display:"flex","align-items":"center"}},Va={class:"action_list"},wa=u(()=>e("img",{src:Ze,alt:""},null,-1)),ka={class:"right"},Na={class:"userinfo"},Da=u(()=>e("img",{src:et,alt:""},null,-1)),xa={class:"username"},Pa={class:"content"},Sa={class:"date"},Ia=u(()=>e("span",{class:"reply"},"回复",-1)),Oa=u(()=>e("img",{class:"tips",src:tt,alt:""},null,-1)),qa={class:"deliveryOrderDialog"},Ea={class:"step"},Ua={class:"item"},La=u(()=>e("span",{class:"remark"},"选择配送货品的司机",-1)),Ja={class:"item"},$a=u(()=>e("span",{class:"remark"},"如有,请填写关键备注",-1)),Ra={class:"item"},Fa=u(()=>e("span",{class:"remark"},"等待司机配送",-1)),Ba={class:"content"},Ya=u(()=>e("span",{class:"custom_item"},[e("img",{src:ne,alt:""})],-1)),Ha={class:"dialog-footer"},Ma={class:"installationOrderDialog"},Aa={class:"step"},za={class:"item"},ja=u(()=>e("span",{class:"remark"},"选择负责安装的技工",-1)),Wa={class:"item"},Ga=u(()=>e("span",{class:"remark"},"如有,请填写关键备注",-1)),Ka={class:"item"},Qa=u(()=>e("span",{class:"remark"},"等待现场服务",-1)),Xa={class:"content"},Za=u(()=>e("span",{class:"custom_item1"},[e("img",{src:ne,alt:""})],-1)),el={style:{width:"300px"}},tl=u(()=>e("span",{class:"custom_item"},[e("img",{src:ne,alt:""})],-1)),al={class:"dialog-footer"},ll={class:"problemReportingDialog"},sl={class:"step"},ol={class:"item"},nl=u(()=>e("span",{class:"name"},[b("完善提报信息 "),e("span",{class:"remark"},"完善问题提报的信息")],-1)),il={class:"item"},rl=u(()=>e("span",{class:"name"},[b("完成创建 "),e("span",{class:"remark"},"等待售服部处理")],-1)),dl={class:"content"},ul={class:"dialog-footer"},cl=at({__name:"index",setup(z){const{proxy:L}=lt(),ie=h(4),re=h([]),j=new Date,T=st();T.query.id,T.query.serviceCaseId;const ge=T.query.orderId,de=T.query.status!=null?parseInt(T.query.status.toString(),0)+1:1;T.query.taskType;const I=T.query.mergedOrderNo,E=h({taskid:T.query.id,serviceCaseNeoId:T.query.serviceCaseId,orderId:T.query.orderId,taskStatus:de,accountName:T.query.accountName,distributorName:T.query.distributorName,followerName:T.query.followerName,createdTime:T.query.createdTime,createdBy:T.query.createdBy}),Te=h([{code:"0",name:"配送派工单"},{code:"1",name:"安装派工单"},{code:"2",name:"维修派工单"}]),g=h(de),D=h(1),x=h(1),ue=h(1),ce=h(),pe=h([{code:"1",name:"最高级"},{code:"2",name:"高"},{code:"3",name:"中"},{code:"4",name:"低"}]);let d=J({fieldJobContactName:"",contactTelephone:"",priority:"",type:"配送派工",remark:"",appointmentStartTime:"",appointmentEndTime:"",haveInstallConditions:!1,fieldJobOrderId:T.query.orderId,fieldJobType__c:0,stage__c:0,name:E.value.accountName+"的配送派工单",fileList:[],filePath:[],followerId:null,address:""});const me=J({followerId:[{required:!0,message:"Please input username",trigger:"blur"}],fieldJobContactName:[{required:!0,message:"Please input username",trigger:"blur"}],contactTelephone:[{required:!0,message:"Please input phone",trigger:"blur"}],priority:[{required:!0,message:"Please input priority",trigger:"blur"}],appointmentStartTime:[{required:!0,message:"Please input appointment start time",trigger:"blur"}],appointmentEndTime:[{required:!0,message:"Please input appointment end time",trigger:"blur"}]}),r=J({username:"",phone:"",remark:"",installationTeam:!1,priority:"",appointmentStartTime:"",appointmentEndTime:"",fileList:[],filePath:[],fieldJobContactName:""}),_e=J({username:[{required:!0,message:"Please input username",trigger:"blur"}],phone:[{required:!0,message:"Please input phone",trigger:"blur"}],priority:[{required:!0,message:"Please input priority",trigger:"blur"}],appointmentStartTime:[{required:!0,message:"Please input appointment start time",trigger:"blur"}],appointmentEndTime:[{required:!0,message:"Please input appointment end time",trigger:"blur"}]}),c=h({}),p=J({orderNo:"",customerName:"",customerPhone:"",desc:"",fileList:[],filePath:[]}),Ce=J({customerName:[{required:!0,message:"Please input customer name",trigger:"blur"}],customerPhone:[{required:!0,message:"Please input customer phone",trigger:"blur"}],desc:[{required:!0,message:"Please input problem description",trigger:"blur"}]}),F=h(!1),B=h(!1),Y=h(!1),Q=h([]),fe=h([]),W=h([]),H=h(null),X=h({Content:"application/json",Authorization:"",isImage:"true",needFileId:"true","Trace-Id":""}),ve=h({files:[],name:"files"}),Ve=h({files:[],name:"files"}),Z=h({files:[],name:"files"}),ee=s=>{D.value=s},te=s=>{x.value=s},we=()=>{F.value=!0},ke=()=>{B.value=!0},Ne=()=>{D.value=2},De=()=>{x.value=2},U=h([]),xe=async()=>{console.log(r);let s={fieldJobContactName:c.value.accountName__C==null?"":c.value.accountName__C,contactTelephone:c.value.contactTel==null?"":c.value.contactTel,priority:r.priority,remark:r.remark,haveInstallConditions:!1,fieldJobOrderId:c.value.neoid,orderNo__c:c.value.po,mergedOrderNo:I??"",name:c.value.accountName__C+"的安装派工单",type:"安装派工",fieldJobType__c:1,stage__c:0,docPicture:r.filePath,appointmentStartTime:r.appointmentStartTime,appointmentEndTime:r.appointmentEndTime,followerId:r.username,address:c.value.customerAddress==null?"":c.value.customerAddress,status:1,source__c:1};ye(s).then(t=>{let n=t.data.data;W.value.push(n),n!=null?(w({message:"新增派工单成功",type:"success"}),B.value=!1,x.value=1,g.value=5,r.username="",r.phone="",r.remark="",r.priority="",r.appointmentStartTime="",r.appointmentEndTime="",r.fileList=[],r.filePath=[],r.fieldJobContactName="",r.contactTelephone=""):w({message:"新增派工单失败",type:"error"})}).catch(t=>{w({message:"请求新增派工单失败，请重试",type:"error"})})},Pe=s=>{L.$router.push({path:"/dispatch_details",query:{id:s.id}})},Se=s=>{L.$router.push({path:"/historical_orders_details",query:{id:s.id,po:s.po,status_c:s.status_c}})},Ie=()=>{let s=d;s.fieldJobContactName=c.value.accountName__C==null?"":c.value.accountName__C.toString(),s.contactTelephone=c.value.contactTel==null?"":c.value.contactTel.toString(),s.address=c.value.customerAddress==null?"":c.value.customerAddress,s.picture=s.filePath,s.goodsPicture=s.filePath,s.name=c.value.accountName__C+"的配送派工单",s.status=1,s.orderNo__c=c.value.po,s.source__c=1,s.fieldJobOrderId=c.value.neoid,s.mergedOrderNo=I??"",ye(s).then(t=>{let n=t.data.data;W.value.push(n),n!=null?w({message:"新增派工单成功",type:"success"}):w({message:"新增派工单失败",type:"error"}),Object.keys(d).forEach(i=>{!i.includes("type")&&!i.includes("haveInstallConditions")&&i!=="fieldJobOrderId"&&i!=="fieldJobType__c"&&i!=="stage__c"&&i!=="name"&&(d[i]=""),i==="haveInstallConditions"&&(d[i]=!1),(i=="fileList"||i=="filePath")&&(d[i]=[])})}).catch(t=>{w({message:"请求新增派工单失败，请重试",type:"error"}),Object.keys(d).forEach(n=>{n!=="type"&&n!=="haveInstallConditions"&&n!=="fieldJobOrderId"&&n!=="fieldJobType__c"&&n!=="stage__c"&&n!=="name"&&(d[n]=""),n=="haveInstallConditions"&&(d[n]=!1),(n=="fileList"||n=="filePath")&&(d[n]=[])}),console.error("请求新增派工单失败:",t)}),F.value=!1,D.value=1},Oe=()=>{Y.value=!0},qe=()=>{console.log("problemReportingForm",p);for(let t in p)if(t!="orderNo"&&t!="fileList"&&t!="filePath"&&p[t]==""){L.$message.error("必填字段不能为空!");return}let s={orderNeoId:c.value.neoid,customerName:p.customerName,phone:p.customerPhone,problemDescription:p.desc,picture:p.filePath,caseStatus:"1",questionType:1,complaintSourceC:4,caseSource:11,clientCaseStatusC:1};vt(s).then(t=>{let n=t.data;n.code=="success"?(p.orderNo="",p.customerName="",p.customerPhone="",p.desc="",p.fileList=[],p.filePath=[],Y.value=!1,L.$message.success("提交成功!")):L.$message.error(n==null?void 0:n.message)})},Ee=()=>{be.prompt("请填写评论内容","发起评论",{inputPattern:/\S/,inputErrorMessage:"评论内容不能为空!",confirmButtonText:"确认",cancelButtonText:"取消"}).then(({value:s})=>{re.value.push({userName:"经销商",text:s,date:new Date().toLocaleString()})}).catch(()=>{})};ot(()=>{$e(!1,ge),Fe(!1);const s="100%"/"100%";if(window.addEventListener("resize",nt.debounce(function(){const n=document.body.clientHeight,i=document.body.clientWidth;if(i<1680){const C=n/i;let[S,O]=[0,0];if(C<s){S=n/1080;const m=1920*S,V=i-m;O=V>0?`translate(${V/2}px, 0)`:""}else{S=(i-20)/1920;const m=1080*S,V=n-m;O=V>0?`translate(0, ${V/2}px)`:""}H.value&&(H.value.style.height=`calc(${document.body.clientHeight/S}px - ${40*S}px - 10px)`)}else H.value&&(H.value.style.height=`calc(${document.body.clientHeight}px - 40px)`)},0)),document.createEvent){var t=document.createEvent("HTMLEvents");t.initEvent("resize",!0,!0),window.dispatchEvent(t)}else typeof Event=="function"&&window.dispatchEvent(new Event("resize"))});const Ue=s=>{if(console.log(s),s.code=="success"){let t=s.data.map(n=>n.fileId);t[0]&&d.filePath.push(t[0])}},Le=s=>{s.response},Je=s=>{ve.value.files=[s]},$e=(s,t)=>{if(ut(t).then(n=>{let i=n.data.data;i!=null?(c.value=i,p.orderNo=c.value.po,Re(!1,c.value.neoid),I&&I!=""?he(!1,I):(he(!1,c.value.po),Q.value.push(i)),s&&w({message:"查询成功",type:"success"})):s&&w({message:"获取数据失败",type:"error"})}),I&&I!=""){let n={orderNo:I.toString().split(";")};ct(n).then(i=>{let C=i.data.data;C!=null&&(console.log("orderlist:",C),Q.value=C)})}},Re=(s,t)=>{if(t==null)return;pt({fieldJobOrderId:t}).then(i=>{let C=i.data.data;C!=null?(W.value=C,s&&w({message:"查询成功",type:"success"})):s&&w({message:"获取数据失败",type:"error"})})},he=(s,t)=>{if(t==null)return;let n={orderNo:t.split(";")};mt(n).then(i=>{let C=i.data.data;C!=null?(fe.value=C,s&&w({message:"查询成功",type:"success"})):s&&w({message:"获取数据失败",type:"error"})})},Fe=s=>{_t({userType:1,name:"",phone:""}).then(n=>{let i=n.data.data;i!=null&&i.length>0?(U.value=i,s&&w({message:"查询成功",type:"success"})):s&&w({message:"获取数据失败",type:"error"})})},Be=s=>{if(console.log(s),s.code=="success"){let t=s.data.map(n=>n.fileId);t[0]&&r.filePath.push(t[0])}},Ye=s=>{s.response},He=s=>{Z.value.files=[s]},Me=s=>{if(console.log(s),s.code=="success"){let t=s.data.map(n=>n.fileId);t[0]&&p.filePath.push(t[0])}},Ae=s=>{s.response},ze=s=>{Z.value.files=[s]},je=s=>{let t=U.value.find(n=>n.id==s);t&&(r.fieldJobContactName=t.name,r.phone=t.phone)},We=s=>{let t=U.value.find(n=>n.id==s);t&&(d.fieldJobContactName=t.name,d.contactTelephone=t.phone)},Ge=s=>{let t=U.value.find(n=>n.id==s);t&&(p.customerName=t.name,p.customerPhone=t.phone)},Ke=()=>{if(g.value>=4){L.$message.warning("配送已完成，无法点击配送");return}be.confirm("确认到货后，再进行派单?","配送",{confirmButtonText:"是",cancelButtonText:"否",type:"warning"}).then(()=>{let s={id:E.value.taskid,status:3};ft(s).then(t=>{(t.data.code="success")&&(g.value=4)})}).catch(()=>{})},G=s=>s.getTime()<Date.now()-24*60*60*1e3;return(s,t)=>{const n=P("el-button"),i=P("el-table-column"),C=P("el-table"),S=P("el-option"),O=P("el-select"),m=P("el-form-item"),V=P("el-input"),K=P("el-date-picker"),M=P("el-form"),ae=P("el-icon"),le=P("el-upload"),se=P("el-dialog"),Qe=P("el-checkbox");return f(),q("div",{ref_key:"mainRef",ref:H,class:"main"},[e("span",ht,[bt,e("span",yt,[e("span",gt,[e("span",{class:_(g.value==1?"num_selected":"num")},"1",2),e("span",{class:_(g.value>=1?"name_selected":"name")},"待处理",2)]),e("span",Tt,[e("span",{class:_(g.value==3?"num_selected":"num")},"2",2),e("span",{class:_(g.value>=3?"name_selected":"name")},"入库",2)]),e("span",Ct,[e("span",{onClick:Ke,class:_(g.value==4?"num_selected":"num")},"3",2),e("span",{class:_(g.value>=4?"name_selected":"name")},"配送",2)]),e("span",Vt,[e("span",{class:_(g.value==5?"num_selected":"num")},"4",2),e("span",{class:_(g.value>=5?"name_selected":"name")},"安装",2)]),e("span",wt,[e("span",{class:_(g.value==6?"num_selected":"num")},"5",2),e("span",{class:_(g.value>=6?"name_selected":"name")},"完成",2)])])]),e("span",kt,[e("span",Nt,[b("任务详情 "),g.value>=5?(f(),y(n,{key:0,type:"primary",class:"primary_blue_btn"},{default:o(()=>[b("已派工配送")]),_:1})):k("",!0),g.value==6?(f(),y(n,{key:1,type:"primary",class:"primary_green_btn"},{default:o(()=>[b("已派工安装")]),_:1})):k("",!0)]),e("span",Dt,[e("span",xt,[e("span",Pt,[St,e("span",It,N(E.value.taskid),1),k("",!0)]),e("span",Ot,[qt,e("span",Et,N(E.value.distributorName),1)]),e("span",Ut,[Lt,e("span",Jt,N(E.value.followerName),1)])]),e("span",$t,[e("span",Rt,[Ft,e("span",Bt,N(c.value.accountName__C),1)]),e("span",Yt,[Ht,e("span",Mt,N(E.value.createdBy),1)]),e("span",At,[zt,e("span",jt,N(E.value.createdTime),1)])]),e("span",Wt,[e("span",Gt,[Kt,e("span",Qt,N(c.value.contactTel),1)]),e("span",Xt,[Zt,e("span",ea,N(c.value.customerAddress),1)]),ta])])]),e("span",aa,[la,e("span",sa,[e("span",oa,[e("span",{class:_(ie.value==1?"num_selected":"num")},"1",2),e("span",{class:_(ie.value>=1?"name_selected":"name")},N(c.value.status__c),3)])])]),e("span",na,[ia,e("span",ra,[l(C,{data:Q.value,stripe:!1,style:{width:"100%"},"max-height":"115"},{default:o(()=>[l(i,{prop:"id",label:"操作",width:"80px"},{default:o(a=>[e("div",{style:{display:"flex","align-items":"center",color:"#165dff",cursor:"pointer"},onClick:A=>Se(a.row)}," 查看 ",8,da)]),_:1}),l(i,{prop:"po",label:"订单编号"}),l(i,{prop:"orderFlow",label:"订单流程"}),l(i,{prop:"estimatedDeliveryDays",label:"交期天数"}),l(i,{prop:"orderDate",label:"订货日期"}),l(i,{prop:"planedDeliveryDate",label:"计划交货日期"}),l(i,{prop:"createdTime",label:"创建时间"})]),_:1},8,["data"])])]),e("span",ua,[ca,e("span",pa,[l(C,{data:fe.value,stripe:!1,style:{width:"100%"},"max-height":"115"},{default:o(()=>[l(i,{prop:"id",label:"操作",width:"160px"},{default:o(a=>[e("div",{style:{display:"flex","align-items":"center",color:"#165dff",cursor:"pointer"},onClick:A=>console.log(a)},fa,8,ma)]),_:1}),l(i,{prop:"name",label:"发货单编号"}),l(i,{prop:"status",label:"发货单状态"}),l(i,{prop:"shipVia",label:"出库方式"}),l(i,{prop:"shipCarrier",label:"供应基地"}),l(i,{prop:"createdTime",label:"创建时间"})]),_:1},8,["data"])])]),e("span",va,[ha,e("span",ba,[l(C,{data:W.value,stripe:!1,style:{width:"100%"},"max-height":"115"},{default:o(()=>[l(i,{prop:"view",label:"操作",width:"160px"},{default:o(a=>[e("div",ya,[e("span",{onClick:A=>Pe(a.row)},"查看",8,ga)])]),_:1}),l(i,{prop:"caseNo",label:"派工单编号"}),l(i,{prop:"stage__c",label:"状态"},{default:o(a=>[e("span",Ta,N(a.row.stage__c=="0"?"待开始":a.row.stage__c=="1"?"进行中":"已完成"),1)]),_:1}),l(i,{prop:"fieldJobType__c",label:"派工种类"},{default:o(a=>{var A;return[e("div",Ca,N(a.row.fieldJobType__c?(A=Te.value.find(Xe=>Xe.code==a.row.fieldJobType__c))==null?void 0:A.name:"配送派工单"),1)]}),_:1}),l(i,{prop:"appointmentStartTime",label:"计划开始时间"}),l(i,{prop:"appointmentEndTime",label:"计划结束时间"}),l(i,{prop:"createdTime",label:"创建时间"})]),_:1},8,["data"])])]),e("div",Va,[e("div",{class:"left"},[wa,e("span",{class:"initiate_comments",onClick:Ee},"发起评论")]),e("div",ka,[g.value==4?(f(),y(n,{key:0,type:"primary",onClick:we,class:"primary_btn"},{default:o(()=>[b("创建配送派工单")]),_:1})):k("",!0),g.value==5?(f(),y(n,{key:1,type:"primary",onClick:ke,class:"primary_btn"},{default:o(()=>[b("创建安装派工单")]),_:1})):k("",!0),l(n,{type:"primary",onClick:Oe,class:"primary_btn"},{default:o(()=>[b("问题提报")]),_:1})])]),(f(!0),q($,null,R(re.value,a=>(f(),q("div",{class:"comment",key:a.date},[e("div",Na,[Da,e("span",xa,N(a.userName),1)]),e("div",Pa,N(a.text),1),e("div",Sa,N(a.date),1),Ia,Oa]))),128)),e("div",qa,[l(se,{modelValue:F.value,"onUpdate:modelValue":t[12]||(t[12]=a=>F.value=a),title:"新建配送派工单",width:"80%","show-close":!1},{footer:o(()=>[e("div",Ha,[l(n,{class:"cancel_btn",onClick:t[11]||(t[11]=a=>F.value=!1)},{default:o(()=>[b("取消")]),_:1}),D.value==1?(f(),y(n,{key:0,type:"primary",class:"primary_btn",onClick:Ne},{default:o(()=>[b("下一步")]),_:1})):k("",!0),D.value==2?(f(),y(n,{key:1,type:"primary",class:"primary_btn",onClick:Ie},{default:o(()=>[b("完成")]),_:1})):k("",!0)])]),default:o(()=>[e("div",Ea,[e("span",Ua,[e("span",{onClick:t[0]||(t[0]=a=>ee(1)),class:_(D.value==1?"num_selected":"num")},"1",2),e("span",{class:_(D.value>=1?"name_selected":"name")},[b("选择配送司机 "),La],2)]),e("span",Ja,[e("span",{onClick:t[1]||(t[1]=a=>ee(2)),class:_(D.value==2?"num_selected":"num")},"2",2),e("span",{class:_(D.value>=2?"name_selected":"name")},[b("输入派工单注意事项 "),$a],2)]),e("span",Ra,[e("span",{onClick:t[2]||(t[2]=a=>ee(3)),class:_(D.value==3?"num_selected":"num")},"3",2),e("span",{class:_(D.value>=3?"name_selected":"name")},[b("完成创建 "),Fa],2)])]),e("div",Ba,[D.value==1?(f(),y(M,{key:0,model:v(d),rules:me,ref_key:"deliveryOrderFormRef",ref:ce,"label-width":"90px","label-position":"left"},{default:o(()=>[l(m,{label:"人员名称",prop:"followerId"},{default:o(()=>[l(O,{modelValue:v(d).followerId,"onUpdate:modelValue":t[3]||(t[3]=a=>v(d).followerId=a),onChange:We,placeholder:"查找或输入服务人员姓名"},{default:o(()=>[(f(!0),q($,null,R(U.value,a=>(f(),y(S,{key:a.name,label:a.name,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),Ya]),_:1}),l(m,{label:"联系方式",prop:"contactTelephone"},{default:o(()=>[l(V,{modelValue:v(d).contactTelephone,"onUpdate:modelValue":t[4]||(t[4]=a=>v(d).contactTelephone=a),placeholder:"查找或输入配送司机手机号码"},null,8,["modelValue"])]),_:1}),l(m,{label:"预约开始",prop:"appointmentStartTime"},{default:o(()=>[l(K,{modelValue:v(d).appointmentStartTime,"onUpdate:modelValue":t[5]||(t[5]=a=>v(d).appointmentStartTime=a),type:"datetime",placeholder:"日期/时间","value-format":"YYYY-MM-DD HH:mm:ss","default-time":v(j),"disabled-date":G},null,8,["modelValue","default-time"])]),_:1}),l(m,{label:"预约结束",prop:"appointmentEndTime"},{default:o(()=>[l(K,{modelValue:v(d).appointmentEndTime,"onUpdate:modelValue":t[6]||(t[6]=a=>v(d).appointmentEndTime=a),type:"datetime",placeholder:"日期/时间","value-format":"YYYY-MM-DD HH:mm:ss","default-time":v(j),"disabled-date":G},null,8,["modelValue","default-time"])]),_:1})]),_:1},8,["model","rules"])):k("",!0),D.value==2?(f(),y(M,{key:1,model:v(d),rules:me,ref_key:"deliveryOrderFormRef",ref:ce,"label-width":"90px","label-position":"left"},{default:o(()=>[l(m,{label:"优先级",prop:"priority"},{default:o(()=>[l(O,{modelValue:v(d).priority,"onUpdate:modelValue":t[7]||(t[7]=a=>v(d).priority=a),placeholder:"请选择优先级"},{default:o(()=>[(f(!0),q($,null,R(pe.value,a=>(f(),y(S,{key:a.code,label:a.name,value:a.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(m,{label:"派工类型",prop:"type"},{default:o(()=>[l(V,{disabled:"",placeholder:"配送派工",modelValue:v(d).type,"onUpdate:modelValue":t[8]||(t[8]=a=>v(d).type=a)},null,8,["modelValue"])]),_:1}),l(m,{label:"派工单备注",class:"customLayout"},{default:o(()=>[l(V,{modelValue:v(d).remark,"onUpdate:modelValue":t[9]||(t[9]=a=>v(d).remark=a),rows:5,type:"textarea",maxlength:"500",placeholder:"请填写派工单备注","show-word-limit":""},null,8,["modelValue"])]),_:1}),l(m,{label:"上传图片",class:"custom_upload"},{default:o(()=>[l(le,{"on-success":Ue,"on-remove":Le,"auto-upload":!0,data:ve.value,headers:X.value,"before-upload":Je,"file-list":v(d).fileList,"onUpdate:fileList":t[10]||(t[10]=a=>v(d).fileList=a),class:"avatar-uploader",action:"https://sh.mengtian.com.cn:9595/md/api/common/file/upload","show-file-list":!0,"list-type":"picture-card"},{default:o(()=>[l(ae,{class:"avatar-uploader-icon"},{default:o(()=>[l(v(oe))]),_:1})]),_:1},8,["data","headers","file-list"])]),_:1})]),_:1},8,["model","rules"])):k("",!0)])]),_:1},8,["modelValue"])]),e("div",Ma,[l(se,{modelValue:B.value,"onUpdate:modelValue":t[24]||(t[24]=a=>B.value=a),title:"新建安装派工单",width:"80%","show-close":!1},{footer:o(()=>[e("div",al,[l(n,{class:"cancel_btn",onClick:t[23]||(t[23]=a=>B.value=!1)},{default:o(()=>[b("取消")]),_:1}),x.value==1?(f(),y(n,{key:0,type:"primary",class:"primary_btn",onClick:De},{default:o(()=>[b("下一步")]),_:1})):k("",!0),x.value==2?(f(),y(n,{key:1,type:"primary",class:"primary_btn",onClick:xe},{default:o(()=>[b("完成")]),_:1})):k("",!0)])]),default:o(()=>[e("div",Aa,[e("span",za,[e("span",{onClick:t[13]||(t[13]=a=>te(1)),class:_(x.value==1?"num_selected":"num")},"1",2),e("span",{class:_(x.value>=1?"name_selected":"name")},[b("选择安装技工 "),ja],2)]),e("span",Wa,[e("span",{onClick:t[14]||(t[14]=a=>te(2)),class:_(x.value==2?"num_selected":"num")},"2",2),e("span",{class:_(x.value>=2?"name_selected":"name")},[b("输入安装派工单注意事项 "),Ga],2)]),e("span",Ka,[e("span",{onClick:t[15]||(t[15]=a=>te(3)),class:_(x.value==3?"num_selected":"num")},"3",2),e("span",{class:_(x.value>=3?"name_selected":"name")},[b("完成创建 "),Qa],2)])]),e("div",Xa,[x.value==1?(f(),y(M,{key:0,model:r,rules:_e,"label-width":"80px","label-position":"left"},{default:o(()=>[l(m,{label:"人员名称",prop:"username"},{default:o(()=>[l(O,{modelValue:r.username,"onUpdate:modelValue":t[16]||(t[16]=a=>r.username=a),onChange:je,placeholder:"查找或输入服务人员姓名"},{default:o(()=>[(f(!0),q($,null,R(U.value,a=>(f(),y(S,{key:a.name,label:a.name,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),Za]),_:1}),l(m,{label:"联系方式",prop:"phone"},{default:o(()=>[l(V,{placeholder:"输入联系方式",modelValue:r.phone,"onUpdate:modelValue":t[17]||(t[17]=a=>r.phone=a)},null,8,["modelValue"])]),_:1}),l(m,{label:"预约开始",prop:"appointmentStartTime"},{default:o(()=>[l(K,{modelValue:r.appointmentStartTime,"onUpdate:modelValue":t[18]||(t[18]=a=>r.appointmentStartTime=a),type:"datetime",placeholder:"日期/时间","value-format":"YYYY-MM-DD HH:mm:ss",":default-time":v(j),"disabled-date":G},null,8,["modelValue",":default-time"])]),_:1}),l(m,{label:"预约结束",prop:"appointmentEndTime"},{default:o(()=>[l(K,{modelValue:r.appointmentEndTime,"onUpdate:modelValue":t[19]||(t[19]=a=>r.appointmentEndTime=a),type:"datetime",placeholder:"日期/时间","value-format":"YYYY-MM-DD HH:mm:ss","default-time":v(j),"disabled-date":G},null,8,["modelValue","default-time"])]),_:1}),l(m,{label:"安装小组"},{default:o(()=>[e("span",el,[l(Qe,{modelValue:r.installationTeam,"onUpdate:modelValue":t[20]||(t[20]=a=>r.installationTeam=a)},null,8,["modelValue"])])]),_:1}),r.installationTeam?(f(),y(m,{key:0,label:"添加组员"},{default:o(()=>[tl]),_:1})):k("",!0)]),_:1},8,["model","rules"])):k("",!0),x.value==2?(f(),y(M,{key:1,model:r,rules:_e,"label-width":"90px","label-position":"left"},{default:o(()=>[l(m,{label:"优先级",prop:"priority"},{default:o(()=>[l(O,{modelValue:r.priority,"onUpdate:modelValue":t[21]||(t[21]=a=>r.priority=a),placeholder:"请选择优先级"},{default:o(()=>[(f(!0),q($,null,R(pe.value,a=>(f(),y(S,{key:a.code,label:a.name,value:a.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(m,{label:"派工单备注",class:"customLayout"},{default:o(()=>[l(V,{modelValue:r.remark,"onUpdate:modelValue":t[22]||(t[22]=a=>r.remark=a),rows:5,type:"textarea",maxlength:"500",placeholder:"请填写派工单备注","show-word-limit":""},null,8,["modelValue"])]),_:1}),l(m,{label:"上传图片",class:"custom_upload"},{default:o(()=>[l(le,{"on-success":Be,"on-remove":Ae,"auto-upload":!0,data:Ve.value,headers:X.value,"before-upload":ze,"file-list":r.fileList,"list-type":"picture-card",class:"avatar-uploader",action:"https://sh.mengtian.com.cn:9595/md/api/common/file/upload","show-file-list":!0},{default:o(()=>[l(ae,{class:"avatar-uploader-icon"},{default:o(()=>[l(v(oe))]),_:1})]),_:1},8,["data","headers","file-list"])]),_:1})]),_:1},8,["model","rules"])):k("",!0)])]),_:1},8,["modelValue"])]),e("div",ll,[l(se,{modelValue:Y.value,"onUpdate:modelValue":t[30]||(t[30]=a=>Y.value=a),title:"问题提报",width:"80%","show-close":!1},{footer:o(()=>[e("div",ul,[l(n,{class:"cancel_btn",onClick:t[29]||(t[29]=a=>Y.value=!1)},{default:o(()=>[b("取消")]),_:1}),l(n,{type:"primary",class:"primary_btn",onClick:qe},{default:o(()=>[b("提交")]),_:1})])]),default:o(()=>[e("span",sl,[e("span",ol,[e("span",{class:_(ue.value==1?"num_selected":"num")},"1",2),nl]),e("span",il,[e("span",{class:_(ue.value==2?"num_selected":"num")},"2",2),rl])]),e("div",dl,[l(M,{model:p,rules:Ce,"label-width":"90px","label-position":"left"},{default:o(()=>[l(m,{label:"订单编号",prop:"orderNo"},{default:o(()=>[l(V,{placeholder:"请选择订单编号",modelValue:p.orderNo,"onUpdate:modelValue":t[25]||(t[25]=a=>p.orderNo=a)},null,8,["modelValue"])]),_:1}),l(m,{label:"客户姓名",prop:"customerName"},{default:o(()=>[l(O,{modelValue:p.customerName,"onUpdate:modelValue":t[26]||(t[26]=a=>p.customerName=a),onChange:Ge,placeholder:"查找或选择服务人员姓名"},{default:o(()=>[(f(!0),q($,null,R(U.value,a=>(f(),y(S,{key:a.name,label:a.name,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(m,{label:"客户电话",prop:"customerPhone"},{default:o(()=>[l(V,{placeholder:"请输入客户电话",modelValue:p.customerPhone,"onUpdate:modelValue":t[27]||(t[27]=a=>p.customerPhone=a)},null,8,["modelValue"])]),_:1}),l(m,{label:"问题描述",class:"customLayout",prop:"desc"},{default:o(()=>[l(V,{modelValue:p.desc,"onUpdate:modelValue":t[28]||(t[28]=a=>p.desc=a),rows:5,type:"textarea",maxlength:"500",placeholder:"请输入问题描述","show-word-limit":""},null,8,["modelValue"])]),_:1}),l(m,{label:"上传图片",class:"custom_upload"},{default:o(()=>[l(le,{"on-success":Me,"on-remove":Ye,"auto-upload":!0,data:Z.value,headers:X.value,"before-upload":He,"file-list":p.fileList,"list-type":"picture-card",class:"avatar-uploader",action:"https://sh.mengtian.com.cn:9595/md/api/common/file/upload","show-file-list":!0},{default:o(()=>[l(ae,{class:"avatar-uploader-icon"},{default:o(()=>[l(v(oe))]),_:1})]),_:1},8,["data","headers","file-list"])]),_:1})]),_:1},8,["model","rules"])])]),_:1},8,["modelValue"])])],512)}}}),hl=dt(cl,[["__scopeId","data-v-4b6a6874"]]);export{hl as default};
