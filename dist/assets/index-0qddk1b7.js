import{_ as Ve,a as ke,b as Ce}from"./tips-DfmWQaVF.js";import{_ as Te}from"./add-CRTT_dyr.js";import{d as we,g as Ie,r as b,y as Pe,a as S,k as Se,c as F,b as e,s as o,i as c,n as g,w as l,q as y,x as I,e as a,F as De,v as qe,m as Ne,z as Ue,f as w,p as Oe,h as Xe,o as v,u as _,t as H,E as D,_ as Ee}from"./index-CpIkpthv.js";import{a as te}from"./common-BMFbHTFR.js";const u=X=>(Oe("data-v-fdc7553f"),X=X(),Xe(),X),Le={class:"main"},Ye={class:"header"},je=u(()=>e("span",{class:"title"},"任务状态",-1)),$e={class:"step"},Re={class:"item"},Me={class:"item"},Be={class:"item"},Fe={class:"item"},He={class:"item"},Je={class:"task_info"},ze={class:"title"},Ae={class:"main_field"},Ge={class:"row_field"},Ke={class:"field"},Qe=u(()=>e("span",{class:"label"},"任务编号：",-1)),We={class:"value"},Ze={class:"field"},et=u(()=>e("span",{class:"label"},"经销商：",-1)),tt={class:"value"},at={class:"field"},st=u(()=>e("span",{class:"label"},"经销商负责人：",-1)),lt={class:"value"},ot={class:"row_field"},nt={class:"field"},it=u(()=>e("span",{class:"label"},"客户名称：",-1)),rt={class:"value"},dt={class:"field"},pt=u(()=>e("span",{class:"label"},"当前负责人：",-1)),ut={class:"value"},ct={class:"field"},mt=u(()=>e("span",{class:"label"},"创建时间：",-1)),_t={class:"value"},ft=Ne('<span class="row_field" data-v-fdc7553f><span class="field" data-v-fdc7553f><span class="label" data-v-fdc7553f>客户电话：</span><span class="value" data-v-fdc7553f>XX</span></span><span class="field" data-v-fdc7553f><span class="label" data-v-fdc7553f>客户地址：</span><span class="value" data-v-fdc7553f>XXX</span></span><span class="field" data-v-fdc7553f><span class="label" data-v-fdc7553f></span><span class="value" data-v-fdc7553f></span></span></span>',1),vt={class:"order_status"},ht=u(()=>e("span",{class:"title"},"订单状态",-1)),bt={class:"step"},yt={class:"item"},gt={class:"item"},xt={class:"item"},Vt={class:"item"},kt={class:"item"},Ct={class:"item"},Tt={class:"item"},wt={class:"related_item_order"},It=u(()=>e("span",{class:"table_title"},"相关项>订单",-1)),Pt={class:"table_content"},St=["onClick"],Dt={class:"related_item_invoice"},qt=u(()=>e("span",{class:"table_title"},"相关项>发货单",-1)),Nt={class:"table_content"},Ut=["onClick"],Ot=u(()=>e("span",null,"查看",-1)),Xt=u(()=>e("span",null,"批量提货",-1)),Et={class:"related_item_invoice"},Lt=u(()=>e("span",{class:"table_title"},"相关项>派工单",-1)),Yt={class:"table_content"},jt=["onClick"],$t=u(()=>e("span",null,"查看",-1)),Rt=[$t],Mt={class:"action_list"},Bt=u(()=>e("img",{src:Ve,alt:""},null,-1)),Ft={class:"right"},Ht={class:"userinfo"},Jt=u(()=>e("img",{src:ke,alt:""},null,-1)),zt={class:"username"},At={class:"content"},Gt={class:"date"},Kt=u(()=>e("span",{class:"reply"},"回复",-1)),Qt=u(()=>e("img",{class:"tips",src:Ce,alt:""},null,-1)),Wt={class:"deliveryOrderDialog"},Zt={class:"step"},ea={class:"item"},ta=u(()=>e("span",{class:"remark"},"选择配送货品的司机",-1)),aa={class:"item"},sa=u(()=>e("span",{class:"remark"},"如有,请填写关键备注",-1)),la={class:"item"},oa=u(()=>e("span",{class:"remark"},"等待司机配送",-1)),na={class:"content"},ia={class:"dialog-footer"},ra={class:"installationOrderDialog"},da={class:"step"},pa={class:"item"},ua=u(()=>e("span",{class:"remark"},"选择负责安装的技工",-1)),ca={class:"item"},ma=u(()=>e("span",{class:"remark"},"如有,请填写关键备注",-1)),_a={class:"item"},fa=u(()=>e("span",{class:"remark"},"等待现场服务",-1)),va={class:"content"},ha={style:{width:"300px"}},ba=u(()=>e("span",{class:"custom_item"},[e("img",{src:Te,alt:""})],-1)),ya={class:"dialog-footer"},ga={class:"problemReportingDialog"},xa={class:"step"},Va={class:"item"},ka=u(()=>e("span",{class:"name"},[c("完善提报信息 "),e("span",{class:"remark"},"完善问题提报的信息")],-1)),Ca={class:"item"},Ta=u(()=>e("span",{class:"name"},[c("完成创建 "),e("span",{class:"remark"},"等待售服部处理")],-1)),wa={class:"content"},Ia={class:"dialog-footer"},Pa=we({__name:"index",setup(X){const{proxy:ae}=Ie(),x=b(4),J=b([]),h=Pe();h.query.id,h.query.serviceCaseId,h.query.orderId;const z=h.query.status!=null?parseInt(h.query.status.toString(),0)+1:1;h.query.taskType;const P=b({taskid:h.query.id,serviceCaseNeoId:h.query.serviceCaseId,orderId:h.query.orderId,taskStatus:z,accountName:h.query.accountName,distributorName:h.query.distributorName,followerName:h.query.followerName,createdTime:h.query.createdTime,createdBy:h.query.createdBy}),f=b(z),V=b(1),k=b(1),A=b(1),G=b();let r=S({field_job_contact_name:"",contact_telephone:"",priority:"",type:"配送派工",remark:"",appointmentStartTime:"",appointmentEndTime:"",haveInstallConditions:!1,field_job_order_id:h.query.orderId,fieldJobType__c:0,stage__c:0,name:P.value.accountName+"的配送派工单",fileList:[],filePath:[]});const K=S({field_job_contact_name:[{required:!0,message:"Please input username",trigger:"blur"}],contact_telephone:[{required:!0,message:"Please input phone",trigger:"blur"}],priority:[{required:!0,message:"Please input priority",trigger:"blur"}],appointmentStartTime:[{required:!0,message:"Please input appointment start time",trigger:"blur"}],appointmentEndTime:[{required:!0,message:"Please input appointment end time",trigger:"blur"}]}),n=S({username:"",phone:"",remark:"",installationTeam:!1,priority:"",appointmentStartTime:"",appointmentEndTime:"",fileList:[],filePath:[]}),Q=S({username:[{required:!0,message:"Please input username",trigger:"blur"}],phone:[{required:!0,message:"Please input phone",trigger:"blur"}],priority:[{required:!0,message:"Please input priority",trigger:"blur"}],appointmentStartTime:[{required:!0,message:"Please input appointment start time",trigger:"blur"}],appointmentEndTime:[{required:!0,message:"Please input appointment end time",trigger:"blur"}]}),T=S({orderNo:"",customerName:"",customerPhone:"",desc:"",fileList:[]}),se=S({customerName:[{required:!0,message:"Please input customer name",trigger:"blur"}],customerPhone:[{required:!0,message:"Please input customer phone",trigger:"blur"}],desc:[{required:!0,message:"Please input problem description",trigger:"blur"}]}),q=b(!1),N=b(!1),U=b(!1),le=b([{text1:"",text2:"XXX",text3:"渠道",text4:"35",text5:"XXXX",text6:"xxxx",text7:"2024-02-21 10:30:50"}]),oe=b([{text1:"",text2:"XXX",text3:"示例字段...",text4:"XXXX",text5:"2024-02-21 10:30:50",text6:"XXX"}]),ne=b([{text1:"",text2:"PG0001",text3:"已完成",text4:"已评价",text5:"2024-02-21 10:30:50",text6:"2024-02-21 10:30:50"}]),W=b({Content:"application/json",Authorization:"",isImage:"true",needFileId:"true","Trace-Id":""}),E=b({files:[],name:"files"}),Y=p=>{V.value=p},j=p=>{k.value=p},ie=()=>{q.value=!0},re=()=>{N.value=!0},de=()=>{V.value=2},pe=()=>{k.value=2},ue=async()=>{console.log(n);let p={field_job_contact_name:n.username,contact_telephone:n.phone,priority:n.priority,remark:n.remark,haveInstallConditions:!1,field_job_order_id:h.query.orderId,name:P.value.accountName+"的安装派工单",type:"安装派工",fieldJobType__c:1,stage__c:0,picture:n.filePath.join(";"),appointmentStartTime:n.appointmentStartTime,appointmentEndTime:n.appointmentEndTime};te(p).then(t=>{t.data.data!=null?(D({message:"新增派工单成功",type:"success"}),N.value=!1,k.value=1,f.value=5,n.username="",n.phone="",n.remark="",n.priority="",n.appointmentStartTime="",n.appointmentEndTime="",n.fileList=[],n.filePath=[]):D({message:"新增派工单失败",type:"error"})}).catch(t=>{D({message:"请求新增派工单失败，请重试",type:"error"})})},ce=()=>{let p=r;p.picture=p.filePath.join(","),te(p).then(t=>{t.data.data!=null?D({message:"新增派工单成功",type:"success"}):D({message:"新增派工单失败",type:"error"}),Object.keys(r).forEach(d=>{!d.includes("type")&&!d.includes("haveInstallConditions")&&d!=="field_job_order_id"&&d!=="fieldJobType__c"&&d!=="stage__c"&&d!=="name"&&(r[d]=""),d==="haveInstallConditions"&&(r[d]=!1)})}).catch(t=>{D({message:"请求新增派工单失败，请重试",type:"error"}),Object.keys(r).forEach(i=>{i!=="type"&&i!=="haveInstallConditions"&&i!=="field_job_order_id"&&i!=="fieldJobType__c"&&i!=="stage__c"&&i!=="name"&&(r[i]=""),i=="haveInstallConditions"&&(r[i]=!1)}),console.error("请求新增派工单失败:",t)}),q.value=!1,V.value=1,f.value=5},me=()=>{U.value=!0},_e=()=>{U.value=!1,ae.$message.success("提交成功!")},fe=()=>{Ue.prompt("请填写评论内容","发起评论",{inputPattern:/\S/,inputErrorMessage:"评论内容不能为空!",confirmButtonText:"确认",cancelButtonText:"取消"}).then(({value:p})=>{J.value.push({userName:"经销商",text:p,date:new Date().toLocaleString()})}).catch(()=>{})};Se(()=>{});const ve=p=>{if(console.log(p),p.code=="success"){let t=p.data.map(i=>i.fileUrl);r.filePath=r.filePath.concat(t)}},he=p=>{p.response},be=p=>{E.value.files.push(p)},ye=p=>{if(console.log(p),p.code=="success"){let t=p.data.map(i=>i.fileUrl);n.filePath=n.filePath.concat(t)}},ge=p=>{p.response},xe=p=>{E.value.files.push(p)};return(p,t)=>{const i=w("el-button"),d=w("el-table-column"),$=w("el-table"),C=w("el-input"),m=w("el-form-item"),L=w("el-date-picker"),Z=w("el-checkbox"),O=w("el-form"),R=w("el-icon"),M=w("el-upload"),B=w("el-dialog");return v(),F("div",Le,[e("span",Ye,[je,e("span",$e,[e("span",Re,[e("span",{class:o(f.value==1?"num_selected":"num")},"1",2),e("span",{class:o(f.value>=1?"name_selected":"name")},"待处理",2)]),e("span",Me,[e("span",{class:o(f.value==3?"num_selected":"num")},"2",2),e("span",{class:o(f.value>=3?"name_selected":"name")},"入库",2)]),e("span",Be,[e("span",{onClick:t[0]||(t[0]=s=>f.value=4),class:o(f.value==4?"num_selected":"num")},"3",2),e("span",{class:o(f.value>=4?"name_selected":"name")},"配送",2)]),e("span",Fe,[e("span",{class:o(f.value==5?"num_selected":"num")},"4",2),e("span",{class:o(f.value>=5?"name_selected":"name")},"安装",2)]),e("span",He,[e("span",{class:o(f.value==6?"num_selected":"num")},"5",2),e("span",{class:o(f.value>=6?"name_selected":"name")},"完成",2)])])]),e("span",Je,[e("span",ze,[c("任务详情 "),f.value>=5?(v(),g(i,{key:0,type:"primary",class:"primary_blue_btn"},{default:l(()=>[c("已派工配送")]),_:1})):y("",!0),f.value==6?(v(),g(i,{key:1,type:"primary",class:"primary_green_btn"},{default:l(()=>[c("已派工安装")]),_:1})):y("",!0)]),e("span",Ae,[e("span",Ge,[e("span",Ke,[Qe,e("span",We,I(P.value.taskid),1),y("",!0)]),e("span",Ze,[et,e("span",tt,I(P.value.distributorName),1)]),e("span",at,[st,e("span",lt,I(P.value.followerName),1)])]),e("span",ot,[e("span",nt,[it,e("span",rt,I(P.value.accountName),1)]),e("span",dt,[pt,e("span",ut,I(P.value.createdBy),1)]),e("span",ct,[mt,e("span",_t,I(P.value.createdTime),1)])]),ft])]),e("span",vt,[ht,e("span",bt,[e("span",yt,[e("span",{class:o(x.value==1?"num_selected":"num")},"1",2),e("span",{class:o(x.value>=1?"name_selected":"name")},"...",2)]),e("span",gt,[e("span",{class:o(x.value==2?"num_selected":"num")},"2",2),e("span",{class:o(x.value>=2?"name_selected":"name")},"已包装",2)]),e("span",xt,[e("span",{class:o(x.value==3?"num_selected":"num")},"3",2),e("span",{class:o(x.value>=3?"name_selected":"name")},"已成品入库",2)]),e("span",Vt,[e("span",{class:o(x.value==4?"num_selected":"num")},"4",2),e("span",{class:o(x.value>=4?"name_selected":"name")},"已发货",2)]),e("span",kt,[e("span",{class:o(x.value==5?"num_selected":"num")},"5",2),e("span",{class:o(x.value>=5?"name_selected":"name")},"已经销商收货",2)]),e("span",Ct,[e("span",{class:o(x.value==6?"num_selected":"num")},"6",2),e("span",{class:o(f.value>=6?"name_selected":"name")},"订单完结",2)]),e("span",Tt,[e("span",{class:o(x.value==7?"num_selected":"num")},"7",2),e("span",{class:o(f.value>=7?"name_selected":"name")},"...",2)])])]),e("span",wt,[It,e("span",Pt,[a($,{data:le.value,stripe:!1,style:{width:"100%"}},{default:l(()=>[a(d,{prop:"text1",label:"操作",width:"80px"},{default:l(s=>[e("div",{style:{display:"flex","align-items":"center",color:"#165dff",cursor:"pointer"},onClick:ee=>console.log(s)}," 查看 ",8,St)]),_:1}),a(d,{prop:"text2",label:"订单编号"}),a(d,{prop:"text3",label:"订单流程"}),a(d,{prop:"text4",label:"交期天数"}),a(d,{prop:"text5",label:"订货日期"}),a(d,{prop:"text6",label:"计划交货日期"}),a(d,{prop:"text7",label:"创建时间"})]),_:1},8,["data"])])]),e("span",Dt,[qt,e("span",Nt,[a($,{data:oe.value,stripe:!1,style:{width:"100%"}},{default:l(()=>[a(d,{prop:"text1",label:"操作",width:"160px"},{default:l(s=>[e("div",{style:{display:"flex","align-items":"center",color:"#165dff",cursor:"pointer"},onClick:ee=>console.log(s)},[Ot,c("  "),Xt],8,Ut)]),_:1}),a(d,{prop:"text2",label:"发货单编号"}),a(d,{prop:"text3",label:"发货单状态"}),a(d,{prop:"text4",label:"出库方式"}),a(d,{prop:"text5",label:"供应基地"}),a(d,{prop:"text6",label:"创建时间"})]),_:1},8,["data"])])]),e("span",Et,[Lt,e("span",Yt,[a($,{data:ne.value,stripe:!1,style:{width:"100%"}},{default:l(()=>[a(d,{prop:"text1",label:"操作",width:"160px"},{default:l(s=>[e("div",{style:{display:"flex","align-items":"center",color:"#165dff",cursor:"pointer"},onClick:ee=>console.log(s)},Rt,8,jt)]),_:1}),a(d,{prop:"text2",label:"派工单编号"}),a(d,{prop:"text3",label:"状态"}),a(d,{prop:"text4",label:"计划开始时间"}),a(d,{prop:"text5",label:"计划结束时间"}),a(d,{prop:"text6",label:"创建时间"})]),_:1},8,["data"])])]),e("div",Mt,[e("div",{class:"left"},[Bt,e("span",{class:"initiate_comments",onClick:fe},"发起任务评论")]),e("div",Ft,[f.value==4?(v(),g(i,{key:0,type:"primary",onClick:ie,class:"primary_btn"},{default:l(()=>[c("创建配送派工单")]),_:1})):y("",!0),f.value==4?(v(),g(i,{key:1,type:"primary",onClick:t[1]||(t[1]=s=>{f.value=5,x.value=5}),class:"primary_btn"},{default:l(()=>[c("一键跳过配送")]),_:1})):y("",!0),f.value==5?(v(),g(i,{key:2,type:"primary",onClick:re,class:"primary_btn"},{default:l(()=>[c("创建安装派工单")]),_:1})):y("",!0),a(i,{type:"primary",onClick:me,class:"primary_btn"},{default:l(()=>[c("问题提报")]),_:1})])]),(v(!0),F(De,null,qe(J.value,s=>(v(),F("div",{class:"comment",key:s.date},[e("div",Ht,[Jt,e("span",zt,I(s.userName),1)]),e("div",At,I(s.text),1),e("div",Gt,I(s.date),1),Kt,Qt]))),128)),e("div",Wt,[a(B,{modelValue:q.value,"onUpdate:modelValue":t[15]||(t[15]=s=>q.value=s),title:"新建配送派工单",width:"80%","show-close":!1},{footer:l(()=>[e("div",ia,[a(i,{class:"cancel_btn",onClick:t[14]||(t[14]=s=>q.value=!1)},{default:l(()=>[c("取消")]),_:1}),V.value==1?(v(),g(i,{key:0,type:"primary",class:"primary_btn",onClick:de},{default:l(()=>[c("下一步")]),_:1})):y("",!0),V.value==2?(v(),g(i,{key:1,type:"primary",class:"primary_btn",onClick:ce},{default:l(()=>[c("完成")]),_:1})):y("",!0)])]),default:l(()=>[e("div",Zt,[e("span",ea,[e("span",{onClick:t[2]||(t[2]=s=>Y(1)),class:o(V.value==1?"num_selected":"num")},"1",2),e("span",{class:o(V.value>=1?"name_selected":"name")},[c("选择配送司机 "),ta],2)]),e("span",aa,[e("span",{onClick:t[3]||(t[3]=s=>Y(2)),class:o(V.value==2?"num_selected":"num")},"2",2),e("span",{class:o(V.value>=2?"name_selected":"name")},[c("输入派工单注意事项 "),sa],2)]),e("span",la,[e("span",{onClick:t[4]||(t[4]=s=>Y(3)),class:o(V.value==3?"num_selected":"num")},"3",2),e("span",{class:o(V.value>=3?"name_selected":"name")},[c("完成创建 "),oa],2)])]),e("div",na,[V.value==1?(v(),g(O,{key:0,model:_(r),rules:K,ref_key:"deliveryOrderFormRef",ref:G,"label-width":"90px","label-position":"left"},{default:l(()=>[a(m,{label:"联系方式",prop:"contact_telephone"},{default:l(()=>[a(C,{modelValue:_(r).contact_telephone,"onUpdate:modelValue":t[5]||(t[5]=s=>_(r).contact_telephone=s),placeholder:"查找或输入配送司机手机号码"},null,8,["modelValue"])]),_:1}),a(m,{label:"人员名称",prop:"field_job_contact_name"},{default:l(()=>[a(C,{modelValue:_(r).field_job_contact_name,"onUpdate:modelValue":t[6]||(t[6]=s=>_(r).field_job_contact_name=s),placeholder:"查找或输入服务人员姓名"},null,8,["modelValue"])]),_:1}),a(m,{label:"预约开始",prop:"appointmentStartTime"},{default:l(()=>[a(L,{modelValue:_(r).appointmentStartTime,"onUpdate:modelValue":t[7]||(t[7]=s=>_(r).appointmentStartTime=s),type:"datetime",placeholder:"日期/时间","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue"])]),_:1}),a(m,{label:"预约结束",prop:"appointmentEndTime"},{default:l(()=>[a(L,{modelValue:_(r).appointmentEndTime,"onUpdate:modelValue":t[8]||(t[8]=s=>_(r).appointmentEndTime=s),type:"datetime",placeholder:"日期/时间","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue"])]),_:1}),a(m,{label:"是否具备安装条件",class:"check_item"},{default:l(()=>[e("span",null,[a(Z,{modelValue:_(r).haveInstallConditions,"onUpdate:modelValue":t[9]||(t[9]=s=>_(r).haveInstallConditions=s)},null,8,["modelValue"])])]),_:1})]),_:1},8,["model","rules"])):y("",!0),V.value==2?(v(),g(O,{key:1,model:_(r),rules:K,ref_key:"deliveryOrderFormRef",ref:G,"label-width":"90px","label-position":"left"},{default:l(()=>[a(m,{label:"优先级",prop:"priority"},{default:l(()=>[a(C,{placeholder:"1-最高 2-高 3-中 4-低",modelValue:_(r).priority,"onUpdate:modelValue":t[10]||(t[10]=s=>_(r).priority=s)},null,8,["modelValue"])]),_:1}),a(m,{label:"派工类型",prop:"type"},{default:l(()=>[a(C,{disabled:"",placeholder:"配送派工",modelValue:_(r).type,"onUpdate:modelValue":t[11]||(t[11]=s=>_(r).type=s)},null,8,["modelValue"])]),_:1}),a(m,{label:"派工单备注",class:"customLayout"},{default:l(()=>[a(C,{modelValue:_(r).remark,"onUpdate:modelValue":t[12]||(t[12]=s=>_(r).remark=s),rows:5,type:"textarea",maxlength:"500",placeholder:"请填写派工单备注","show-word-limit":""},null,8,["modelValue"])]),_:1}),a(m,{label:"上传图片",class:"custom_upload"},{default:l(()=>[a(M,{"on-success":ve,"on-remove":he,"auto-upload":!0,data:E.value,headers:W.value,"before-upload":be,"file-list":_(r).fileList,"onUpdate:fileList":t[13]||(t[13]=s=>_(r).fileList=s),class:"avatar-uploader",action:"https://sh.mengtian.com.cn:9595/md/api/common/file/upload","show-file-list":!0,"list-type":"picture-card"},{default:l(()=>[a(R,{class:"avatar-uploader-icon"},{default:l(()=>[a(_(H))]),_:1})]),_:1},8,["data","headers","file-list"])]),_:1})]),_:1},8,["model","rules"])):y("",!0)])]),_:1},8,["modelValue"])]),e("div",ra,[a(B,{modelValue:N.value,"onUpdate:modelValue":t[27]||(t[27]=s=>N.value=s),title:"新建安装派工单",width:"80%","show-close":!1},{footer:l(()=>[e("div",ya,[a(i,{class:"cancel_btn",onClick:t[26]||(t[26]=s=>N.value=!1)},{default:l(()=>[c("取消")]),_:1}),k.value==1?(v(),g(i,{key:0,type:"primary",class:"primary_btn",onClick:pe},{default:l(()=>[c("下一步")]),_:1})):y("",!0),k.value==2?(v(),g(i,{key:1,type:"primary",class:"primary_btn",onClick:ue},{default:l(()=>[c("完成")]),_:1})):y("",!0)])]),default:l(()=>[e("div",da,[e("span",pa,[e("span",{onClick:t[16]||(t[16]=s=>j(1)),class:o(k.value==1?"num_selected":"num")},"1",2),e("span",{class:o(k.value>=1?"name_selected":"name")},[c("选择安装技工 "),ua],2)]),e("span",ca,[e("span",{onClick:t[17]||(t[17]=s=>j(2)),class:o(k.value==2?"num_selected":"num")},"2",2),e("span",{class:o(k.value>=2?"name_selected":"name")},[c("输入安装派工单注意事项 "),ma],2)]),e("span",_a,[e("span",{onClick:t[18]||(t[18]=s=>j(3)),class:o(k.value==3?"num_selected":"num")},"3",2),e("span",{class:o(k.value>=3?"name_selected":"name")},[c("完成创建 "),fa],2)])]),e("div",va,[k.value==1?(v(),g(O,{key:0,model:n,rules:Q,"label-width":"80px","label-position":"left"},{default:l(()=>[a(m,{label:"联系方式",prop:"phone"},{default:l(()=>[a(C,{placeholder:"输入联系方式",modelValue:n.phone,"onUpdate:modelValue":t[19]||(t[19]=s=>n.phone=s)},null,8,["modelValue"])]),_:1}),a(m,{label:"人员名称",prop:"username"},{default:l(()=>[a(C,{placeholder:"查找或输入服务人员姓名",modelValue:n.username,"onUpdate:modelValue":t[20]||(t[20]=s=>n.username=s)},null,8,["modelValue"])]),_:1}),a(m,{label:"预约开始",prop:"appointmentStartTime"},{default:l(()=>[a(L,{modelValue:n.appointmentStartTime,"onUpdate:modelValue":t[21]||(t[21]=s=>n.appointmentStartTime=s),type:"datetime",placeholder:"日期/时间","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue"])]),_:1}),a(m,{label:"预约结束",prop:"appointmentEndTime"},{default:l(()=>[a(L,{modelValue:n.appointmentEndTime,"onUpdate:modelValue":t[22]||(t[22]=s=>n.appointmentEndTime=s),type:"datetime",placeholder:"日期/时间","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue"])]),_:1}),a(m,{label:"安装小组"},{default:l(()=>[e("span",ha,[a(Z,{modelValue:n.installationTeam,"onUpdate:modelValue":t[23]||(t[23]=s=>n.installationTeam=s)},null,8,["modelValue"])])]),_:1}),n.installationTeam?(v(),g(m,{key:0,label:"添加组员"},{default:l(()=>[ba]),_:1})):y("",!0)]),_:1},8,["model","rules"])):y("",!0),k.value==2?(v(),g(O,{key:1,model:n,rules:Q,"label-width":"90px","label-position":"left"},{default:l(()=>[a(m,{label:"优先级",prop:"priority"},{default:l(()=>[a(C,{modelValue:n.priority,"onUpdate:modelValue":t[24]||(t[24]=s=>n.priority=s),placeholder:"1-最高 2-高 3-中 4-低"},null,8,["modelValue"])]),_:1}),a(m,{label:"派工单备注",class:"customLayout"},{default:l(()=>[a(C,{modelValue:n.remark,"onUpdate:modelValue":t[25]||(t[25]=s=>n.remark=s),rows:5,type:"textarea",maxlength:"500",placeholder:"请填写派工单备注","show-word-limit":""},null,8,["modelValue"])]),_:1}),a(m,{label:"上传图片",class:"custom_upload"},{default:l(()=>[a(M,{"on-success":ye,"on-remove":ge,"auto-upload":!0,data:E.value,headers:W.value,"before-upload":xe,"file-list":n.fileList,"list-type":"picture-card",class:"avatar-uploader",action:"https://sh.mengtian.com.cn:9595/md/api/common/file/upload","show-file-list":!0},{default:l(()=>[a(R,{class:"avatar-uploader-icon"},{default:l(()=>[a(_(H))]),_:1})]),_:1},8,["data","headers","file-list"])]),_:1})]),_:1},8,["model","rules"])):y("",!0)])]),_:1},8,["modelValue"])]),e("div",ga,[a(B,{modelValue:U.value,"onUpdate:modelValue":t[34]||(t[34]=s=>U.value=s),title:"问题提报",width:"80%","show-close":!1},{footer:l(()=>[e("div",Ia,[a(i,{class:"cancel_btn",onClick:t[33]||(t[33]=s=>U.value=!1)},{default:l(()=>[c("取消")]),_:1}),a(i,{type:"primary",class:"primary_btn",onClick:_e},{default:l(()=>[c("提交")]),_:1})])]),default:l(()=>[e("span",xa,[e("span",Va,[e("span",{class:o(A.value==1?"num_selected":"num")},"1",2),ka]),e("span",Ca,[e("span",{class:o(A.value==2?"num_selected":"num")},"2",2),Ta])]),e("div",wa,[a(O,{model:T,rules:se,"label-width":"90px","label-position":"left"},{default:l(()=>[a(m,{label:"订单编号",prop:"orderNo"},{default:l(()=>[a(C,{placeholder:"请选择订单编号",modelValue:T.orderNo,"onUpdate:modelValue":t[28]||(t[28]=s=>T.orderNo=s)},null,8,["modelValue"])]),_:1}),a(m,{label:"客户姓名",prop:"customerName"},{default:l(()=>[a(C,{placeholder:"请输入客户姓名",modelValue:T.customerName,"onUpdate:modelValue":t[29]||(t[29]=s=>T.customerName=s)},null,8,["modelValue"])]),_:1}),a(m,{label:"客户电话",prop:"customerPhone"},{default:l(()=>[a(C,{placeholder:"请输入客户电话",modelValue:T.customerPhone,"onUpdate:modelValue":t[30]||(t[30]=s=>T.customerPhone=s)},null,8,["modelValue"])]),_:1}),a(m,{label:"问题描述",class:"customLayout",prop:"desc"},{default:l(()=>[a(C,{modelValue:T.desc,"onUpdate:modelValue":t[31]||(t[31]=s=>T.desc=s),rows:5,type:"textarea",maxlength:"500",placeholder:"请输入问题描述","show-word-limit":""},null,8,["modelValue"])]),_:1}),a(m,{label:"上传图片",class:"custom_upload"},{default:l(()=>[a(M,{class:"avatar-uploader",action:"https://sh.mengtian.com.cn:9595/md/api/common/file/upload","show-file-list":!1,"file-list":T.fileList,"onUpdate:fileList":t[32]||(t[32]=s=>T.fileList=s)},{default:l(()=>[a(R,{class:"avatar-uploader-icon"},{default:l(()=>[a(_(H))]),_:1})]),_:1},8,["file-list"])]),_:1})]),_:1},8,["model","rules"])])]),_:1},8,["modelValue"])])])}}}),Ua=Ee(Pa,[["__scopeId","data-v-fdc7553f"]]);export{Ua as default};
