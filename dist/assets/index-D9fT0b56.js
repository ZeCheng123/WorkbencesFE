import{_ as Je,a as Ye,b as Fe}from"./tips-DfmWQaVF.js";import{_ as K}from"./add-CRTT_dyr.js";import{d as $e,g as Re,r as v,y as Be,a as P,k as Me,E as D,c as J,b as e,s as p,i as _,n as y,w as s,q as g,x as C,e as a,F as j,v as z,z as He,f as k,p as Ae,h as je,o as f,u as m,t as G,_ as ze}from"./index-Dz_sQ5WR.js";import{a as Ge,b as Ke,c as Qe,d as me}from"./common-DiLhKt0H.js";const u=Y=>(Ae("data-v-863d9ac1"),Y=Y(),je(),Y),We={class:"main"},Xe={class:"header"},Ze=u(()=>e("span",{class:"title"},"任务状态",-1)),et={class:"step"},tt={class:"item"},at={class:"item"},lt={class:"item"},st={class:"item"},ot={class:"item"},nt={class:"task_info"},it={class:"title"},rt={class:"main_field"},dt={class:"row_field"},ut={class:"field"},pt=u(()=>e("span",{class:"label"},"任务编号：",-1)),ct={class:"value"},mt={class:"field"},_t=u(()=>e("span",{class:"label"},"经销商：",-1)),ft={class:"value"},vt={class:"field"},ht=u(()=>e("span",{class:"label"},"经销商负责人：",-1)),bt={class:"value"},yt={class:"row_field"},gt={class:"field"},Vt=u(()=>e("span",{class:"label"},"客户名称：",-1)),Tt={class:"value"},Ct={class:"field"},kt=u(()=>e("span",{class:"label"},"当前负责人：",-1)),wt={class:"value"},It={class:"field"},Dt=u(()=>e("span",{class:"label"},"创建时间：",-1)),Nt={class:"value"},xt={class:"row_field"},St={class:"field"},Pt=u(()=>e("span",{class:"label"},"客户电话：",-1)),Ot={class:"value"},qt={class:"field"},Ut=u(()=>e("span",{class:"label"},"客户地址：",-1)),Et={class:"value"},Lt=u(()=>e("span",{class:"field"},[e("span",{class:"label"}),e("span",{class:"value"})],-1)),Jt={class:"order_status"},Yt=u(()=>e("span",{class:"title"},"订单状态",-1)),Ft={class:"step"},$t={class:"item"},Rt={class:"related_item_order"},Bt=u(()=>e("span",{class:"table_title"},"相关项>订单",-1)),Mt={class:"table_content"},Ht=["onClick"],At={class:"related_item_invoice"},jt=u(()=>e("span",{class:"table_title"},"相关项>发货单",-1)),zt={class:"table_content"},Gt=["onClick"],Kt=u(()=>e("span",null,"查看",-1)),Qt=[Kt],Wt={class:"related_item_invoice"},Xt=u(()=>e("span",{class:"table_title"},"相关项>派工单",-1)),Zt={class:"table_content"},ea={style:{display:"flex","align-items":"center",color:"#165dff",cursor:"pointer"}},ta=["onClick"],aa={class:"action_list"},la=u(()=>e("img",{src:Je,alt:""},null,-1)),sa={class:"right"},oa={class:"userinfo"},na=u(()=>e("img",{src:Ye,alt:""},null,-1)),ia={class:"username"},ra={class:"content"},da={class:"date"},ua=u(()=>e("span",{class:"reply"},"回复",-1)),pa=u(()=>e("img",{class:"tips",src:Fe,alt:""},null,-1)),ca={class:"deliveryOrderDialog"},ma={class:"step"},_a={class:"item"},fa=u(()=>e("span",{class:"remark"},"选择配送货品的司机",-1)),va={class:"item"},ha=u(()=>e("span",{class:"remark"},"如有,请填写关键备注",-1)),ba={class:"item"},ya=u(()=>e("span",{class:"remark"},"等待司机配送",-1)),ga={class:"content"},Va=u(()=>e("span",{class:"custom_item"},[e("img",{src:K,alt:""})],-1)),Ta={class:"dialog-footer"},Ca={class:"installationOrderDialog"},ka={class:"step"},wa={class:"item"},Ia=u(()=>e("span",{class:"remark"},"选择负责安装的技工",-1)),Da={class:"item"},Na=u(()=>e("span",{class:"remark"},"如有,请填写关键备注",-1)),xa={class:"item"},Sa=u(()=>e("span",{class:"remark"},"等待现场服务",-1)),Pa={class:"content"},Oa=u(()=>e("span",{class:"custom_item1"},[e("img",{src:K,alt:""})],-1)),qa={style:{width:"300px"}},Ua=u(()=>e("span",{class:"custom_item"},[e("img",{src:K,alt:""})],-1)),Ea={class:"dialog-footer"},La={class:"problemReportingDialog"},Ja={class:"step"},Ya={class:"item"},Fa=u(()=>e("span",{class:"name"},[_("完善提报信息 "),e("span",{class:"remark"},"完善问题提报的信息")],-1)),$a={class:"item"},Ra=u(()=>e("span",{class:"name"},[_("完成创建 "),e("span",{class:"remark"},"等待售服部处理")],-1)),Ba={class:"content"},Ma={class:"dialog-footer"},Ha=$e({__name:"index",setup(Y){const{proxy:Q}=Re(),W=v(4),X=v([]),b=Be();b.query.id,b.query.serviceCaseId;const Z=b.query.orderId,ee=b.query.status!=null?parseInt(b.query.status.toString(),0)+1:1;b.query.taskType;const w=v({taskid:b.query.id,serviceCaseNeoId:b.query.serviceCaseId,orderId:b.query.orderId,taskStatus:ee,accountName:b.query.accountName,distributorName:b.query.distributorName,followerName:b.query.followerName,createdTime:b.query.createdTime,createdBy:b.query.createdBy}),h=v(ee),V=v(1),T=v(1),te=v(1),ae=v();let d=P({fieldJobContactName:"",contactTelephone:"",priority:"",type:"配送派工",remark:"",appointmentStartTime:"",appointmentEndTime:"",haveInstallConditions:!1,fieldJobOrderId:b.query.orderId,fieldJobType__c:0,stage__c:0,name:w.value.accountName+"的配送派工单",fileList:[],filePath:[],followerId:null,address:""});const le=P({followerId:[{required:!0,message:"Please input username",trigger:"blur"}],fieldJobContactName:[{required:!0,message:"Please input username",trigger:"blur"}],contactTelephone:[{required:!0,message:"Please input phone",trigger:"blur"}],priority:[{required:!0,message:"Please input priority",trigger:"blur"}],appointmentStartTime:[{required:!0,message:"Please input appointment start time",trigger:"blur"}],appointmentEndTime:[{required:!0,message:"Please input appointment end time",trigger:"blur"}]}),r=P({username:"",phone:"",remark:"",installationTeam:!1,priority:"",appointmentStartTime:"",appointmentEndTime:"",fileList:[],filePath:[],fieldJobContactName:""}),se=P({username:[{required:!0,message:"Please input username",trigger:"blur"}],phone:[{required:!0,message:"Please input phone",trigger:"blur"}],priority:[{required:!0,message:"Please input priority",trigger:"blur"}],appointmentStartTime:[{required:!0,message:"Please input appointment start time",trigger:"blur"}],appointmentEndTime:[{required:!0,message:"Please input appointment end time",trigger:"blur"}]}),N=P({orderNo:"",customerName:"",customerPhone:"",desc:"",fileList:[]}),_e=P({customerName:[{required:!0,message:"Please input customer name",trigger:"blur"}],customerPhone:[{required:!0,message:"Please input customer phone",trigger:"blur"}],desc:[{required:!0,message:"Please input problem description",trigger:"blur"}]}),O=v(!1),q=v(!1),U=v(!1),I=v({}),oe=v([]),fe=v([]),F=v([]),ne=v({Content:"application/json",Authorization:"",isImage:"true",needFileId:"true","Trace-Id":""}),ie=v({files:[],name:"files"}),re=v({files:[],name:"files"}),R=o=>{V.value=o},B=o=>{T.value=o},ve=()=>{O.value=!0},he=()=>{q.value=!0},be=()=>{V.value=2},ye=()=>{T.value=2},E=v([]),ge=async()=>{console.log(r);let o={fieldJobContactName:w.value.accountName==null?"":w.value.accountName,contactTelephone:I.value.contactTel==null?"":I.value.contactTel,priority:r.priority,remark:r.remark,haveInstallConditions:!1,fieldJobOrderId:b.query.orderId,name:w.value.accountName+"的安装派工单",type:"安装派工",fieldJobType__c:1,stage__c:0,docPicture:r.filePath,appointmentStartTime:r.appointmentStartTime,appointmentEndTime:r.appointmentEndTime,followerId:r.username,address:I.value.customerAddress==null?"":I.value.customerAddress};me(o).then(t=>{let n=t.data.data;F.value.push(n),n!=null?(D({message:"新增派工单成功",type:"success"}),q.value=!1,T.value=1,h.value=5,r.username="",r.phone="",r.remark="",r.priority="",r.appointmentStartTime="",r.appointmentEndTime="",r.fileList=[],r.filePath=[],r.fieldJobContactName="",r.contactTelephone=""):D({message:"新增派工单失败",type:"error"})}).catch(t=>{D({message:"请求新增派工单失败，请重试",type:"error"})})},Ve=o=>{Q.$router.push({path:"/dispatch_details",query:{id:o.id}})},Te=()=>{let o=d;o.fieldJobContactName=w.value.accountName==null?"":w.value.accountName.toString(),o.contactTelephone=I.value.contactTel==null?"":I.value.contactTel.toString(),o.address=I.value.customerAddress==null?"":I.value.customerAddress,o.picture=o.filePath,o.goodsPicture=o.filePath,me(o).then(t=>{let n=t.data.data;F.value.push(n),n!=null?D({message:"新增派工单成功",type:"success"}):D({message:"新增派工单失败",type:"error"}),Object.keys(d).forEach(i=>{!i.includes("type")&&!i.includes("haveInstallConditions")&&i!=="fieldJobOrderId"&&i!=="fieldJobType__c"&&i!=="stage__c"&&i!=="name"&&(d[i]=""),i==="haveInstallConditions"&&(d[i]=!1),(i=="fileList"||i=="filePath")&&(d[i]=[])})}).catch(t=>{D({message:"请求新增派工单失败，请重试",type:"error"}),Object.keys(d).forEach(n=>{n!=="type"&&n!=="haveInstallConditions"&&n!=="fieldJobOrderId"&&n!=="fieldJobType__c"&&n!=="stage__c"&&n!=="name"&&(d[n]=""),n=="haveInstallConditions"&&(d[n]=!1),(n=="fileList"||n=="filePath")&&(d[n]=[])}),console.error("请求新增派工单失败:",t)}),O.value=!1,V.value=1,h.value=5},Ce=()=>{U.value=!0},ke=()=>{U.value=!1,Q.$message.success("提交成功!")},we=()=>{He.prompt("请填写评论内容","发起评论",{inputPattern:/\S/,inputErrorMessage:"评论内容不能为空!",confirmButtonText:"确认",cancelButtonText:"取消"}).then(({value:o})=>{X.value.push({userName:"经销商",text:o,date:new Date().toLocaleString()})}).catch(()=>{})};Me(()=>{xe(!1,Z),Pe(!1),Se(!1,Z)});const Ie=o=>{if(console.log(o),o.code=="success"){let t=o.data.map(n=>n.fileId);t[0]&&d.filePath.push(t[0])}},De=o=>{o.response},Ne=o=>{ie.value.files=[o]},xe=(o,t)=>{Ge(t).then(n=>{let i=n.data.data;i!=null?(I.value=i,oe.value.push(i),o&&D({message:"查询成功",type:"success"})):o&&D({message:"获取数据失败",type:"error"})})},Se=(o,t)=>{if(t==null)return;Ke({fieldJobOrderId:t}).then(i=>{let S=i.data.data;S!=null?(F.value=S,o&&D({message:"查询成功",type:"success"})):o&&D({message:"获取数据失败",type:"error"})})},Pe=o=>{Qe({userType:1,name:"",phone:""}).then(n=>{let i=n.data.data;i!=null&&i.length>0?(E.value=i,o&&D({message:"查询成功",type:"success"})):o&&D({message:"获取数据失败",type:"error"})})},Oe=o=>{if(console.log(o),o.code=="success"){let t=o.data.map(n=>n.fileId);t[0]&&r.filePath.push(t[0])}},qe=o=>{o.response},Ue=o=>{re.value.files=[o]},Ee=o=>{let t=E.value.find(n=>n.id==o);t&&(r.fieldJobContactName=t.name,r.phone=t.phone)},Le=o=>{let t=E.value.find(n=>n.id==o);t&&(d.fieldJobContactName=t.name,d.contactTelephone=t.phone)};return(o,t)=>{const n=k("el-button"),i=k("el-table-column"),S=k("el-table"),de=k("el-option"),ue=k("el-select"),c=k("el-form-item"),x=k("el-input"),$=k("el-date-picker"),pe=k("el-checkbox"),L=k("el-form"),M=k("el-icon"),H=k("el-upload"),A=k("el-dialog");return f(),J("div",We,[e("span",Xe,[Ze,e("span",et,[e("span",tt,[e("span",{class:p(h.value==1?"num_selected":"num")},"1",2),e("span",{class:p(h.value>=1?"name_selected":"name")},"待处理",2)]),e("span",at,[e("span",{class:p(h.value==3?"num_selected":"num")},"2",2),e("span",{class:p(h.value>=3?"name_selected":"name")},"入库",2)]),e("span",lt,[e("span",{onClick:t[0]||(t[0]=l=>h.value=4),class:p(h.value==4?"num_selected":"num")},"3",2),e("span",{class:p(h.value>=4?"name_selected":"name")},"配送",2)]),e("span",st,[e("span",{class:p(h.value==5?"num_selected":"num")},"4",2),e("span",{class:p(h.value>=5?"name_selected":"name")},"安装",2)]),e("span",ot,[e("span",{class:p(h.value==6?"num_selected":"num")},"5",2),e("span",{class:p(h.value>=6?"name_selected":"name")},"完成",2)])])]),e("span",nt,[e("span",it,[_("任务详情 "),h.value>=5?(f(),y(n,{key:0,type:"primary",class:"primary_blue_btn"},{default:s(()=>[_("已派工配送")]),_:1})):g("",!0),h.value==6?(f(),y(n,{key:1,type:"primary",class:"primary_green_btn"},{default:s(()=>[_("已派工安装")]),_:1})):g("",!0)]),e("span",rt,[e("span",dt,[e("span",ut,[pt,e("span",ct,C(w.value.taskid),1),g("",!0)]),e("span",mt,[_t,e("span",ft,C(w.value.distributorName),1)]),e("span",vt,[ht,e("span",bt,C(w.value.followerName),1)])]),e("span",yt,[e("span",gt,[Vt,e("span",Tt,C(w.value.accountName),1)]),e("span",Ct,[kt,e("span",wt,C(w.value.createdBy),1)]),e("span",It,[Dt,e("span",Nt,C(w.value.createdTime),1)])]),e("span",xt,[e("span",St,[Pt,e("span",Ot,C(I.value.contactTel),1)]),e("span",qt,[Ut,e("span",Et,C(I.value.customerAddress),1)]),Lt])])]),e("span",Jt,[Yt,e("span",Ft,[e("span",$t,[e("span",{class:p(W.value==1?"num_selected":"num")},"1",2),e("span",{class:p(W.value>=1?"name_selected":"name")},C(I.value.status__c),3)])])]),e("span",Rt,[Bt,e("span",Mt,[a(S,{data:oe.value,stripe:!1,style:{width:"100%"}},{default:s(()=>[a(i,{prop:"id",label:"操作",width:"80px"},{default:s(l=>[e("div",{style:{display:"flex","align-items":"center",color:"#165dff",cursor:"pointer"},onClick:ce=>console.log(l)}," 查看 ",8,Ht)]),_:1}),a(i,{prop:"po",label:"订单编号"}),a(i,{prop:"orderFlow",label:"订单流程"}),a(i,{prop:"estimatedDeliveryDays",label:"交期天数"}),a(i,{prop:"orderDate",label:"订货日期"}),a(i,{prop:"planedDeliveryDate",label:"计划交货日期"}),a(i,{prop:"createdTime",label:"创建时间"})]),_:1},8,["data"])])]),e("span",At,[jt,e("span",zt,[a(S,{data:fe.value,stripe:!1,style:{width:"100%"}},{default:s(()=>[a(i,{prop:"id",label:"操作",width:"160px"},{default:s(l=>[e("div",{style:{display:"flex","align-items":"center",color:"#165dff",cursor:"pointer"},onClick:ce=>console.log(l)},Qt,8,Gt)]),_:1}),a(i,{prop:"name",label:"发货单编号"}),a(i,{prop:"status",label:"发货单状态"}),a(i,{prop:"shipVia",label:"出库方式"}),a(i,{prop:"shipCarrier",label:"供应基地"}),a(i,{prop:"createdTime",label:"创建时间"})]),_:1},8,["data"])])]),e("span",Wt,[Xt,e("span",Zt,[a(S,{data:F.value,stripe:!1,style:{width:"100%"}},{default:s(()=>[a(i,{prop:"view",label:"操作",width:"160px"},{default:s(l=>[e("div",ea,[e("span",{onClick:ce=>Ve(l.row)},"查看",8,ta)])]),_:1}),a(i,{prop:"id",label:"派工单编号"}),a(i,{prop:"stage__c",label:"状态"},{default:s(l=>[e("span",null,C(l.row.stage__c=="0"?"待开始":l.row.stage__c=="1"?"进行中":"已完成"),1)]),_:1}),a(i,{prop:"appointmentStartTime",label:"计划开始时间"}),a(i,{prop:"appointmentEndTime",label:"计划结束时间"}),a(i,{prop:"createTime",label:"创建时间"})]),_:1},8,["data"])])]),e("div",aa,[e("div",{class:"left"},[la,e("span",{class:"initiate_comments",onClick:we},"发起评论")]),e("div",sa,[h.value==4?(f(),y(n,{key:0,type:"primary",onClick:ve,class:"primary_btn"},{default:s(()=>[_("创建配送派工单")]),_:1})):g("",!0),h.value==5?(f(),y(n,{key:1,type:"primary",onClick:he,class:"primary_btn"},{default:s(()=>[_("创建安装派工单")]),_:1})):g("",!0),a(n,{type:"primary",onClick:Ce,class:"primary_btn"},{default:s(()=>[_("问题提报")]),_:1})])]),(f(!0),J(j,null,z(X.value,l=>(f(),J("div",{class:"comment",key:l.date},[e("div",oa,[na,e("span",ia,C(l.userName),1)]),e("div",ra,C(l.text),1),e("div",da,C(l.date),1),ua,pa]))),128)),e("div",ca,[a(A,{modelValue:O.value,"onUpdate:modelValue":t[14]||(t[14]=l=>O.value=l),title:"新建配送派工单",width:"80%","show-close":!1},{footer:s(()=>[e("div",Ta,[a(n,{class:"cancel_btn",onClick:t[13]||(t[13]=l=>O.value=!1)},{default:s(()=>[_("取消")]),_:1}),V.value==1?(f(),y(n,{key:0,type:"primary",class:"primary_btn",onClick:be},{default:s(()=>[_("下一步")]),_:1})):g("",!0),V.value==2?(f(),y(n,{key:1,type:"primary",class:"primary_btn",onClick:Te},{default:s(()=>[_("完成")]),_:1})):g("",!0)])]),default:s(()=>[e("div",ma,[e("span",_a,[e("span",{onClick:t[1]||(t[1]=l=>R(1)),class:p(V.value==1?"num_selected":"num")},"1",2),e("span",{class:p(V.value>=1?"name_selected":"name")},[_("选择配送司机 "),fa],2)]),e("span",va,[e("span",{onClick:t[2]||(t[2]=l=>R(2)),class:p(V.value==2?"num_selected":"num")},"2",2),e("span",{class:p(V.value>=2?"name_selected":"name")},[_("输入派工单注意事项 "),ha],2)]),e("span",ba,[e("span",{onClick:t[3]||(t[3]=l=>R(3)),class:p(V.value==3?"num_selected":"num")},"3",2),e("span",{class:p(V.value>=3?"name_selected":"name")},[_("完成创建 "),ya],2)])]),e("div",ga,[V.value==1?(f(),y(L,{key:0,model:m(d),rules:le,ref_key:"deliveryOrderFormRef",ref:ae,"label-width":"90px","label-position":"left"},{default:s(()=>[a(c,{label:"人员名称",prop:"followerId"},{default:s(()=>[a(ue,{modelValue:m(d).followerId,"onUpdate:modelValue":t[4]||(t[4]=l=>m(d).followerId=l),onChange:Le,placeholder:"查找或输入服务人员姓名"},{default:s(()=>[(f(!0),J(j,null,z(E.value,l=>(f(),y(de,{key:l.name,label:l.name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),Va]),_:1}),a(c,{label:"联系方式",prop:"contactTelephone"},{default:s(()=>[a(x,{modelValue:m(d).contactTelephone,"onUpdate:modelValue":t[5]||(t[5]=l=>m(d).contactTelephone=l),placeholder:"查找或输入配送司机手机号码"},null,8,["modelValue"])]),_:1}),a(c,{label:"预约开始",prop:"appointmentStartTime"},{default:s(()=>[a($,{modelValue:m(d).appointmentStartTime,"onUpdate:modelValue":t[6]||(t[6]=l=>m(d).appointmentStartTime=l),type:"datetime",placeholder:"日期/时间","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue"])]),_:1}),a(c,{label:"预约结束",prop:"appointmentEndTime"},{default:s(()=>[a($,{modelValue:m(d).appointmentEndTime,"onUpdate:modelValue":t[7]||(t[7]=l=>m(d).appointmentEndTime=l),type:"datetime",placeholder:"日期/时间","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue"])]),_:1}),a(c,{label:"是否具备安装条件",class:"check_item"},{default:s(()=>[e("span",null,[a(pe,{modelValue:m(d).haveInstallConditions,"onUpdate:modelValue":t[8]||(t[8]=l=>m(d).haveInstallConditions=l)},null,8,["modelValue"])])]),_:1})]),_:1},8,["model","rules"])):g("",!0),V.value==2?(f(),y(L,{key:1,model:m(d),rules:le,ref_key:"deliveryOrderFormRef",ref:ae,"label-width":"90px","label-position":"left"},{default:s(()=>[a(c,{label:"优先级",prop:"priority"},{default:s(()=>[a(x,{placeholder:"1-最高 2-高 3-中 4-低",modelValue:m(d).priority,"onUpdate:modelValue":t[9]||(t[9]=l=>m(d).priority=l)},null,8,["modelValue"])]),_:1}),a(c,{label:"派工类型",prop:"type"},{default:s(()=>[a(x,{disabled:"",placeholder:"配送派工",modelValue:m(d).type,"onUpdate:modelValue":t[10]||(t[10]=l=>m(d).type=l)},null,8,["modelValue"])]),_:1}),a(c,{label:"派工单备注",class:"customLayout"},{default:s(()=>[a(x,{modelValue:m(d).remark,"onUpdate:modelValue":t[11]||(t[11]=l=>m(d).remark=l),rows:5,type:"textarea",maxlength:"500",placeholder:"请填写派工单备注","show-word-limit":""},null,8,["modelValue"])]),_:1}),a(c,{label:"上传图片",class:"custom_upload"},{default:s(()=>[a(H,{"on-success":Ie,"on-remove":De,"auto-upload":!0,data:ie.value,headers:ne.value,"before-upload":Ne,"file-list":m(d).fileList,"onUpdate:fileList":t[12]||(t[12]=l=>m(d).fileList=l),class:"avatar-uploader",action:"https://sh.mengtian.com.cn:9595/md/api/common/file/upload","show-file-list":!0,"list-type":"picture-card"},{default:s(()=>[a(M,{class:"avatar-uploader-icon"},{default:s(()=>[a(m(G))]),_:1})]),_:1},8,["data","headers","file-list"])]),_:1})]),_:1},8,["model","rules"])):g("",!0)])]),_:1},8,["modelValue"])]),e("div",Ca,[a(A,{modelValue:q.value,"onUpdate:modelValue":t[26]||(t[26]=l=>q.value=l),title:"新建安装派工单",width:"80%","show-close":!1},{footer:s(()=>[e("div",Ea,[a(n,{class:"cancel_btn",onClick:t[25]||(t[25]=l=>q.value=!1)},{default:s(()=>[_("取消")]),_:1}),T.value==1?(f(),y(n,{key:0,type:"primary",class:"primary_btn",onClick:ye},{default:s(()=>[_("下一步")]),_:1})):g("",!0),T.value==2?(f(),y(n,{key:1,type:"primary",class:"primary_btn",onClick:ge},{default:s(()=>[_("完成")]),_:1})):g("",!0)])]),default:s(()=>[e("div",ka,[e("span",wa,[e("span",{onClick:t[15]||(t[15]=l=>B(1)),class:p(T.value==1?"num_selected":"num")},"1",2),e("span",{class:p(T.value>=1?"name_selected":"name")},[_("选择安装技工 "),Ia],2)]),e("span",Da,[e("span",{onClick:t[16]||(t[16]=l=>B(2)),class:p(T.value==2?"num_selected":"num")},"2",2),e("span",{class:p(T.value>=2?"name_selected":"name")},[_("输入安装派工单注意事项 "),Na],2)]),e("span",xa,[e("span",{onClick:t[17]||(t[17]=l=>B(3)),class:p(T.value==3?"num_selected":"num")},"3",2),e("span",{class:p(T.value>=3?"name_selected":"name")},[_("完成创建 "),Sa],2)])]),e("div",Pa,[T.value==1?(f(),y(L,{key:0,model:r,rules:se,"label-width":"80px","label-position":"left"},{default:s(()=>[a(c,{label:"人员名称",prop:"username"},{default:s(()=>[a(ue,{modelValue:r.username,"onUpdate:modelValue":t[18]||(t[18]=l=>r.username=l),onChange:Ee,placeholder:"查找或输入服务人员姓名"},{default:s(()=>[(f(!0),J(j,null,z(E.value,l=>(f(),y(de,{key:l.name,label:l.name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),Oa]),_:1}),a(c,{label:"联系方式",prop:"phone"},{default:s(()=>[a(x,{placeholder:"输入联系方式",modelValue:r.phone,"onUpdate:modelValue":t[19]||(t[19]=l=>r.phone=l)},null,8,["modelValue"])]),_:1}),a(c,{label:"预约开始",prop:"appointmentStartTime"},{default:s(()=>[a($,{modelValue:r.appointmentStartTime,"onUpdate:modelValue":t[20]||(t[20]=l=>r.appointmentStartTime=l),type:"datetime",placeholder:"日期/时间","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue"])]),_:1}),a(c,{label:"预约结束",prop:"appointmentEndTime"},{default:s(()=>[a($,{modelValue:r.appointmentEndTime,"onUpdate:modelValue":t[21]||(t[21]=l=>r.appointmentEndTime=l),type:"datetime",placeholder:"日期/时间","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue"])]),_:1}),a(c,{label:"安装小组"},{default:s(()=>[e("span",qa,[a(pe,{modelValue:r.installationTeam,"onUpdate:modelValue":t[22]||(t[22]=l=>r.installationTeam=l)},null,8,["modelValue"])])]),_:1}),r.installationTeam?(f(),y(c,{key:0,label:"添加组员"},{default:s(()=>[Ua]),_:1})):g("",!0)]),_:1},8,["model","rules"])):g("",!0),T.value==2?(f(),y(L,{key:1,model:r,rules:se,"label-width":"90px","label-position":"left"},{default:s(()=>[a(c,{label:"优先级",prop:"priority"},{default:s(()=>[a(x,{modelValue:r.priority,"onUpdate:modelValue":t[23]||(t[23]=l=>r.priority=l),placeholder:"1-最高 2-高 3-中 4-低"},null,8,["modelValue"])]),_:1}),a(c,{label:"派工单备注",class:"customLayout"},{default:s(()=>[a(x,{modelValue:r.remark,"onUpdate:modelValue":t[24]||(t[24]=l=>r.remark=l),rows:5,type:"textarea",maxlength:"500",placeholder:"请填写派工单备注","show-word-limit":""},null,8,["modelValue"])]),_:1}),a(c,{label:"上传图片",class:"custom_upload"},{default:s(()=>[a(H,{"on-success":Oe,"on-remove":qe,"auto-upload":!0,data:re.value,headers:ne.value,"before-upload":Ue,"file-list":r.fileList,"list-type":"picture-card",class:"avatar-uploader",action:"https://sh.mengtian.com.cn:9595/md/api/common/file/upload","show-file-list":!0},{default:s(()=>[a(M,{class:"avatar-uploader-icon"},{default:s(()=>[a(m(G))]),_:1})]),_:1},8,["data","headers","file-list"])]),_:1})]),_:1},8,["model","rules"])):g("",!0)])]),_:1},8,["modelValue"])]),e("div",La,[a(A,{modelValue:U.value,"onUpdate:modelValue":t[33]||(t[33]=l=>U.value=l),title:"问题提报",width:"80%","show-close":!1},{footer:s(()=>[e("div",Ma,[a(n,{class:"cancel_btn",onClick:t[32]||(t[32]=l=>U.value=!1)},{default:s(()=>[_("取消")]),_:1}),a(n,{type:"primary",class:"primary_btn",onClick:ke},{default:s(()=>[_("提交")]),_:1})])]),default:s(()=>[e("span",Ja,[e("span",Ya,[e("span",{class:p(te.value==1?"num_selected":"num")},"1",2),Fa]),e("span",$a,[e("span",{class:p(te.value==2?"num_selected":"num")},"2",2),Ra])]),e("div",Ba,[a(L,{model:N,rules:_e,"label-width":"90px","label-position":"left"},{default:s(()=>[a(c,{label:"订单编号",prop:"orderNo"},{default:s(()=>[a(x,{placeholder:"请选择订单编号",modelValue:N.orderNo,"onUpdate:modelValue":t[27]||(t[27]=l=>N.orderNo=l)},null,8,["modelValue"])]),_:1}),a(c,{label:"客户姓名",prop:"customerName"},{default:s(()=>[a(x,{placeholder:"请输入客户姓名",modelValue:N.customerName,"onUpdate:modelValue":t[28]||(t[28]=l=>N.customerName=l)},null,8,["modelValue"])]),_:1}),a(c,{label:"客户电话",prop:"customerPhone"},{default:s(()=>[a(x,{placeholder:"请输入客户电话",modelValue:N.customerPhone,"onUpdate:modelValue":t[29]||(t[29]=l=>N.customerPhone=l)},null,8,["modelValue"])]),_:1}),a(c,{label:"问题描述",class:"customLayout",prop:"desc"},{default:s(()=>[a(x,{modelValue:N.desc,"onUpdate:modelValue":t[30]||(t[30]=l=>N.desc=l),rows:5,type:"textarea",maxlength:"500",placeholder:"请输入问题描述","show-word-limit":""},null,8,["modelValue"])]),_:1}),a(c,{label:"上传图片",class:"custom_upload"},{default:s(()=>[a(H,{class:"avatar-uploader",action:"https://sh.mengtian.com.cn:9595/md/api/common/file/upload","show-file-list":!1,"file-list":N.fileList,"onUpdate:fileList":t[31]||(t[31]=l=>N.fileList=l)},{default:s(()=>[a(M,{class:"avatar-uploader-icon"},{default:s(()=>[a(m(G))]),_:1})]),_:1},8,["file-list"])]),_:1})]),_:1},8,["model","rules"])])]),_:1},8,["modelValue"])])])}}}),Ka=ze(Ha,[["__scopeId","data-v-863d9ac1"]]);export{Ka as default};
