import{_ as R,a as j,b as J}from"./logoXX-KcEG4fMf.js";import{_ as K}from"./plus-B8sn_dc4.js";import{G as Q,a as X}from"./common-DvLzv8E6.js";import{d as Z,g as ee,r as v,o as le,A as te,E as H,c as C,h as o,b as t,w as a,F as k,e as _,p as ae,f as oe,i as b,q as U,x as $,j as w,t as I,_ as se}from"./index-CYx_7u_I.js";import"./userinfo-CGvVdpj9.js";const N=x=>(ae("data-v-3f5a51ef"),x=x(),oe(),x),ne={class:"main"},re=N(()=>o("span",{class:"header"}," 我的人员 ",-1)),ue={class:"search"},de={class:"left"},ie=N(()=>o("span",{style:{width:"336px",height:"32px"}},null,-1)),pe={class:"right"},me=N(()=>o("img",{src:j,alt:""},null,-1)),ce=N(()=>o("img",{src:J,alt:""},null,-1)),ve={class:"table_header"},_e=N(()=>o("span",{class:"left"},[o("img",{src:R,alt:""}),o("span",{class:"title"})],-1)),ge={class:"right"},fe=N(()=>o("img",{src:K,alt:""},null,-1)),be=["onClick"],he={class:"showDialog"},ye={class:"content"},Ve={class:"custom-row"},Ne={class:"custom-row"},we={class:"custom-row"},xe={class:"custom-row"},Te={class:"dialog-footer"},Ce=Z({__name:"index",setup(x){const{proxy:A}=ee(),g=v({pageIndex:1,pageSize:15,total:0}),S=v(),h=v(!1),m=v({userType:"",name:"",phone:""}),s=v({userType:"",name:"",phone:"",status:1,storeNo:"HY0011",storeName:"梦天木门集团有限公司",distributorNo:"HY01",distributorName:"梦天集团",generalAgentNo:"GD01",generalAgentName:"梦天"}),D=v({name:[{required:!0,message:"姓名不能为空",trigger:"blur"}],phone:[{required:!0,message:"电话不能为空",trigger:"blur"},{validator:(u,e)=>/^1\d{10}$/.test(e)?Promise.resolve():Promise.reject("电话格式不正确"),trigger:"blur"}],userType:[{required:!0,message:"人员类型不能为空",trigger:"blur"}],status:[{required:!0,message:"状态不能为空",trigger:"blur"}]}),z=v([{code:1,name:"技工"},{code:2,name:"经销商用户"},{code:3,name:"配送司机"}]),F=v([{code:1,name:"在职"},{code:2,name:"离职"}]),E=v([]),y=v("add"),f=v(null);le(()=>{console.log(A.$router.options.routes),T();const u="100%"/"100%";if(window.addEventListener("resize",te.debounce(function(){const n=document.body.clientHeight,c=document.body.clientWidth;if(c<1680){const d=n/c;let[r,V]=[0,0];if(d<u){r=n/1080;const p=1920*r,i=c-p;V=i>0?`translate(${i/2}px, 0)`:""}else{r=(c-20)/1920;const p=1080*r,i=n-p;V=i>0?`translate(0, ${i/2}px)`:""}if(d<.52){let p=document.body.clientHeight/r-242*r-10;f.value&&(f.value.style.height=`${p}px`)}else if(f.value){let p=document.body.clientHeight*r+242*r+10;f.value.style.height=`${p}px`}}else f.value&&(f.value.style.height=`calc(${document.body.clientHeight}px - 242px)`)},66)),document.createEvent){var e=document.createEvent("HTMLEvents");e.initEvent("resize",!0,!0),window.dispatchEvent(e)}else typeof Event=="function"&&window.dispatchEvent(new Event("resize"))});const T=()=>{let u={userType:m.value.userType,name:m.value.name,phone:m.value.phone,pageNo:g.value.pageIndex,pageSize:g.value.pageSize};Q(u).then(e=>{let n=e.data;n.code=="success"?(E.value=n.data,g.value={pageIndex:e.data.current==null?1:parseInt(e.data.current),pageSize:e.data.size,total:e.data.total}):(E.value=[],g.value={pageIndex:1,pageSize:15,total:0},console.log("失败"))}).catch(e=>{H({message:"请求数据失败，请重试",type:"error"}),console.error("请求数据失败:",e)})},Y=()=>{m.value={userType:"",name:"",phone:""}},q=()=>{y.value="add",h.value=!0},L=()=>{s.value={userType:1,name:"",phone:"",status:1,storeNo:"HY0011",storeName:"梦天木门集团有限公司",distributorNo:"HY01",distributorName:"梦天集团",generalAgentNo:"GD01",generalAgentName:"梦天"},S.value.clearValidate(),h.value=!1},B=()=>{S.value.validate(u=>{if(u){let e=s.value;y.value=="edit"&&delete e.createdTime,X(e).then(n=>{var c;((c=n==null?void 0:n.data)==null?void 0:c.code)=="success"?(s.value={userType:1,name:"",phone:"",status:1,storeNo:"HY0011",storeName:"梦天木门集团有限公司",distributorNo:"HY01",distributorName:"梦天集团",generalAgentNo:"GD01",generalAgentName:"梦天"},h.value=!1,H({message:y.value=="add"?"新增成功!":"编辑成功!",type:"success"}),setTimeout(()=>{T()},500)):console.log("失败")}).catch(n=>{H({message:y.value=="add"?"新增失败!":"编辑失败!",type:"error"}),console.error("新增失败:",n)})}})},G=u=>{let e=JSON.parse(JSON.stringify(u));s.value=e,y.value="edit",h.value=!0},M=u=>{g.value.pageIndex=u,T()};return(u,e)=>{const n=_("el-option"),c=_("el-select"),d=_("el-form-item"),r=_("el-input"),V=_("el-form"),p=_("el-button"),i=_("el-table-column"),O=_("el-table"),W=_("el-pagination"),P=_("el-dialog");return b(),C(k,null,[o("div",ne,[re,o("span",ue,[o("span",de,[t(V,{model:m.value,rules:u.rule,"label-width":"80px","label-position":"left"},{default:a(()=>[t(d,{label:"人员类型"},{default:a(()=>[t(c,{modelValue:m.value.userType,"onUpdate:modelValue":e[0]||(e[0]=l=>m.value.userType=l),placeholder:"请选择人员类型",clearable:""},{default:a(()=>[(b(!0),C(k,null,U(z.value,l=>(b(),$(n,{key:l.code,label:l.name,value:l.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(d,{label:"人员姓名"},{default:a(()=>[t(r,{placeholder:"输入人员姓名",modelValue:m.value.name,"onUpdate:modelValue":e[1]||(e[1]=l=>m.value.name=l)},null,8,["modelValue"])]),_:1}),t(d,{label:"人员电话"},{default:a(()=>[t(r,{placeholder:"输入人员电话",modelValue:m.value.phone,"onUpdate:modelValue":e[2]||(e[2]=l=>m.value.phone=l)},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"]),t(V,{model:m.value,rules:u.rule,"label-width":"80px","label-position":"left"},{default:a(()=>[ie]),_:1},8,["model","rules"])]),o("span",pe,[t(p,{onClick:e[3]||(e[3]=l=>T()),type:"primary",class:"search_btn"},{icon:a(()=>[me]),default:a(()=>[w("查询")]),_:1}),t(p,{type:"primary",onClick:e[4]||(e[4]=l=>Y()),class:"reset_btn"},{icon:a(()=>[ce]),default:a(()=>[w("重置")]),_:1})])]),o("span",ve,[_e,o("span",ge,[t(p,{onClick:e[5]||(e[5]=l=>q()),type:"primary",class:"search_btn"},{icon:a(()=>[fe]),default:a(()=>[w("新建")]),_:1})])]),o("span",{class:"table",ref_key:"mainTable",ref:f},[t(O,{class:"table_content",data:E.value,stripe:!1,style:{width:"100%"}},{default:a(()=>[t(i,{prop:"id",label:"人员编号"}),t(i,{prop:"name",label:"姓名"}),t(i,{prop:"phone",label:"电话"}),t(i,{prop:"userType",label:"人员类型"},{default:a(l=>[o("div",null,I(l.row.userType==1?"技工":l.row.userType==2?"经销商":"配送司机"),1)]),_:1}),t(i,{prop:"status",label:"人员状态"},{default:a(l=>[o("div",null,I(l.row.status==1?"在职":"离职"),1)]),_:1}),t(i,{prop:"distributorName",label:"经销商名称"}),t(i,{prop:"createdTime",label:"创建时间"}),t(i,{prop:"userType",label:"操作",width:"80px"},{default:a(l=>[o("div",{style:{display:"flex","align-items":"center",color:"#165dff",cursor:"pointer"},onClick:ke=>G(l.row)}," 编辑 ",8,be)]),_:1})]),_:1},8,["data"]),t(W,{"pager-count-format":u.pagerCountFormat,onCurrentChange:M,class:"table_pagination","page-size":g.value.pageSize,layout:"total, prev, pager, next",total:g.value.total},null,8,["pager-count-format","page-size","total"])],512)]),o("div",he,[t(P,{modelValue:h.value,"onUpdate:modelValue":e[16]||(e[16]=l=>h.value=l),title:y.value=="add"?"新增人员":"编辑人员",width:"60%","show-close":!1},{footer:a(()=>[o("div",Te,[t(p,{class:"cancel_btn",onClick:e[14]||(e[14]=l=>L())},{default:a(()=>[w("取消")]),_:1}),t(p,{onClick:e[15]||(e[15]=l=>B()),type:"primary",class:"primary_btn"},{default:a(()=>[w("确认")]),_:1})])]),default:a(()=>[o("div",ye,[t(V,{model:s.value,rules:D.value,ref_key:"formRef",ref:S,"label-width":"90px","label-position":"right"},{default:a(()=>[o("div",Ve,[t(d,{label:"姓名",prop:"name"},{default:a(()=>[t(r,{placeholder:"请输入姓名",modelValue:s.value.name,"onUpdate:modelValue":e[6]||(e[6]=l=>s.value.name=l)},null,8,["modelValue"])]),_:1}),t(d,{label:"电话",prop:"phone"},{default:a(()=>[t(r,{placeholder:"请输入电话",modelValue:s.value.phone,"onUpdate:modelValue":e[7]||(e[7]=l=>s.value.phone=l)},null,8,["modelValue"])]),_:1})]),o("div",Ne,[t(d,{label:"人员类型",prop:"userType"},{default:a(()=>[t(c,{modelValue:s.value.userType,"onUpdate:modelValue":e[8]||(e[8]=l=>s.value.userType=l),placeholder:"请选择人员类型"},{default:a(()=>[(b(!0),C(k,null,U(z.value,l=>(b(),$(n,{key:l.code,label:l.name,value:l.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(d,{label:"人员状态",prop:"status"},{default:a(()=>[t(c,{modelValue:s.value.status,"onUpdate:modelValue":e[9]||(e[9]=l=>s.value.status=l),placeholder:"请选择人员状态"},{default:a(()=>[(b(!0),C(k,null,U(F.value,l=>(b(),$(n,{key:l.code,label:l.name,value:l.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),o("div",we,[t(d,{label:"门店编码"},{default:a(()=>[t(r,{placeholder:"请输入门店编码",modelValue:s.value.storeNo,"onUpdate:modelValue":e[10]||(e[10]=l=>s.value.storeNo=l)},null,8,["modelValue"])]),_:1}),t(d,{label:"门店名称"},{default:a(()=>[t(r,{placeholder:"请输入门店名称",modelValue:s.value.storeName,"onUpdate:modelValue":e[11]||(e[11]=l=>s.value.storeName=l)},null,8,["modelValue"])]),_:1})]),o("div",xe,[t(d,{label:"经销商编码"},{default:a(()=>[t(r,{placeholder:"请输入经销商编码",modelValue:s.value.distributorNo,"onUpdate:modelValue":e[12]||(e[12]=l=>s.value.distributorNo=l)},null,8,["modelValue"])]),_:1}),t(d,{label:"经销商名称"},{default:a(()=>[t(r,{placeholder:"请输入经销商名称",modelValue:s.value.distributorName,"onUpdate:modelValue":e[13]||(e[13]=l=>s.value.distributorName=l)},null,8,["modelValue"])]),_:1})])]),_:1},8,["model","rules"])])]),_:1},8,["modelValue","title"])])],64)}}}),ze=se(Ce,[["__scopeId","data-v-3f5a51ef"]]);export{ze as default};
