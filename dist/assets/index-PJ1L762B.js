import{_ as q,a as L,b as O}from"./logoXX-Cy74BE6B.js";import{_ as P}from"./download-Dan4AgsM.js";import{d as j,g as A,r as m,a as G,k as H,V as K,E as k,c as x,b as o,e as a,w as l,f as i,p as Q,h as R,o as h,F as W,B as I,q as z,i as N,t as D,_ as X}from"./index-CXdlkYQW.js";const u=f=>(Q("data-v-f7d6fe6e"),f=f(),R(),f),Y={class:"main"},Z=u(()=>o("span",{class:"header"}," 派工单 ",-1)),ee={class:"search"},te={class:"left"},ae=u(()=>o("span",{style:{width:"336px",height:"32px"}},null,-1)),le={class:"right"},oe=u(()=>o("img",{src:L,alt:""},null,-1)),ne=u(()=>o("img",{src:O,alt:""},null,-1)),se={class:"table_header"},ie=u(()=>o("span",{class:"left"},[o("img",{src:q,alt:""}),o("span",{class:"title"})],-1)),de={class:"right"},re=u(()=>o("img",{src:P,alt:""},null,-1)),ce={class:"table"},pe={style:{display:"flex","align-items":"center"}},_e={style:{display:"flex","align-items":"center"}},ue=["onClick"],me=j({__name:"index",setup(f){const{proxy:B}=A(),p=m({pageIndex:1,pageSize:15,total:0}),t=G({dispatchWorkerNo:"",technicianName:"",technicianType:"",filterMethod:"",createDate:[],dispatchWorkerStatus:""});m([{value:"all",label:"全部"}]);const V=m([{code:"",name:"全部"},{code:"0",name:"配送派工单"},{code:"1",name:"安装派工单"},{code:"2",name:"维修派工单"}]),S=m([{code:"",name:"全部"},{code:"0",name:"待开始"},{code:"1",name:"进行中"},{code:"2",name:"已完成"}]),b=m([]),E=d=>{B.$router.push({path:"/dispatch_details",query:{id:d.id}})};H(()=>{g(!1)});const g=d=>{let n={fieldJobType__c:t.technicianType==null?"":t.technicianType,appointmentEndTime:"",createdTime:"",status:t.dispatchWorkerStatus==null?"":t.dispatchWorkerStatus,caseNo:t.dispatchWorkerNo==null?"":t.dispatchWorkerNo,artisanName:t.technicianName==null?"":t.technicianName,pageSize:p.value.pageSize,pageNo:p.value.pageIndex};K(n).then(s=>{let r=s.data.data;r.length>0?(b.value=r,d&&k({message:"查询成功",type:"success"})):(b.value=[],k({message:"暂无对应数据",type:"error"})),p.value={pageIndex:s.data.current==null?1:parseInt(s.data.current),pageSize:s.data.size,total:s.data.total}}).catch(s=>{k({message:"请求数据失败，请重试",type:"error"}),console.error("请求数据失败:",s)})},J=d=>{p.value.pageIndex=d,g(!1)},U=()=>{t.dispatchWorkerNo="",t.technicianName="",t.technicianType="",t.filterMethod="",t.createDate=[],t.dispatchWorkerStatus="",g(!1)};return(d,n)=>{const s=i("el-input"),r=i("el-form-item"),T=i("el-option"),w=i("el-select"),C=i("el-form"),M=i("el-date-picker"),v=i("el-button"),c=i("el-table-column"),$=i("el-table"),F=i("el-pagination");return h(),x("div",Y,[Z,o("span",ee,[o("span",te,[a(C,{model:t,rules:d.rule,"label-width":"80px","label-position":"left"},{default:l(()=>[a(r,{label:"派工编号"},{default:l(()=>[a(s,{placeholder:"请输入派工编号",modelValue:t.dispatchWorkerNo,"onUpdate:modelValue":n[0]||(n[0]=e=>t.dispatchWorkerNo=e)},null,8,["modelValue"])]),_:1}),a(r,{label:"技工姓名"},{default:l(()=>[a(s,{placeholder:"输入技工姓名",modelValue:t.technicianName,"onUpdate:modelValue":n[1]||(n[1]=e=>t.technicianName=e)},null,8,["modelValue"])]),_:1}),a(r,{label:"技工种类"},{default:l(()=>[a(w,{modelValue:t.technicianType,"onUpdate:modelValue":n[2]||(n[2]=e=>t.technicianType=e),placeholder:"请选择派工种类"},{default:l(()=>[(h(!0),x(W,null,I(V.value,e=>(h(),z(T,{key:e.code,label:e.name,value:e.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"]),a(C,{model:t,rules:d.rule,"label-width":"80px","label-position":"left"},{default:l(()=>[a(r,{label:"创建时间"},{default:l(()=>[a(M,{modelValue:t.createDate,"onUpdate:modelValue":n[3]||(n[3]=e=>t.createDate=e),type:"daterange","range-separator":"~","start-placeholder":"开始时间","end-placeholder":"结束时间"},null,8,["modelValue"])]),_:1}),a(r,{label:"派工状态"},{default:l(()=>[a(w,{modelValue:t.dispatchWorkerStatus,"onUpdate:modelValue":n[4]||(n[4]=e=>t.dispatchWorkerStatus=e),placeholder:"请选择派工状态"},{default:l(()=>[(h(!0),x(W,null,I(S.value,e=>(h(),z(T,{key:e.code,label:e.name,value:e.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),ae]),_:1},8,["model","rules"])]),o("span",le,[a(v,{onClick:n[5]||(n[5]=e=>g(!0)),type:"primary",class:"search_btn"},{icon:l(()=>[oe]),default:l(()=>[N("查询")]),_:1}),a(v,{onClick:n[6]||(n[6]=e=>U()),type:"primary",class:"reset_btn"},{icon:l(()=>[ne]),default:l(()=>[N("重置")]),_:1})])]),o("span",se,[ie,o("span",de,[a(v,{type:"primary",class:"reset_btn"},{icon:l(()=>[re]),default:l(()=>[N("下载")]),_:1})])]),o("span",ce,[a($,{class:"table_content",data:b.value,stripe:!1,style:{width:"100%"}},{default:l(()=>[a(c,{prop:"caseNo",label:"派工编号"}),a(c,{prop:"appointmentStartTime",label:"计划开始时间"}),a(c,{prop:"appointmentEndTime",label:"计划结束时间"}),a(c,{prop:"follower__c",label:"技工名称"}),a(c,{prop:"fieldJobType__c",label:"派工种类"},{default:l(e=>{var _;return[o("div",pe,D(e.row.fieldJobType__c?(_=V.value.find(y=>y.code==e.row.fieldJobType__c))==null?void 0:_.name:"配送派工单"),1)]}),_:1}),a(c,{prop:"createdTime",label:"创建时间"}),a(c,{prop:"stage__c",label:"派工状态"},{default:l(e=>{var _;return[o("div",_e,D(e.row.stage__c?(_=S.value.find(y=>y.code==e.row.stage__c))==null?void 0:_.name:"待开始"),1)]}),_:1}),a(c,{prop:"text8",label:"操作",width:"80px"},{default:l(e=>[o("div",{style:{display:"flex","align-items":"center",color:"#165dff",cursor:"pointer"},onClick:_=>E(e.row)}," 查看 ",8,ue)]),_:1})]),_:1},8,["data"]),a(F,{class:"table_pagination","page-size":p.value.pageSize,"pager-count":15,layout:"total, prev, pager, next",total:p.value.total,onCurrentChange:J},null,8,["page-size","total"])])])}}}),be=X(me,[["__scopeId","data-v-f7d6fe6e"]]);export{be as default};
