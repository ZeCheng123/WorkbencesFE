import{_ as ta,a as oa,b as na}from"./tips-DfmWQaVF.js";import{_ as da}from"./add-CRTT_dyr.js";import{d as ca,g as ia,r as d,y as ra,a as pe,k as ua,c as y,b as e,e as s,w as n,s as g,x as h,q as U,F as k,v as I,m as pa,E as q,z as ma,f as C,p as _a,h as va,o as r,i as _,n as b,u as f,_ as fa}from"./index-Dz_sQ5WR.js";import{h as ha,e as me,o as H,c as ba,p as ya,m as ga,q as Ca,a as Va,d as xa}from"./common-DiLhKt0H.js";const c=E=>(_a("data-v-6652d070"),E=E(),va(),E),ka={class:"main"},Da={class:"header"},wa={class:"title"},Ia=c(()=>e("span",null,"问题提报状态",-1)),Ta={class:"step"},Sa={class:"item"},La={class:"item"},Ua={class:"item"},Na={class:"problem_report_info"},qa=c(()=>e("span",{class:"title"},"问题提报详情",-1)),Pa={class:"main_field"},$a={class:"row_field"},Oa={class:"field"},Ea=c(()=>e("span",{class:"label"},"问题编号：",-1)),Ma={class:"value"},Ba={class:"field"},Ja=c(()=>e("span",{class:"label"},"专卖店名称：",-1)),Fa={class:"value"},Ra={class:"field"},Ya=c(()=>e("span",{class:"label"},"问题类别：",-1)),ja={class:"value"},za={class:"row_field"},Aa={class:"field"},Ha=c(()=>e("span",{class:"label"},"订单编号：",-1)),Wa={class:"value"},Ga={class:"field"},Ka=c(()=>e("span",{class:"label"},"负责人：",-1)),Qa={class:"value"},Xa={class:"field"},Za=c(()=>e("span",{class:"label"},"创建时间：",-1)),el={class:"value"},al={class:"row_field"},ll={class:"field"},sl=c(()=>e("span",{class:"label"},"问题描述：",-1)),tl={class:"value"},ol=c(()=>e("span",{class:"title"},"其他字段",-1)),nl={class:"other_field"},dl={class:"row_field"},cl={class:"field"},il=c(()=>e("span",{class:"label"},"客户姓名：",-1)),rl={class:"value"},ul={class:"field"},pl=c(()=>e("span",{class:"label"},"客户手机号：",-1)),ml={class:"value"},_l={class:"field"},vl=c(()=>e("span",{class:"label"},"来源：",-1)),fl={class:"value"},hl={class:"row_field"},bl={class:"field"},yl=c(()=>e("span",{class:"label"},"省份：",-1)),gl={class:"value"},Cl={class:"field"},Vl=c(()=>e("span",{class:"label"},"城市：",-1)),xl={class:"value"},kl={class:"field"},Dl=c(()=>e("span",{class:"label"},"区：",-1)),wl={class:"value"},Il=pa('<span class="row_field" data-v-6652d070><span class="field" data-v-6652d070><span class="label" data-v-6652d070>经销商内部提报：</span><span class="value" data-v-6652d070>复选框</span></span><span class="field" data-v-6652d070><span class="label" data-v-6652d070>提报人：</span><span class="value" data-v-6652d070>王工</span></span><span class="field" data-v-6652d070><span class="label" data-v-6652d070>提报人电话：</span><span class="value" data-v-6652d070>16822822288</span></span></span>',1),Tl={class:"related_documents"},Sl=c(()=>e("span",{class:"title"},"相关单据",-1)),Ll={class:"action_list"},Ul=c(()=>e("img",{src:ta,alt:""},null,-1)),Nl={class:"right"},ql={class:"userinfo"},Pl=c(()=>e("img",{src:oa,alt:""},null,-1)),$l={class:"username"},Ol={class:"content"},El={class:"date"},Ml=c(()=>e("span",{class:"reply"},"回复",-1)),Bl=c(()=>e("img",{class:"tips",src:na,alt:""},null,-1)),Jl={class:"showMainDialog"},Fl={class:"step"},Rl={class:"item"},Yl=c(()=>e("span",{class:"name"},[_("确认问题订单 "),e("span",{class:"remark"},"选择或确认问题订单")],-1)),jl={class:"item"},zl=c(()=>e("span",{class:"name"},[_("完善必填信息 "),e("span",{class:"remark"},"完善问题描述与处理方式")],-1)),Al={class:"item"},Hl=c(()=>e("span",{class:"name"},[_("提交升级 "),e("span",{class:"remark"},"提交售后至总部")],-1)),Wl={class:"form_row"},Gl=c(()=>e("span",{class:"label required"},"订单编号",-1)),Kl={class:"form_row"},Ql=c(()=>e("span",{class:"label"},"升级备注",-1)),Xl={class:"desc_action"},Zl=c(()=>e("span",{class:"desc"},"搜索和选择/批量编辑问题产品",-1)),es={class:"action"},as={class:"search"},ls={class:"filter_list"},ss={class:"table"},ts={class:"responsibilityPerson"},os=c(()=>e("span",{class:"label required"},"问题大类",-1)),ns=c(()=>e("span",{class:"label required"},"售后问题",-1)),ds=c(()=>e("span",{class:"label required"},"责任人",-1)),cs={class:"responsibilityPerson"},is=c(()=>e("span",{class:"label required"},"问题描述",-1)),rs=c(()=>e("div",{class:"responsibilityPerson"},[e("span",{class:"label"},"上传文件")],-1)),us={class:"containerUpload"},ps={class:"item"},ms=c(()=>e("div",{class:"el-upload__text"},"将文件拖至此处 或 点击上传",-1)),_s=c(()=>e("div",{class:"el-upload__tip"}," jpg/png files with a size less than 500kb ",-1)),vs={class:"dialog-footer"},fs={class:"deliveryOrderDialog"},hs={class:"step"},bs={class:"item"},ys=c(()=>e("span",{class:"remark"},"选择配送货品的司机",-1)),gs={class:"item"},Cs=c(()=>e("span",{class:"remark"},"如有,请填写关键备注",-1)),Vs={class:"item"},xs=c(()=>e("span",{class:"remark"},"等待司机配送",-1)),ks={class:"content"},Ds=c(()=>e("span",{class:"custom_item"},[e("img",{src:da,alt:""})],-1)),ws={class:"dialog-footer"},Is={class:"relatedDocumentsDialog"},Ts={class:"content"},Ss={class:"tableItem"},Ls=c(()=>e("span",{class:"tableTitle"}," 1. 售后工单 ",-1)),Us={class:"tableContent"},Ns=["onClick"],qs={class:"tableItem"},Ps=c(()=>e("span",{class:"tableTitle"}," 2. 派工单 ",-1)),$s={class:"tableContent"},Os=["onClick"],Es={class:"dialog-footer"},Ms=ca({__name:"index",setup(E){const{proxy:T}=ia(),W=d([]),V=d(1),x=ra(),G=d(x.query.id),J=d(x.query.neoid),_e=x.query.status!=null?parseInt(x.query.status.toString(),0)+1:1,M=d(!1),K=d([]),F=d([]),ve=d([]),$=d(!1),B=d([]);d([]);const m=d({}),Q=d([]),X=d([]),Z=d([]),v=d({orderNo:"",remark:"",searchValue:"",orderType:"1",productType:"1",productModel:"1",treeSpecies:"1",paintColor:"1",size:"1"}),D=d({serviceTicketId:0,problemType:"",afterSalesIssues:"",responsiblePerson:"",problemDesc:"",fileList:[],poductType:"",componentType:"",badType:"",qualityIndicator1:"",qualityIndicator2:"",handleWay:""}),fe=d([{label:"全部订单",value:"1"}]),he=d([{label:"产品大类",value:"1"}]),be=d([{label:"产品型号",value:"1"}]),ye=d([{label:"树种",value:"1"}]),ge=d([{label:"油漆颜色",value:"1"}]),Ce=d([{label:"尺寸",value:"1"}]);let Ve=d([]);const xe=t=>{Ve.value=t.data.map(a=>a.fileId)},ke=d(),De=d([]),we=t=>{console.info("选择的数据：",t),De.value=t};d([{text1:"CS0011-06665-01",text2:"门套",text3:"示例字段...",text4:"混油米灰1#",text5:"2021-02-28 10:30:50",text6:""},{text1:"CS0011-06665-01",text2:"门套",text3:"示例字段...",text4:"混油米灰1#",text5:"2021-02-28 10:30:50",text6:""},{text1:"CS0011-06665-01",text2:"门套",text3:"示例字段...",text4:"混油米灰1#",text5:"2021-02-28 10:30:50",text6:""},{text1:"CS0011-06665-01",text2:"门套",text3:"示例字段...",text4:"混油米灰1#",text5:"2021-02-28 10:30:50",text6:""}]),d([{text1:"SU2024030101",text2:"已评价",text3:"其他",text4:"满意",text5:"2021-02-28 10:30:50",text6:""}]);const Ie=d([{code:"1",name:"经销商问题"},{code:"2",name:"公司问题"},{code:"3",name:"物流问题"}]),Te=d([{code:"1",name:"店面测量师漏单"},{code:"2",name:"店面测量师量错"},{code:"3",name:"店里设计师漏分解"},{code:"4",name:"店里设计师分解错"},{code:"5",name:"店里设计不合理"},{code:"6",name:"店里下单员漏单"},{code:"7",name:"店里下单员下错"},{code:"8",name:"店里安装师问题"},{code:"9",name:"消费者补单"},{code:"10",name:"消费者使用不当"},{code:"11",name:"产品丢失"}]);d([{code:"1",name:"墙板"},{code:"2",name:"线条"},{code:"3",name:"五金"},{code:"4",name:"门套"},{code:"5",name:"门扇"},{code:"6",name:"柜体"},{code:"7",name:"柜门"},{code:"8",name:"玻璃"},{code:"9",name:"挂板"},{code:"10",name:"罗马柱"},{code:"11",name:"帽头"},{code:"12",name:"装饰块"},{code:"13",name:"雕花件"},{code:"14",name:"色板"},{code:"15",name:"整单"},{code:"16",name:"入户门"}]),d([{code:"1",name:"边梃"},{code:"2",name:"挂线条"},{code:"3",name:"芯板"},{code:"4",name:"金属条"},{code:"5",name:"码头"},{code:"6",name:"封边"},{code:"7",name:"L边"},{code:"8",name:"整体"},{code:"9",name:"面板执手"},{code:"10",name:"锁体"},{code:"11",name:"铰链"},{code:"12",name:"铰链底座"},{code:"13",name:"灯带"},{code:"14",name:"抽屉轨道"},{code:"15",name:"三合一"},{code:"16",name:"其他五金"},{code:"17",name:"档条"},{code:"18",name:"密封条"},{code:"19",name:"套板"},{code:"20",name:"门套"},{code:"21",name:"玻璃"},{code:"22",name:"门标"},{code:"23",name:"门芯板"},{code:"24",name:"配件"},{code:"25",name:"五金配件"},{code:"26",name:"8属边"},{code:"27",name:"背板"},{code:"28",name:"层板"},{code:"29",name:"抽屉板"},{code:"30",name:"底板"},{code:"31",name:"顶板"},{code:"32",name:"台面板"},{code:"33",name:"立板"},{code:"34",name:"侧板"},{code:"35",name:"踢脚板"},{code:"36",name:"五金件"},{code:"37",name:"挂板"},{code:"38",name:"罗马柱"},{code:"39",name:"帽头"},{code:"40",name:"装饰块"},{code:"41",name:"雕花件"},{code:"42",name:"色板"},{code:"43",name:"整单"},{code:"44",name:"修补漆"},{code:"45",name:"入户门扇"}]),d([{code:"1",name:"消费者"},{code:"2",name:"经销商"},{code:"3",name:"订单分解"},{code:"4",name:"备料"},{code:"5",name:"加工"},{code:"6",name:"免漆加工"},{code:"7",name:"油漆"},{code:"8",name:"少货"},{code:"9",name:"包装问题"},{code:"10",name:"五金问题"},{code:"11",name:"辅料问题"},{code:"12",name:"仓库发货"},{code:"13",name:"物流送达"},{code:"14",name:"系统问题"},{code:"15",name:"新品设计问题"},{code:"16",name:"隔音等级"},{code:"17",name:"受潮"},{code:"18",name:"无法提供证明的少货"},{code:"19",name:"交期延误"},{code:"20",name:"霉变"},{code:"21",name:"气味"},{code:"22",name:"长虫"},{code:"23",name:"过质保期"},{code:"24",name:"变色"},{code:"25",name:"入户门问题"}]),d({}),d([{code:"1",name:"订单分解错"},{code:"2",name:"订单漏分解"},{code:"3",name:"变形"}]),d([{code:"1",name:"漏备注"},{code:"2",name:"产品漏分解"},{code:"3",name:"配件漏分解"},{code:"4",name:"五金漏分解"},{code:"5",name:"孔位漏分解"}]),d([{label:"处理方式",value:"1"}]);const ee=d([]),Se=d([{code:"1",name:"配送技工"},{code:"2",name:"安装技工"},{code:"3",name:"终端用户"},{code:"4",name:"经销商"}]),S=d(1),P=d(!1),Le=d(!1),Ue=d(1),Ne=()=>{$.value=!0},ae=d({files:[],name:"files"}),qe=t=>{ae.value.files=[t]};d({value1:"1",value2:"1",value3:"1",value4:"1",value5:"1",value6:"1"});const Pe=()=>{V.value=2},R=d({taskid:x.query.id,serviceCaseNeoId:x.query.serviceCaseId,orderId:x.query.orderId,taskStatus:_e,accountName:x.query.accountName,distributorName:x.query.distributorName,followerName:x.query.followerName,createdTime:x.query.createdTime,createdBy:x.query.createdBy});let i=pe({fieldJobContactName:"",contactTelephone:"",priority:"",type:"配送派工",remark:"",appointmentStartTime:"",appointmentEndTime:"",haveInstallConditions:!1,fieldJobOrderId:x.query.orderId,fieldJobType__c:0,stage__c:0,name:R.value.accountName+"的配送派工单",fileList:[],filePath:[],followerId:null,address:""});const le=pe({followerId:[{required:!0,message:"Please input username",trigger:"blur"}],fieldJobContactName:[{required:!0,message:"Please input username",trigger:"blur"}],contactTelephone:[{required:!0,message:"Please input phone",trigger:"blur"}],priority:[{required:!0,message:"Please input priority",trigger:"blur"}],appointmentStartTime:[{required:!0,message:"Please input appointment start time",trigger:"blur"}],appointmentEndTime:[{required:!0,message:"Please input appointment end time",trigger:"blur"}]}),$e=t=>{t.response},Oe=t=>{if(console.log(t),t.code=="success"){let a=t.data.map(o=>o.fileId);a[0]&&i.filePath.push(a[0])}};d({files:[],name:"files"});const Ee=d({Content:"application/json",Authorization:"",isImage:"true",needFileId:"true","Trace-Id":""}),Me=t=>{ba({userType:1,name:"",phone:""}).then(o=>{let u=o.data.data;u!=null&&u.length>0?(F.value=u,t&&q({message:"查询成功",type:"success"})):t&&q({message:"获取数据失败",type:"error"})})},Be=t=>{let a=F.value.find(o=>o.id==t);a&&(i.fieldJobContactName=a.name,i.contactTelephone=a.phone)};d([]);const se=d([]);ua(()=>{Je(),ze(),Ae(),He(),Fe(),Me(!1)});const Je=()=>{ha({id:G.value,neoid:J.value==null?"":J.value}).then(t=>{let a=t.data;a.code=="success"?(m.value=a.data,v.value.orderNo=m.value.orderNeoId):T.$message.error(a==null?void 0:a.message)})},Y=t=>{V.value=t},Fe=()=>{me({deliveryDate:"",status__c:"",orderType__c:"",transactionDate:"",po:"",accountName:"",accountPhone:""}).then(a=>{let o=a.data;o.code=="success"?K.value=o.data:T.$message.error(o==null?void 0:o.message)})},Re=()=>{P.value=!0},j=t=>{S.value=t},te=t=>{Ue.value=t,P.value=!1,Le.value=!0},Ye=()=>{v.value.orderNo?(S.value=2,We(v.value.orderNo)):T.$message.error("订单号不能为空!")},je=()=>{const t=B.value.filter(o=>o.checked);if(console.info("过滤：",t),t.length<=0){T.$message.error("必须勾选数据!");return}t.forEach(o=>{o.orderProductId=1489,o.caseVo=2});let a={serviceCaseId:195,details:t};!D.value.problemType||!D.value.afterSalesIssues||!D.value.responsiblePerson||!D.value.problemDesc?T.$message.error("必填选项不能为空!"):(T.$message.success("提交成功!"),setTimeout(()=>{P.value=!1,Ca(a).then(o=>{console.log(o)})},500))},oe=()=>{ma.prompt("请填写评论内容","发起评论",{inputPattern:/\S/,inputErrorMessage:"评论内容不能为空!",confirmButtonText:"确认",cancelButtonText:"取消"}).then(({value:t})=>{W.value.push({userName:"经销商",text:t,date:new Date().toLocaleString()})}).catch(()=>{})},ze=()=>{H("province").then(t=>{let a=t.data;a.code=="success"&&(Q.value=a.data)})},Ae=()=>{H("city").then(t=>{let a=t.data;a.code=="success"&&(X.value=a.data)})},He=()=>{H("district").then(t=>{let a=t.data;a.code=="success"&&(Z.value=a.data)})},We=t=>{me({po:t}).then(o=>{o.data.code=="success"?Va(o.data.data[0].id).then(u=>{B.value=u.data.data.items,B.value.forEach(w=>w.checked=!1)}):T.$message.error("数据异常!")})},Ge=t=>{T.$router.push({path:"/aftersales_workorder_details",query:{id:1}})},Ke=t=>{T.$router.push({path:"/dispatch_details",query:{id:69}})},Qe=()=>{M.value=!0,ya(J.value).then(t=>{let a=t.data;if(a.code=="success"){if(a.data&&typeof a.data=="object"){let o=[{serviceTicketId:a.data.serviceTicketId,status:a.data.status}];se.value=o}}else q({message:"请求失败，请重试",type:"error"})}).catch(t=>{q({message:"请求失败，请重试",type:"error"})}),ga(G.value).then(t=>{let a=t.data;if(a.data&&typeof a.data=="object"){let o=[{}];ee.value=o}})},Xe=()=>{let t=i;t.fieldJobContactName=R.value.accountName==null?"":R.value.accountName.toString(),t.picture=t.filePath,t.goodsPicture=t.filePath,xa(t).then(a=>{let o=a.data.data;ve.value.push(o),o!=null?q({message:"新增派工单成功",type:"success"}):q({message:"新增派工单失败",type:"error"}),Object.keys(i).forEach(u=>{!u.includes("type")&&!u.includes("haveInstallConditions")&&u!=="fieldJobOrderId"&&u!=="fieldJobType__c"&&u!=="stage__c"&&u!=="name"&&(i[u]=""),u==="haveInstallConditions"&&(i[u]=!1),(u=="fileList"||u=="filePath")&&(i[u]=[])})}).catch(a=>{q({message:"请求新增派工单失败，请重试",type:"error"}),Object.keys(i).forEach(o=>{o!=="type"&&o!=="haveInstallConditions"&&o!=="fieldJobOrderId"&&o!=="fieldJobType__c"&&o!=="stage__c"&&o!=="name"&&(i[o]=""),o=="haveInstallConditions"&&(i[o]=!1),(o=="fileList"||o=="filePath")&&(i[o]=[])}),console.error("请求新增派工单失败:",a)}),$.value=!1,V.value=1},Ze=t=>{let a=Q.value.find(o=>o.optionCode==t);return t&&a?a.optionLabel:""},ea=t=>{let a=X.value.find(o=>o.optionCode==t);return t&&a?a.optionLabel:""},aa=t=>{let a=Z.value.find(o=>o.optionCode==t);return t&&a?a.optionLabel:""};return(t,a)=>{var ue;const o=C("el-button"),u=C("el-option"),w=C("el-select"),N=C("el-input"),ne=C("el-checkbox"),p=C("el-table-column"),z=C("el-table"),la=C("upload-filled"),de=C("el-icon"),ce=C("el-upload"),A=C("el-dialog"),L=C("el-form-item"),ie=C("el-date-picker"),re=C("el-form"),sa=C("Plus");return r(),y("div",ka,[e("span",Da,[e("span",wa,[Ia,s(o,{class:"btn",onClick:Re},{default:n(()=>[_("升级到总部 (售后)")]),_:1})]),e("span",Ta,[e("span",Sa,[e("span",{class:g(m.value.clientCaseStatusC==1?"num_selected":"num")},"1",2),e("span",{class:g(m.value.clientCaseStatusC>=1?"name_selected":"name")},"待处理",2)]),e("span",La,[e("span",{class:g(m.value.clientCaseStatusC==2?"num_selected":"num")},"2",2),e("span",{class:g(m.value.clientCaseStatusC>=2?"name_selected":"name")},"处理中",2)]),e("span",Ua,[e("span",{class:g(m.value.clientCaseStatusC==3?"num_selected":"num")},"3",2),e("span",{class:g(m.value.clientCaseStatusC>=3?"name_selected":"name")},"已完成",2)])])]),e("span",Na,[qa,e("span",Pa,[e("span",$a,[e("span",Oa,[Ea,e("span",Ma,h(m.value.caseNo),1),U("",!0)]),e("span",Ba,[Ja,e("span",Fa,h(m.value.storeName),1)]),e("span",Ra,[Ya,e("span",ja,h(m.value.questionType=="1"?"售后保修":"投诉建议"),1)])]),e("span",za,[e("span",Aa,[Ha,e("span",Wa,h(m.value.orderNeoId),1)]),e("span",Ga,[Ka,e("span",Qa,h(m.value.responsibleSubject),1)]),e("span",Xa,[Za,e("span",el,h(m.value.estimatedResolutionDate),1)])]),e("span",al,[e("span",ll,[sl,e("span",tl,h(m.value.problemDescription),1)])])]),ol,e("span",nl,[e("span",dl,[e("span",cl,[il,e("span",rl,h(m.value.caseAccountId),1)]),e("span",ul,[pl,e("span",ml,h(m.value.phone),1)]),e("span",_l,[vl,e("span",fl,h(m.value.complaintSourceC?(ue=Se.value.find(l=>l.code==m.value.complaintSourceC))==null?void 0:ue.name:""),1)])]),e("span",hl,[e("span",bl,[yl,e("span",gl,h(Ze(m.value.province)),1)]),e("span",Cl,[Vl,e("span",xl,h(ea(m.value.city)),1)]),e("span",kl,[Dl,e("span",wl,h(aa(m.value.district)),1)])]),Il])]),e("span",Tl,[Sl,s(o,{class:"btn"},{default:n(()=>[_("1个售后工单")]),_:1}),s(o,{class:"btn"},{default:n(()=>[_("1个派工单")]),_:1}),e("span",{class:"view",onClick:Qe},"点击查看")]),e("span",Ll,[e("div",{class:"left"},[Ul,e("span",{class:"initiate_comments",onClick:oe},"发起评论")]),e("div",Nl,[s(o,{type:"primary",onClick:oe,class:"primary_btn"},{default:n(()=>[_("编辑")]),_:1}),s(o,{type:"primary",onClick:Ne,class:"primary_btn"},{default:n(()=>[_("创建派工单")]),_:1})])]),(r(!0),y(k,null,I(W.value,l=>(r(),y("div",{class:"comment",key:l.date},[e("div",ql,[Pl,e("span",$l,h(l.userName),1)]),e("div",Ol,h(l.text),1),e("div",El,h(l.date),1),Ml,Bl]))),128)),e("div",Jl,[s(A,{modelValue:P.value,"onUpdate:modelValue":a[20]||(a[20]=l=>P.value=l),title:"升级到总部 (售后)",width:"80% ","show-close":!1},{footer:n(()=>[e("div",vs,[s(o,{class:"cancel_btn",onClick:a[19]||(a[19]=l=>P.value=!1)},{default:n(()=>[_("取消")]),_:1}),S.value==1?(r(),b(o,{key:0,onClick:Ye,type:"primary",class:"primary_btn",style:{}},{default:n(()=>[_("下一步")]),_:1})):U("",!0),S.value==2?(r(),b(o,{key:1,onClick:je,type:"primary",class:"primary_btn",style:{}},{default:n(()=>[_("提交")]),_:1})):U("",!0)])]),default:n(()=>[e("div",Fl,[e("span",Rl,[e("span",{onClick:a[0]||(a[0]=l=>j(1)),class:g(S.value==1?"num_selected":"num")},"1",2),Yl]),e("span",jl,[e("span",{onClick:a[1]||(a[1]=l=>j(2)),class:g(S.value==2?"num_selected":"num")},"2",2),zl]),e("span",Al,[e("span",{onClick:a[2]||(a[2]=l=>j(3)),class:g(S.value==3?"num_selected":"num")},"3",2),Hl])]),S.value==1?(r(),y(k,{key:0},[e("span",Wl,[Gl,s(w,{style:{width:"368px"},modelValue:v.value.orderNo,"onUpdate:modelValue":a[3]||(a[3]=l=>v.value.orderNo=l),filterable:"",onChange:a[4]||(a[4]=()=>{}),placeholder:"请选择订单编号"},{default:n(()=>[(r(!0),y(k,null,I(K.value,l=>(r(),b(u,{key:l.po,label:l.po,value:l.po},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),e("span",Kl,[Ql,s(N,{modelValue:v.value.remark,"onUpdate:modelValue":a[5]||(a[5]=l=>v.value.remark=l),placeholder:"输入自定义备注"},null,8,["modelValue"])])],64)):U("",!0),S.value==2?(r(),y(k,{key:1},[e("div",Xl,[Zl,e("span",es,[s(o,{style:{display:"none"},class:"btn",onClick:a[6]||(a[6]=l=>te(1))},{default:n(()=>[_("完善问题描述")]),_:1}),s(o,{style:{display:"none"},class:"btn",onClick:a[7]||(a[7]=l=>te(2))},{default:n(()=>[_("定义处理方式")]),_:1})])]),e("div",as,[s(N,{modelValue:v.value.searchValue,"onUpdate:modelValue":a[8]||(a[8]=l=>v.value.searchValue=l),placeholder:"搜索"},null,8,["modelValue"])]),e("div",ls,[s(w,{modelValue:v.value.orderType,"onUpdate:modelValue":a[9]||(a[9]=l=>v.value.orderType=l)},{default:n(()=>[(r(!0),y(k,null,I(fe.value,l=>(r(),b(u,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),s(w,{modelValue:v.value.productType,"onUpdate:modelValue":a[10]||(a[10]=l=>v.value.productType=l)},{default:n(()=>[(r(!0),y(k,null,I(he.value,l=>(r(),b(u,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),s(w,{modelValue:v.value.productModel,"onUpdate:modelValue":a[11]||(a[11]=l=>v.value.productModel=l)},{default:n(()=>[(r(!0),y(k,null,I(be.value,l=>(r(),b(u,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),s(w,{modelValue:v.value.treeSpecies,"onUpdate:modelValue":a[12]||(a[12]=l=>v.value.treeSpecies=l)},{default:n(()=>[(r(!0),y(k,null,I(ye.value,l=>(r(),b(u,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),s(w,{modelValue:v.value.paintColor,"onUpdate:modelValue":a[13]||(a[13]=l=>v.value.paintColor=l)},{default:n(()=>[(r(!0),y(k,null,I(ge.value,l=>(r(),b(u,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),s(w,{modelValue:v.value.size,"onUpdate:modelValue":a[14]||(a[14]=l=>v.value.size=l)},{default:n(()=>[(r(!0),y(k,null,I(Ce.value,l=>(r(),b(u,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),e("div",ss,[s(z,{ref_key:"multipleTableRef",ref:ke,"selection-change":we,data:B.value,stripe:!1,style:{width:"100%","max-height":"200px",overflow:"auto"}},{default:n(()=>[s(p,{prop:"checked",label:"全选",width:"80px"},{default:n(l=>[s(ne,{modelValue:l.row.checked,"onUpdate:modelValue":O=>l.row.checked=O},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),s(p,{prop:"orderId",label:"订单编号"}),s(p,{prop:"orderNeoId",label:"详单编号"}),s(p,{prop:"category1",label:"产品大类"}),s(p,{prop:"fscProductModel",label:"产品型号"}),s(p,{prop:"treeSpecies__c",label:"树种"}),s(p,{prop:"paintColor__c",label:"油漆颜色 "}),s(p,{prop:"fscProductSpec",label:"尺寸 "}),s(p,{prop:"",label:"问题大类"}),s(p,{prop:"",label:"售后问题 "}),s(p,{prop:"",label:"责任人 "}),s(p,{prop:"",label:"问题描述 "})]),_:1},8,["data"])]),e("div",ts,[os,s(w,{modelValue:D.value.problemType,"onUpdate:modelValue":a[15]||(a[15]=l=>D.value.problemType=l),placeholder:""},{default:n(()=>[(r(!0),y(k,null,I(Ie.value,l=>(r(),b(u,{key:l.code,label:l.name,value:l.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),ns,s(w,{modelValue:D.value.afterSalesIssues,"onUpdate:modelValue":a[16]||(a[16]=l=>D.value.afterSalesIssues=l),placeholder:""},{default:n(()=>[(r(!0),y(k,null,I(Te.value,l=>(r(),b(u,{key:l.code,label:l.name,value:l.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),ds,s(N,{modelValue:D.value.responsiblePerson,"onUpdate:modelValue":a[17]||(a[17]=l=>D.value.responsiblePerson=l),style:{width:"240px"},placeholder:"请输入责任人"},null,8,["modelValue"])]),e("div",cs,[is,s(N,{modelValue:D.value.problemDesc,"onUpdate:modelValue":a[18]||(a[18]=l=>D.value.problemDesc=l),style:{width:"440px"},rows:2,type:"textarea",placeholder:"请输入问题描述"},null,8,["modelValue"])]),rs,e("div",us,[e("span",ps,[s(ce,{name:"files","on-success":xe,"on-change":t.handleChange,class:"upload",drag:"",action:"https://sh.mengtian.com.cn:9595/md/api/common/file/upload",multiple:""},{tip:n(()=>[_s]),default:n(()=>[s(de,{class:"el-icon--upload"},{default:n(()=>[s(la)]),_:1}),ms]),_:1},8,["on-change"])])])],64)):U("",!0)]),_:1},8,["modelValue"])]),e("div",fs,[s(A,{modelValue:$.value,"onUpdate:modelValue":a[34]||(a[34]=l=>$.value=l),title:"新建配送派工单",width:"80%","show-close":!1},{footer:n(()=>[e("div",ws,[s(o,{class:"cancel_btn",onClick:a[33]||(a[33]=l=>$.value=!1)},{default:n(()=>[_("取消")]),_:1}),V.value==1?(r(),b(o,{key:0,type:"primary",class:"primary_btn",onClick:Pe},{default:n(()=>[_("下一步")]),_:1})):U("",!0),V.value==2?(r(),b(o,{key:1,type:"primary",class:"primary_btn",onClick:Xe},{default:n(()=>[_("完成")]),_:1})):U("",!0)])]),default:n(()=>[e("div",hs,[e("span",bs,[e("span",{onClick:a[21]||(a[21]=l=>Y(1)),class:g(V.value==1?"num_selected":"num")},"1",2),e("span",{class:g(V.value>=1?"name_selected":"name")},[_("选择配送司机 "),ys],2)]),e("span",gs,[e("span",{onClick:a[22]||(a[22]=l=>Y(2)),class:g(V.value==2?"num_selected":"num")},"2",2),e("span",{class:g(V.value>=2?"name_selected":"name")},[_("输入派工单注意事项 "),Cs],2)]),e("span",Vs,[e("span",{onClick:a[23]||(a[23]=l=>Y(3)),class:g(V.value==3?"num_selected":"num")},"3",2),e("span",{class:g(V.value>=3?"name_selected":"name")},[_("完成创建 "),xs],2)])]),e("div",ks,[V.value==1?(r(),b(re,{key:0,model:f(i),rules:le,ref:"deliveryOrderFormRef","label-width":"90px","label-position":"left"},{default:n(()=>[s(L,{label:"人员名称",prop:"followerId"},{default:n(()=>[s(w,{modelValue:f(i).followerId,"onUpdate:modelValue":a[24]||(a[24]=l=>f(i).followerId=l),onChange:Be,placeholder:"查找或输入服务人员姓名"},{default:n(()=>[(r(!0),y(k,null,I(F.value,l=>(r(),b(u,{key:l.name,label:l.name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),Ds]),_:1}),s(L,{label:"联系方式",prop:"contactTelephone"},{default:n(()=>[s(N,{modelValue:f(i).contactTelephone,"onUpdate:modelValue":a[25]||(a[25]=l=>f(i).contactTelephone=l),placeholder:"查找或输入配送司机手机号码"},null,8,["modelValue"])]),_:1}),s(L,{label:"预约开始",prop:"appointmentStartTime"},{default:n(()=>[s(ie,{modelValue:f(i).appointmentStartTime,"onUpdate:modelValue":a[26]||(a[26]=l=>f(i).appointmentStartTime=l),type:"datetime",placeholder:"日期/时间","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue"])]),_:1}),s(L,{label:"预约结束",prop:"appointmentEndTime"},{default:n(()=>[s(ie,{modelValue:f(i).appointmentEndTime,"onUpdate:modelValue":a[27]||(a[27]=l=>f(i).appointmentEndTime=l),type:"datetime",placeholder:"日期/时间","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue"])]),_:1}),s(L,{label:"是否具备安装条件",class:"check_item"},{default:n(()=>[e("span",null,[s(ne,{modelValue:f(i).haveInstallConditions,"onUpdate:modelValue":a[28]||(a[28]=l=>f(i).haveInstallConditions=l)},null,8,["modelValue"])])]),_:1})]),_:1},8,["model","rules"])):U("",!0),V.value==2?(r(),b(re,{key:1,model:f(i),rules:le,ref:"deliveryOrderFormRef","label-width":"90px","label-position":"left"},{default:n(()=>[s(L,{label:"优先级",prop:"priority"},{default:n(()=>[s(N,{placeholder:"1-最高 2-高 3-中 4-低",modelValue:f(i).priority,"onUpdate:modelValue":a[29]||(a[29]=l=>f(i).priority=l)},null,8,["modelValue"])]),_:1}),s(L,{label:"派工类型",prop:"type"},{default:n(()=>[s(N,{disabled:"",placeholder:"配送派工",modelValue:f(i).type,"onUpdate:modelValue":a[30]||(a[30]=l=>f(i).type=l)},null,8,["modelValue"])]),_:1}),s(L,{label:"派工单备注",class:"customLayout"},{default:n(()=>[s(N,{modelValue:f(i).remark,"onUpdate:modelValue":a[31]||(a[31]=l=>f(i).remark=l),rows:5,type:"textarea",maxlength:"500",placeholder:"请填写派工单备注","show-word-limit":""},null,8,["modelValue"])]),_:1}),s(L,{label:"上传图片",class:"custom_upload"},{default:n(()=>[s(ce,{"on-success":Oe,"on-remove":$e,"auto-upload":!0,data:ae.value,headers:Ee.value,"before-upload":qe,"file-list":f(i).fileList,"onUpdate:fileList":a[32]||(a[32]=l=>f(i).fileList=l),class:"avatar-uploader",action:"https://sh.mengtian.com.cn:9595/md/api/common/file/upload","show-file-list":!0,"list-type":"picture-card"},{default:n(()=>[s(de,{class:"avatar-uploader-icon"},{default:n(()=>[s(sa)]),_:1})]),_:1},8,["data","headers","file-list"])]),_:1})]),_:1},8,["model","rules"])):U("",!0)])]),_:1},8,["modelValue"])]),e("div",Is,[s(A,{modelValue:M.value,"onUpdate:modelValue":a[36]||(a[36]=l=>M.value=l),title:"相关单据",width:"80%","show-close":!1},{footer:n(()=>[e("div",Es,[s(o,{type:"primary",class:"primary_btn",onClick:a[35]||(a[35]=l=>M.value=!1)},{default:n(()=>[_("返回")]),_:1})])]),default:n(()=>[e("div",Ts,[e("span",Ss,[Ls,e("span",Us,[s(z,{data:se.value,stripe:!1,style:{width:"100%"}},{default:n(()=>[s(p,{prop:"serviceTicketId",label:"售后工单编号"}),s(p,{prop:"text2",label:"类别"}),s(p,{prop:"text3",label:"负责人"}),s(p,{prop:"text3",label:"状态"},{default:n(l=>[s(o,{class:"statusing",onClick:O=>console.log(l)},{default:n(()=>[_("进行中")]),_:2},1032,["onClick"])]),_:1}),s(p,{prop:"updatedTime",label:"修改时间"}),s(p,{label:"操作",width:"80px"},{default:n(l=>[e("div",{style:{display:"flex","align-items":"center",color:"#165dff",cursor:"pointer"},onClick:O=>Ge(l.row)}," 查看 ",8,Ns)]),_:1})]),_:1},8,["data"])])]),e("span",qs,[Ps,e("span",$s,[s(z,{data:ee.value,stripe:!1,style:{width:"100%"}},{default:n(()=>[s(p,{prop:"text1",label:"派工单编号"}),s(p,{prop:"text2",label:"类别"}),s(p,{prop:"text3",label:"负责人"}),s(p,{prop:"text3",label:"状态"},{default:n(l=>[s(o,{class:"statusing",onClick:O=>console.log(l)},{default:n(()=>[_("进行中")]),_:2},1032,["onClick"])]),_:1}),s(p,{prop:"text5",label:"修改时间"}),s(p,{prop:"text7",label:"操作",width:"80px"},{default:n(l=>[e("div",{style:{display:"flex","align-items":"center",color:"#165dff",cursor:"pointer"},onClick:O=>Ke(l.row)}," 查看 ",8,Os)]),_:1})]),_:1},8,["data"])])])])]),_:1},8,["modelValue"])])])}}}),Ys=fa(Ms,[["__scopeId","data-v-6652d070"]]);export{Ys as default};
