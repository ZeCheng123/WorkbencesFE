import{_ as ae,a as te,b as oe}from"./logoXX-Cy74BE6B.js";import{_ as se}from"./plus-B8sn_dc4.js";import{_ as ne}from"./download-Dan4AgsM.js";import{d as re,g as ue,r as u,a as de,k as ce,Z as ie,$ as pe,c as k,b as o,e as l,w as t,f as d,p as me,h as _e,o as h,F as I,x as $,B as R,i as _,t as z,D as O,y as fe,E as be,A as ve,_ as ge}from"./index-1-lRGkZt.js";const p=N=>(me("data-v-8ecefb39"),N=N(),_e(),N),he={class:"main"},Ne=p(()=>o("span",{class:"header"},[o("span",{class:"title"},"服务评价")],-1)),Ve={class:"search"},ye={class:"left"},Pe=p(()=>o("span",{style:{width:"336px",height:"32px"}},null,-1)),Se={class:"right"},xe=p(()=>o("img",{src:te,alt:""},null,-1)),we=p(()=>o("img",{src:oe,alt:""},null,-1)),ke={class:"table_header"},Ce=p(()=>o("span",{class:"left"},[o("img",{src:ae,alt:""}),o("span",{class:"title"})],-1)),De={class:"right"},Le=p(()=>o("img",{src:se,alt:""},null,-1)),Ue=p(()=>o("img",{src:ne,alt:""},null,-1)),Ie={class:"table"},$e={style:{display:"flex","align-items":"center"}},Re={style:{display:"flex","align-items":"center"}},ze=["onClick"],Oe={class:"problemReportingDialog"},Be={class:"step"},Te={class:"item"},Fe=p(()=>o("span",{class:"name"},[_("完善提报信息 "),o("span",{class:"remark"},"完善问题提报的信息")],-1)),qe={class:"item"},Ae=p(()=>o("span",{class:"name"},[_("完成创建 "),o("span",{class:"remark"},"等待售服部处理")],-1)),je={class:"content"},Ee={class:"dialog-footer"},Me=re({__name:"index",setup(N){const{proxy:f}=ue(),V=u({pageIndex:0,pageSize:100,total:0}),B=u({Content:"application/json",Authorization:"",isImage:"true",needFileId:"true","Trace-Id":""}),C=u({files:[],name:"files"}),c=de({problemNo:"",customerName:"",customerPhone:"",filterMethod:"",createDate:[],orderStatus:""});u([{value:"all",label:"全部"}]);const T=u([{value:"all",label:"全部"}]),F=u([{name:"品质",code:"1"},{name:"交期",code:"2"},{name:"服务",code:"3"},{name:"销售",code:"4"}]),q=u([{name:"待分配",code:"1"},{name:"待处理",code:"2"},{name:"处理中",code:"3"},{name:"待回复",code:"4"},{name:"已完成",code:"4"}]),g=u(!1),D=u(1),n=u({orderNo:"",customerName:"",customerPhone:"",desc:"",fileList:[],filePath:[]}),A=u({customerName:[{required:!0,message:"Please input customer name",trigger:"blur"}],customerPhone:[{required:!0,message:"Please input customer phone",trigger:"blur"}],desc:[{required:!0,message:"Please input problem description",trigger:"blur"}]}),y=u([]),P=u([]);ce(()=>{setTimeout(()=>{S(),Z()},500)});const j=r=>{let e=r.id,s=r.neoid;f.$router.push(`/problem_report_details?id=${e}&neoid=${s}`)},E=()=>{g.value=!0},M=()=>{for(let e in n.value)if(e!="fileList"&&e!="orderNo"&&n.value[e]==""){f.$message.error("必填字段不能为空!");return}let r={caseNo:n.value.orderNo,name:n.value.customerName,phone:n.value.customerPhone,problemDescription:n.value.desc,picture:n.value.filePath.join(";"),caseStatus:"1"};ve(r).then(e=>{let s=e.data;s.code=="success"?(n.value={orderNo:"",customerName:"",customerPhone:"",desc:"",fileList:[],filePath:[]},g.value=!1,f.$message.success("提交成功!"),S()):f.$message.error(s==null?void 0:s.message)})},S=()=>{ie({caseStatus:"",caseNo:"",name:""}).then(e=>{let s=e.data;s.code=="success"?(y.value=s.data,V.value={pageIndex:0,pageSize:100,total:s.data.length}):(f.$message.error(s==null?void 0:s.message),y.value=[],V.value={pageIndex:0,pageSize:100,total:0})})},Z=()=>{pe({deliveryDate:"",status__c:"",orderType__c:"",transactionDate:"",po:"",accountName:"",accountPhone:""}).then(e=>{let s=e.data;s.code=="success"?P.value=s.data:f.$message.error(s==null?void 0:s.message)})},G=r=>{let e=P.value.find(s=>s.po==r);e&&(n.value.customerName=e.accountName,n.value.customerPhone=e.accountPhone)},H=r=>{if(console.log(r),r.code=="success"){let e=r.data.map(s=>s.fileUrl);n.value.filePath=n.value.filePath.concat(e)}},J=r=>{var e=r.response;console.log(e)},K=r=>{C.value.files.push(r)};return(r,e)=>{const s=d("el-input"),i=d("el-form-item"),x=d("el-form"),Q=d("el-date-picker"),L=d("el-option"),U=d("el-select"),b=d("el-button"),m=d("el-table-column"),W=d("el-table"),X=d("el-pagination"),Y=d("el-icon"),ee=d("el-upload"),le=d("el-dialog");return h(),k("div",he,[Ne,o("span",Ve,[o("span",ye,[l(x,{model:c,rules:r.rule,"label-width":"80px","label-position":"left"},{default:t(()=>[l(i,{label:"问题编号"},{default:t(()=>[l(s,{placeholder:"请输入问题编号",modelValue:c.problemNo,"onUpdate:modelValue":e[0]||(e[0]=a=>c.problemNo=a)},null,8,["modelValue"])]),_:1}),l(i,{label:"客户名称"},{default:t(()=>[l(s,{placeholder:"输入客户名称",modelValue:c.customerName,"onUpdate:modelValue":e[1]||(e[1]=a=>c.customerName=a)},null,8,["modelValue"])]),_:1}),l(i,{label:"客户电话"},{default:t(()=>[l(s,{placeholder:"请输入客户电话",modelValue:c.customerName,"onUpdate:modelValue":e[2]||(e[2]=a=>c.customerName=a)},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"]),l(x,{model:c,rules:r.rule,"label-width":"80px","label-position":"left"},{default:t(()=>[l(i,{label:"创建时间"},{default:t(()=>[l(Q,{modelValue:c.createDate,"onUpdate:modelValue":e[3]||(e[3]=a=>c.createDate=a),type:"daterange","range-separator":"~","start-placeholder":"开始时间","end-placeholder":"结束时间"},null,8,["modelValue"])]),_:1}),l(i,{label:"订单状态"},{default:t(()=>[l(U,{modelValue:c.orderStatus,"onUpdate:modelValue":e[4]||(e[4]=a=>c.orderStatus=a),placeholder:"请选择订单状态"},{default:t(()=>[(h(!0),k(I,null,$(T.value,a=>(h(),R(L,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),Pe]),_:1},8,["model","rules"])]),o("span",Se,[l(b,{type:"primary",onClick:S,class:"search_btn"},{icon:t(()=>[xe]),default:t(()=>[_("查询")]),_:1}),l(b,{type:"primary",class:"reset_btn"},{icon:t(()=>[we]),default:t(()=>[_("重置")]),_:1})])]),o("span",ke,[Ce,o("span",De,[l(b,{onClick:E,type:"primary",class:"search_btn"},{icon:t(()=>[Le]),default:t(()=>[_("新建")]),_:1}),l(b,{type:"primary",class:"reset_btn"},{icon:t(()=>[Ue]),default:t(()=>[_("下载")]),_:1})])]),o("span",Ie,[l(W,{class:"table_content",data:y.value,stripe:!1,style:{width:"100%"}},{default:t(()=>[l(m,{prop:"caseNo",label:"问题编号"}),l(m,{prop:"caseAccountId",label:"客户姓名"}),l(m,{prop:"problemDescription",label:"问题描述"}),l(m,{prop:"sourceOfProblem",label:"来源"},{default:t(a=>{var v;return[o("div",$e,z(a.row.sourceOfProblem?(v=F.value.find(w=>w.code==a.row.sourceOfProblem))==null?void 0:v.name:""),1)]}),_:1}),l(m,{prop:"distributorName",label:"提报人"}),l(m,{prop:"actualResolutionDate",label:"创建时间"}),l(m,{prop:"caseStatus",label:"问题状态"},{default:t(a=>{var v;return[o("div",Re,z(a.row.caseStatus?(v=q.value.find(w=>w.code==a.row.caseStatus))==null?void 0:v.name:""),1)]}),_:1}),l(m,{prop:"",label:"操作",width:"80px"},{default:t(a=>[o("div",{style:{display:"flex","align-items":"center",color:"#165dff",cursor:"pointer"},onClick:v=>j(a.row)}," 查看 ",8,ze)]),_:1})]),_:1},8,["data"]),l(X,{class:"table_pagination","page-size":V.value.pageSize,"pager-count":5,layout:"total, prev, pager, next",total:V.value.total},null,8,["page-size","total"])]),o("div",Oe,[l(le,{modelValue:g.value,"onUpdate:modelValue":e[11]||(e[11]=a=>g.value=a),title:"问题提报",width:"80%","show-close":!1},{footer:t(()=>[o("div",Ee,[l(b,{class:"cancel_btn",onClick:e[10]||(e[10]=a=>g.value=!1)},{default:t(()=>[_("取消")]),_:1}),l(b,{type:"primary",class:"primary_btn",onClick:M},{default:t(()=>[_("提交")]),_:1})])]),default:t(()=>[o("span",Be,[o("span",Te,[o("span",{class:O(D.value==1?"num_selected":"num")},"1",2),Fe]),o("span",qe,[o("span",{class:O(D.value==2?"num_selected":"num")},"2",2),Ae])]),o("div",je,[l(x,{model:n.value,rules:A.value,"label-width":"90px","label-position":"left"},{default:t(()=>[l(i,{label:"订单编号",prop:"orderNo"},{default:t(()=>[l(U,{modelValue:n.value.orderNo,"onUpdate:modelValue":e[5]||(e[5]=a=>n.value.orderNo=a),filterable:"",onChange:G,placeholder:"请选择订单编号"},{default:t(()=>[(h(!0),k(I,null,$(P.value,a=>(h(),R(L,{key:a.po,label:a.po,value:a.po},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(i,{label:"客户姓名",prop:"customerName"},{default:t(()=>[l(s,{placeholder:"请输入客户姓名",modelValue:n.value.customerName,"onUpdate:modelValue":e[6]||(e[6]=a=>n.value.customerName=a)},null,8,["modelValue"])]),_:1}),l(i,{label:"客户电话",prop:"customerPhone"},{default:t(()=>[l(s,{placeholder:"请输入客户电话",modelValue:n.value.customerPhone,"onUpdate:modelValue":e[7]||(e[7]=a=>n.value.customerPhone=a)},null,8,["modelValue"])]),_:1}),l(i,{label:"问题描述",class:"customLayout",prop:"desc"},{default:t(()=>[l(s,{modelValue:n.value.desc,"onUpdate:modelValue":e[8]||(e[8]=a=>n.value.desc=a),rows:5,type:"textarea",maxlength:"500",placeholder:"请输入问题描述","show-word-limit":""},null,8,["modelValue"])]),_:1}),l(i,{label:"上传图片",class:"custom_upload"},{default:t(()=>[l(ee,{"on-success":H,"on-remove":J,"auto-upload":!0,data:C.value,headers:B.value,"before-upload":K,"list-type":"picture-card",class:"avatar-uploader",action:"https://sh.mengtian.com.cn:9595/md/api/common/file/upload","show-file-list":!0,"file-list":n.value.fileList,"onUpdate:fileList":e[9]||(e[9]=a=>n.value.fileList=a)},{default:t(()=>[l(Y,null,{default:t(()=>[l(fe(be))]),_:1})]),_:1},8,["data","headers","file-list"])]),_:1})]),_:1},8,["model","rules"])])]),_:1},8,["modelValue"])])])}}}),Ke=ge(Me,[["__scopeId","data-v-8ecefb39"]]);export{Ke as default};
