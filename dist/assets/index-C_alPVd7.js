import{_ as L,a as M,b as R}from"./logoXX-Cy74BE6B.js";import{_ as O}from"./plus-B8sn_dc4.js";import{d as P,g as j,r as i,k as z,a2 as J,E as h,c as N,b as t,e as a,w as o,F as T,f as m,p as K,h as Q,o as _,B as x,q as A,i as V,t as H,a3 as W,_ as X}from"./index-CXdlkYQW.js";const b=y=>(K("data-v-fba2b913"),y=y(),Q(),y),Z={class:"main"},ee=b(()=>t("span",{class:"header"}," 我的人员 ",-1)),le={class:"search"},ae={class:"left"},oe=b(()=>t("span",{style:{width:"336px",height:"32px"}},null,-1)),te={class:"right"},se=b(()=>t("img",{src:M,alt:""},null,-1)),ne=b(()=>t("img",{src:R,alt:""},null,-1)),re={class:"table_header"},ue=b(()=>t("span",{class:"left"},[t("img",{src:L,alt:""}),t("span",{class:"title"})],-1)),de={class:"right"},pe=b(()=>t("img",{src:O,alt:""},null,-1)),me={class:"table"},ie={class:"showDialog"},ce={class:"content"},_e={class:"custom-row"},ve={class:"custom-row"},be={class:"custom-row"},ge={class:"custom-row"},fe={class:"custom-row"},Ve={class:"dialog-footer"},ye=P({__name:"index",setup(y){j();const w=i(),g=i(!1),n=i({userType:1,name:"",phone:""}),s=i({userType:1,name:"",phone:"",status:1,storeNo:"HY0011",storeName:"梦天木门集团有限公司",distributorNo:"HY01",distributorName:"梦天集团",generalAgentNo:"GD01",generalAgentName:"梦天"}),Y=i({name:[{required:!0,message:"姓名不能为空",trigger:"blur"}],phone:[{required:!0,message:"电话不能为空",trigger:"blur"},{validator:(c,l)=>/^1\d{10}$/.test(l)?Promise.resolve():Promise.reject("电话格式不正确"),trigger:"blur"}],userType:[{required:!0,message:"人员类型不能为空",trigger:"blur"}],status:[{required:!0,message:"状态不能为空",trigger:"blur"}]}),C=i([{code:1,name:"技工"},{code:2,name:"经销商用户"},{code:3,name:"配送司机"}]),$=i([{code:1,name:"在职"},{code:2,name:"离职"}]),D=i([]);z(()=>{U()});const U=()=>{let c={userType:n.value.userType,name:n.value.name,phone:n.value.phone};J(c).then(l=>{let r=l.data;r.code=="success"?(D.value=r.data,h({message:"查询成功!",type:"success"})):console.log("失败")}).catch(l=>{h({message:"请求数据失败，请重试",type:"error"}),console.error("请求数据失败:",l)})},q=()=>{n.value={userType:1,name:"",phone:""}},B=()=>{g.value=!0},E=()=>{s.value={userType:1,name:"",phone:"",status:1,storeNo:"HY0011",storeName:"梦天木门集团有限公司",distributorNo:"HY01",distributorName:"梦天集团",generalAgentNo:"GD01",generalAgentName:"梦天"},w.value.clearValidate(),g.value=!1},F=()=>{w.value.validate(c=>{if(c){let l=s.value;W(l).then(r=>{var v;((v=r==null?void 0:r.data)==null?void 0:v.code)=="success"?(n.value.userType=l.userType,s.value={userType:1,name:"",phone:"",status:1,storeNo:"HY0011",storeName:"梦天木门集团有限公司",distributorNo:"HY01",distributorName:"梦天集团",generalAgentNo:"GD01",generalAgentName:"梦天"},g.value=!1,h({message:"新增成功!",type:"success"}),setTimeout(()=>{U()},500)):console.log("失败")}).catch(r=>{h({message:"新增失败!",type:"error"}),console.error("新增失败:",r)})}})};return(c,l)=>{const r=m("el-option"),v=m("el-select"),u=m("el-form-item"),d=m("el-input"),k=m("el-form"),f=m("el-button"),p=m("el-table-column"),I=m("el-table"),S=m("el-pagination"),G=m("el-dialog");return _(),N(T,null,[t("div",Z,[ee,t("span",le,[t("span",ae,[a(k,{model:n.value,rules:c.rule,"label-width":"80px","label-position":"left"},{default:o(()=>[a(u,{label:"人员类型"},{default:o(()=>[a(v,{modelValue:n.value.userType,"onUpdate:modelValue":l[0]||(l[0]=e=>n.value.userType=e),placeholder:"请选择人员类型"},{default:o(()=>[(_(!0),N(T,null,x(C.value,e=>(_(),A(r,{key:e.code,label:e.name,value:e.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(u,{label:"人员姓名"},{default:o(()=>[a(d,{placeholder:"输入人员姓名",modelValue:n.value.name,"onUpdate:modelValue":l[1]||(l[1]=e=>n.value.name=e)},null,8,["modelValue"])]),_:1}),a(u,{label:"人员电话"},{default:o(()=>[a(d,{placeholder:"输入人员电话",modelValue:n.value.phone,"onUpdate:modelValue":l[2]||(l[2]=e=>n.value.phone=e)},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"]),a(k,{model:n.value,rules:c.rule,"label-width":"80px","label-position":"left"},{default:o(()=>[oe]),_:1},8,["model","rules"])]),t("span",te,[a(f,{onClick:l[3]||(l[3]=e=>U()),type:"primary",class:"search_btn"},{icon:o(()=>[se]),default:o(()=>[V("查询")]),_:1}),a(f,{type:"primary",onClick:l[4]||(l[4]=e=>q()),class:"reset_btn"},{icon:o(()=>[ne]),default:o(()=>[V("重置")]),_:1})])]),t("span",re,[ue,t("span",de,[a(f,{onClick:l[5]||(l[5]=e=>B()),type:"primary",class:"search_btn"},{icon:o(()=>[pe]),default:o(()=>[V("新建")]),_:1})])]),t("span",me,[a(I,{class:"table_content",data:D.value,stripe:!1,style:{width:"100%"}},{default:o(()=>[a(p,{prop:"id",label:"人员编号"}),a(p,{prop:"name",label:"姓名"}),a(p,{prop:"phone",label:"电话"}),a(p,{prop:"userType",label:"人员类型"},{default:o(e=>[t("div",null,H(e.row.userType==1?"技工":e.row.userType==2?"经销商":"配送司机"),1)]),_:1}),a(p,{prop:"status",label:"人员状态"},{default:o(e=>[t("div",null,H(e.row.status==1?"在职":"离职"),1)]),_:1}),a(p,{prop:"storeNo",label:"门店编号"}),a(p,{prop:"storeName",label:"门店名称"}),a(p,{prop:"distributorNo",label:"经销商编号"}),a(p,{prop:"distributorName",label:"经销商名称"}),a(p,{prop:"createdTime",label:"创建时间"})]),_:1},8,["data"]),a(S,{class:"table_pagination","page-size":20,"pager-count":11,layout:"total, prev, pager, next",total:1e3})])]),t("div",ie,[a(G,{modelValue:g.value,"onUpdate:modelValue":l[18]||(l[18]=e=>g.value=e),title:"新增人员",width:"60%","show-close":!1},{footer:o(()=>[t("div",Ve,[a(f,{class:"cancel_btn",onClick:l[16]||(l[16]=e=>E())},{default:o(()=>[V("取消")]),_:1}),a(f,{onClick:l[17]||(l[17]=e=>F()),type:"primary",class:"primary_btn"},{default:o(()=>[V("确认")]),_:1})])]),default:o(()=>[t("div",ce,[a(k,{model:s.value,rules:Y.value,ref_key:"formRef",ref:w,"label-width":"90px","label-position":"right"},{default:o(()=>[t("div",_e,[a(u,{label:"姓名",prop:"name"},{default:o(()=>[a(d,{placeholder:"请输入姓名",modelValue:s.value.name,"onUpdate:modelValue":l[6]||(l[6]=e=>s.value.name=e)},null,8,["modelValue"])]),_:1}),a(u,{label:"电话",prop:"phone"},{default:o(()=>[a(d,{placeholder:"请输入电话",modelValue:s.value.phone,"onUpdate:modelValue":l[7]||(l[7]=e=>s.value.phone=e)},null,8,["modelValue"])]),_:1})]),t("div",ve,[a(u,{label:"人员类型",prop:"userType"},{default:o(()=>[a(v,{modelValue:s.value.userType,"onUpdate:modelValue":l[8]||(l[8]=e=>s.value.userType=e),placeholder:"请选择人员类型"},{default:o(()=>[(_(!0),N(T,null,x(C.value,e=>(_(),A(r,{key:e.code,label:e.name,value:e.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(u,{label:"人员状态",prop:"status"},{default:o(()=>[a(v,{modelValue:s.value.status,"onUpdate:modelValue":l[9]||(l[9]=e=>s.value.status=e),placeholder:"请选择人员状态"},{default:o(()=>[(_(!0),N(T,null,x($.value,e=>(_(),A(r,{key:e.code,label:e.name,value:e.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),t("div",be,[a(u,{label:"门店编码"},{default:o(()=>[a(d,{placeholder:"请输入门店编码",modelValue:s.value.storeNo,"onUpdate:modelValue":l[10]||(l[10]=e=>s.value.storeNo=e)},null,8,["modelValue"])]),_:1}),a(u,{label:"门店名称"},{default:o(()=>[a(d,{placeholder:"请输入门店名称",modelValue:s.value.storeName,"onUpdate:modelValue":l[11]||(l[11]=e=>s.value.storeName=e)},null,8,["modelValue"])]),_:1})]),t("div",ge,[a(u,{label:"经销商编码"},{default:o(()=>[a(d,{placeholder:"请输入经销商编码",modelValue:s.value.distributorNo,"onUpdate:modelValue":l[12]||(l[12]=e=>s.value.distributorNo=e)},null,8,["modelValue"])]),_:1}),a(u,{label:"经销商名称"},{default:o(()=>[a(d,{placeholder:"请输入经销商名称",modelValue:s.value.distributorName,"onUpdate:modelValue":l[13]||(l[13]=e=>s.value.distributorName=e)},null,8,["modelValue"])]),_:1})]),t("div",fe,[a(u,{label:"总代编码"},{default:o(()=>[a(d,{placeholder:"请输入总代编码",modelValue:s.value.generalAgentNo,"onUpdate:modelValue":l[14]||(l[14]=e=>s.value.generalAgentNo=e)},null,8,["modelValue"])]),_:1}),a(u,{label:"总代名称"},{default:o(()=>[a(d,{placeholder:"请输入总代名称",modelValue:s.value.generalAgentName,"onUpdate:modelValue":l[15]||(l[15]=e=>s.value.generalAgentName=e)},null,8,["modelValue"])]),_:1})])]),_:1},8,["model","rules"])])]),_:1},8,["modelValue"])])],64)}}}),we=X(ye,[["__scopeId","data-v-fba2b913"]]);export{we as default};
