import{_ as ke,a as we,b as Ce}from"./tips-DfmWQaVF.js";import{_ as Te}from"./add-CRTT_dyr.js";import{d as De,g as Se,r as b,y as Ie,a as I,k as Pe,c as H,b as e,s as o,i as c,n as g,w as l,q as y,x as D,e as a,F as qe,v as Ne,m as Ue,z as Oe,f as T,p as Xe,h as Ee,o as v,u as _,t as J,E as P,_ as Le}from"./index-BJQKT2Ll.js";import{a as se}from"./common-BMFbHTFR.js";const u=X=>(Xe("data-v-858e8096"),X=X(),Ee(),X),je={class:"main"},Ye={class:"header"},$e=u(()=>e("span",{class:"title"},"任务状态",-1)),Re={class:"step"},Me={class:"item"},Be={class:"item"},Fe={class:"item"},He={class:"item"},Je={class:"item"},ze={class:"task_info"},Ae={class:"title"},Ge={class:"main_field"},Ke={class:"row_field"},Qe={class:"field"},We=u(()=>e("span",{class:"label"},"任务编号：",-1)),Ze={class:"value"},et={class:"field"},tt=u(()=>e("span",{class:"label"},"经销商：",-1)),at={class:"value"},st={class:"field"},lt=u(()=>e("span",{class:"label"},"经销商负责人：",-1)),ot={class:"value"},nt={class:"row_field"},it={class:"field"},rt=u(()=>e("span",{class:"label"},"客户名称：",-1)),dt={class:"value"},pt={class:"field"},ut=u(()=>e("span",{class:"label"},"当前负责人：",-1)),ct={class:"value"},mt={class:"field"},_t=u(()=>e("span",{class:"label"},"创建时间：",-1)),ft={class:"value"},vt=Ue('<span class="row_field" data-v-858e8096><span class="field" data-v-858e8096><span class="label" data-v-858e8096>客户电话：</span><span class="value" data-v-858e8096>XX</span></span><span class="field" data-v-858e8096><span class="label" data-v-858e8096>客户地址：</span><span class="value" data-v-858e8096>XXX</span></span><span class="field" data-v-858e8096><span class="label" data-v-858e8096></span><span class="value" data-v-858e8096></span></span></span>',1),ht={class:"order_status"},bt=u(()=>e("span",{class:"title"},"订单状态",-1)),yt={class:"step"},gt={class:"item"},Vt={class:"item"},xt={class:"item"},kt={class:"item"},wt={class:"item"},Ct={class:"item"},Tt={class:"item"},Dt={class:"related_item_order"},St=u(()=>e("span",{class:"table_title"},"相关项>订单",-1)),It={class:"table_content"},Pt=["onClick"],qt={class:"related_item_invoice"},Nt=u(()=>e("span",{class:"table_title"},"相关项>发货单",-1)),Ut={class:"table_content"},Ot=["onClick"],Xt=u(()=>e("span",null,"查看",-1)),Et=u(()=>e("span",null,"批量提货",-1)),Lt={class:"related_item_invoice"},jt=u(()=>e("span",{class:"table_title"},"相关项>派工单",-1)),Yt={class:"table_content"},$t={style:{display:"flex","align-items":"center",color:"#165dff",cursor:"pointer"}},Rt=["onClick"],Mt={class:"action_list"},Bt=u(()=>e("img",{src:ke,alt:""},null,-1)),Ft={class:"right"},Ht={class:"userinfo"},Jt=u(()=>e("img",{src:we,alt:""},null,-1)),zt={class:"username"},At={class:"content"},Gt={class:"date"},Kt=u(()=>e("span",{class:"reply"},"回复",-1)),Qt=u(()=>e("img",{class:"tips",src:Ce,alt:""},null,-1)),Wt={class:"deliveryOrderDialog"},Zt={class:"step"},ea={class:"item"},ta=u(()=>e("span",{class:"remark"},"选择配送货品的司机",-1)),aa={class:"item"},sa=u(()=>e("span",{class:"remark"},"如有,请填写关键备注",-1)),la={class:"item"},oa=u(()=>e("span",{class:"remark"},"等待司机配送",-1)),na={class:"content"},ia={class:"dialog-footer"},ra={class:"installationOrderDialog"},da={class:"step"},pa={class:"item"},ua=u(()=>e("span",{class:"remark"},"选择负责安装的技工",-1)),ca={class:"item"},ma=u(()=>e("span",{class:"remark"},"如有,请填写关键备注",-1)),_a={class:"item"},fa=u(()=>e("span",{class:"remark"},"等待现场服务",-1)),va={class:"content"},ha={style:{width:"300px"}},ba=u(()=>e("span",{class:"custom_item"},[e("img",{src:Te,alt:""})],-1)),ya={class:"dialog-footer"},ga={class:"problemReportingDialog"},Va={class:"step"},xa={class:"item"},ka=u(()=>e("span",{class:"name"},[c("完善提报信息 "),e("span",{class:"remark"},"完善问题提报的信息")],-1)),wa={class:"item"},Ca=u(()=>e("span",{class:"name"},[c("完成创建 "),e("span",{class:"remark"},"等待售服部处理")],-1)),Ta={class:"content"},Da={class:"dialog-footer"},Sa=De({__name:"index",setup(X){const{proxy:z}=Se(),V=b(4),A=b([]),h=Ie();h.query.id,h.query.serviceCaseId,h.query.orderId;const G=h.query.status!=null?parseInt(h.query.status.toString(),0)+1:1;h.query.taskType;const S=b({taskid:h.query.id,serviceCaseNeoId:h.query.serviceCaseId,orderId:h.query.orderId,taskStatus:G,accountName:h.query.accountName,distributorName:h.query.distributorName,followerName:h.query.followerName,createdTime:h.query.createdTime,createdBy:h.query.createdBy}),f=b(G),x=b(1),k=b(1),K=b(1),Q=b();let d=I({field_job_contact_name:"",contact_telephone:"",priority:"",type:"配送派工",remark:"",appointmentStartTime:"",appointmentEndTime:"",haveInstallConditions:!1,field_job_order_id:h.query.orderId,fieldJobType__c:0,stage__c:0,name:S.value.accountName+"的配送派工单",fileList:[],filePath:[]});const W=I({field_job_contact_name:[{required:!0,message:"Please input username",trigger:"blur"}],contact_telephone:[{required:!0,message:"Please input phone",trigger:"blur"}],priority:[{required:!0,message:"Please input priority",trigger:"blur"}],appointmentStartTime:[{required:!0,message:"Please input appointment start time",trigger:"blur"}],appointmentEndTime:[{required:!0,message:"Please input appointment end time",trigger:"blur"}]}),n=I({username:"",phone:"",remark:"",installationTeam:!1,priority:"",appointmentStartTime:"",appointmentEndTime:"",fileList:[],filePath:[]}),Z=I({username:[{required:!0,message:"Please input username",trigger:"blur"}],phone:[{required:!0,message:"Please input phone",trigger:"blur"}],priority:[{required:!0,message:"Please input priority",trigger:"blur"}],appointmentStartTime:[{required:!0,message:"Please input appointment start time",trigger:"blur"}],appointmentEndTime:[{required:!0,message:"Please input appointment end time",trigger:"blur"}]}),C=I({orderNo:"",customerName:"",customerPhone:"",desc:"",fileList:[]}),le=I({customerName:[{required:!0,message:"Please input customer name",trigger:"blur"}],customerPhone:[{required:!0,message:"Please input customer phone",trigger:"blur"}],desc:[{required:!0,message:"Please input problem description",trigger:"blur"}]}),q=b(!1),N=b(!1),U=b(!1),oe=b([{text1:"",text2:"XXX",text3:"渠道",text4:"35",text5:"XXXX",text6:"xxxx",text7:"2024-02-21 10:30:50"}]),ne=b([{text1:"",text2:"XXX",text3:"示例字段...",text4:"XXXX",text5:"2024-02-21 10:30:50",text6:"XXX"}]),j=b([]),ee=b({Content:"application/json",Authorization:"",isImage:"true",needFileId:"true","Trace-Id":""}),E=b({files:[],name:"files"}),Y=r=>{x.value=r},$=r=>{k.value=r},ie=()=>{q.value=!0},re=()=>{N.value=!0},de=()=>{x.value=2},pe=()=>{k.value=2},ue=async()=>{console.log(n);let r={field_job_contact_name:n.username,contact_telephone:n.phone,priority:n.priority,remark:n.remark,haveInstallConditions:!1,field_job_order_id:h.query.orderId,name:S.value.accountName+"的安装派工单",type:"安装派工",fieldJobType__c:1,stage__c:0,picture:n.filePath.join(";"),appointmentStartTime:n.appointmentStartTime,appointmentEndTime:n.appointmentEndTime};se(r).then(t=>{let i=t.data.data;j.value.push(i),i!=null?(P({message:"新增派工单成功",type:"success"}),N.value=!1,k.value=1,f.value=5,n.username="",n.phone="",n.remark="",n.priority="",n.appointmentStartTime="",n.appointmentEndTime="",n.fileList=[],n.filePath=[]):P({message:"新增派工单失败",type:"error"})}).catch(t=>{P({message:"请求新增派工单失败，请重试",type:"error"})})},ce=r=>{z.$router.push({path:"/dispatch_details",query:{id:r.id}})},me=()=>{let r=d;r.picture=r.filePath.join(","),r.goods_picture__c=r.filePath.join(","),se(r).then(t=>{let i=t.data.data;j.value.push(i),i!=null?P({message:"新增派工单成功",type:"success"}):P({message:"新增派工单失败",type:"error"}),Object.keys(d).forEach(p=>{!p.includes("type")&&!p.includes("haveInstallConditions")&&p!=="field_job_order_id"&&p!=="fieldJobType__c"&&p!=="stage__c"&&p!=="name"&&(d[p]=""),p==="haveInstallConditions"&&(d[p]=!1)})}).catch(t=>{P({message:"请求新增派工单失败，请重试",type:"error"}),Object.keys(d).forEach(i=>{i!=="type"&&i!=="haveInstallConditions"&&i!=="field_job_order_id"&&i!=="fieldJobType__c"&&i!=="stage__c"&&i!=="name"&&(d[i]=""),i=="haveInstallConditions"&&(d[i]=!1)}),console.error("请求新增派工单失败:",t)}),q.value=!1,x.value=1,f.value=5},_e=()=>{U.value=!0},fe=()=>{U.value=!1,z.$message.success("提交成功!")},ve=()=>{Oe.prompt("请填写评论内容","发起评论",{inputPattern:/\S/,inputErrorMessage:"评论内容不能为空!",confirmButtonText:"确认",cancelButtonText:"取消"}).then(({value:r})=>{A.value.push({userName:"经销商",text:r,date:new Date().toLocaleString()})}).catch(()=>{})};Pe(()=>{});const he=r=>{if(console.log(r),r.code=="success"){let t=r.data.map(i=>i.fileUrl);d.filePath=d.filePath.concat(t)}},be=r=>{r.response},ye=r=>{E.value.files.push(r)},ge=r=>{if(console.log(r),r.code=="success"){let t=r.data.map(i=>i.fileUrl);n.filePath=n.filePath.concat(t)}},Ve=r=>{r.response},xe=r=>{E.value.files.push(r)};return(r,t)=>{const i=T("el-button"),p=T("el-table-column"),R=T("el-table"),w=T("el-input"),m=T("el-form-item"),L=T("el-date-picker"),te=T("el-checkbox"),O=T("el-form"),M=T("el-icon"),B=T("el-upload"),F=T("el-dialog");return v(),H("div",je,[e("span",Ye,[$e,e("span",Re,[e("span",Me,[e("span",{class:o(f.value==1?"num_selected":"num")},"1",2),e("span",{class:o(f.value>=1?"name_selected":"name")},"待处理",2)]),e("span",Be,[e("span",{class:o(f.value==3?"num_selected":"num")},"2",2),e("span",{class:o(f.value>=3?"name_selected":"name")},"入库",2)]),e("span",Fe,[e("span",{onClick:t[0]||(t[0]=s=>f.value=4),class:o(f.value==4?"num_selected":"num")},"3",2),e("span",{class:o(f.value>=4?"name_selected":"name")},"配送",2)]),e("span",He,[e("span",{class:o(f.value==5?"num_selected":"num")},"4",2),e("span",{class:o(f.value>=5?"name_selected":"name")},"安装",2)]),e("span",Je,[e("span",{class:o(f.value==6?"num_selected":"num")},"5",2),e("span",{class:o(f.value>=6?"name_selected":"name")},"完成",2)])])]),e("span",ze,[e("span",Ae,[c("任务详情 "),f.value>=5?(v(),g(i,{key:0,type:"primary",class:"primary_blue_btn"},{default:l(()=>[c("已派工配送")]),_:1})):y("",!0),f.value==6?(v(),g(i,{key:1,type:"primary",class:"primary_green_btn"},{default:l(()=>[c("已派工安装")]),_:1})):y("",!0)]),e("span",Ge,[e("span",Ke,[e("span",Qe,[We,e("span",Ze,D(S.value.taskid),1),y("",!0)]),e("span",et,[tt,e("span",at,D(S.value.distributorName),1)]),e("span",st,[lt,e("span",ot,D(S.value.followerName),1)])]),e("span",nt,[e("span",it,[rt,e("span",dt,D(S.value.accountName),1)]),e("span",pt,[ut,e("span",ct,D(S.value.createdBy),1)]),e("span",mt,[_t,e("span",ft,D(S.value.createdTime),1)])]),vt])]),e("span",ht,[bt,e("span",yt,[e("span",gt,[e("span",{class:o(V.value==1?"num_selected":"num")},"1",2),e("span",{class:o(V.value>=1?"name_selected":"name")},"...",2)]),e("span",Vt,[e("span",{class:o(V.value==2?"num_selected":"num")},"2",2),e("span",{class:o(V.value>=2?"name_selected":"name")},"已包装",2)]),e("span",xt,[e("span",{class:o(V.value==3?"num_selected":"num")},"3",2),e("span",{class:o(V.value>=3?"name_selected":"name")},"已成品入库",2)]),e("span",kt,[e("span",{class:o(V.value==4?"num_selected":"num")},"4",2),e("span",{class:o(V.value>=4?"name_selected":"name")},"已发货",2)]),e("span",wt,[e("span",{class:o(V.value==5?"num_selected":"num")},"5",2),e("span",{class:o(V.value>=5?"name_selected":"name")},"已经销商收货",2)]),e("span",Ct,[e("span",{class:o(V.value==6?"num_selected":"num")},"6",2),e("span",{class:o(f.value>=6?"name_selected":"name")},"订单完结",2)]),e("span",Tt,[e("span",{class:o(V.value==7?"num_selected":"num")},"7",2),e("span",{class:o(f.value>=7?"name_selected":"name")},"...",2)])])]),e("span",Dt,[St,e("span",It,[a(R,{data:oe.value,stripe:!1,style:{width:"100%"}},{default:l(()=>[a(p,{prop:"text1",label:"操作",width:"80px"},{default:l(s=>[e("div",{style:{display:"flex","align-items":"center",color:"#165dff",cursor:"pointer"},onClick:ae=>console.log(s)}," 查看 ",8,Pt)]),_:1}),a(p,{prop:"text2",label:"订单编号"}),a(p,{prop:"text3",label:"订单流程"}),a(p,{prop:"text4",label:"交期天数"}),a(p,{prop:"text5",label:"订货日期"}),a(p,{prop:"text6",label:"计划交货日期"}),a(p,{prop:"text7",label:"创建时间"})]),_:1},8,["data"])])]),e("span",qt,[Nt,e("span",Ut,[a(R,{data:ne.value,stripe:!1,style:{width:"100%"}},{default:l(()=>[a(p,{prop:"text1",label:"操作",width:"160px"},{default:l(s=>[e("div",{style:{display:"flex","align-items":"center",color:"#165dff",cursor:"pointer"},onClick:ae=>console.log(s)},[Xt,c("  "),Et],8,Ot)]),_:1}),a(p,{prop:"text2",label:"发货单编号"}),a(p,{prop:"text3",label:"发货单状态"}),a(p,{prop:"text4",label:"出库方式"}),a(p,{prop:"text5",label:"供应基地"}),a(p,{prop:"text6",label:"创建时间"})]),_:1},8,["data"])])]),e("span",Lt,[jt,e("span",Yt,[a(R,{data:j.value,stripe:!1,style:{width:"100%"}},{default:l(()=>[a(p,{prop:"view",label:"操作",width:"160px"},{default:l(s=>[e("div",$t,[e("span",{onClick:ae=>ce(s.row)},"查看",8,Rt)])]),_:1}),a(p,{prop:"id",label:"派工单编号"}),a(p,{prop:"stage__c",label:"状态"},{default:l(s=>[e("span",null,D(s.row.stage__c=="0"?"待开始":s.row.stage__c=="1"?"进行中":"已完成"),1)]),_:1}),a(p,{prop:"appointmentStartTime",label:"计划开始时间"}),a(p,{prop:"appointmentEndTime",label:"计划结束时间"}),a(p,{prop:"createTime",label:"创建时间"})]),_:1},8,["data"])])]),e("div",Mt,[e("div",{class:"left"},[Bt,e("span",{class:"initiate_comments",onClick:ve},"发起评论")]),e("div",Ft,[f.value==4?(v(),g(i,{key:0,type:"primary",onClick:ie,class:"primary_btn"},{default:l(()=>[c("创建配送派工单")]),_:1})):y("",!0),f.value==4?(v(),g(i,{key:1,type:"primary",onClick:t[1]||(t[1]=s=>{f.value=5,V.value=5}),class:"primary_btn"},{default:l(()=>[c("一键跳过配送")]),_:1})):y("",!0),f.value==5?(v(),g(i,{key:2,type:"primary",onClick:re,class:"primary_btn"},{default:l(()=>[c("创建安装派工单")]),_:1})):y("",!0),a(i,{type:"primary",onClick:_e,class:"primary_btn"},{default:l(()=>[c("问题提报")]),_:1})])]),(v(!0),H(qe,null,Ne(A.value,s=>(v(),H("div",{class:"comment",key:s.date},[e("div",Ht,[Jt,e("span",zt,D(s.userName),1)]),e("div",At,D(s.text),1),e("div",Gt,D(s.date),1),Kt,Qt]))),128)),e("div",Wt,[a(F,{modelValue:q.value,"onUpdate:modelValue":t[15]||(t[15]=s=>q.value=s),title:"新建配送派工单",width:"80%","show-close":!1},{footer:l(()=>[e("div",ia,[a(i,{class:"cancel_btn",onClick:t[14]||(t[14]=s=>q.value=!1)},{default:l(()=>[c("取消")]),_:1}),x.value==1?(v(),g(i,{key:0,type:"primary",class:"primary_btn",onClick:de},{default:l(()=>[c("下一步")]),_:1})):y("",!0),x.value==2?(v(),g(i,{key:1,type:"primary",class:"primary_btn",onClick:me},{default:l(()=>[c("完成")]),_:1})):y("",!0)])]),default:l(()=>[e("div",Zt,[e("span",ea,[e("span",{onClick:t[2]||(t[2]=s=>Y(1)),class:o(x.value==1?"num_selected":"num")},"1",2),e("span",{class:o(x.value>=1?"name_selected":"name")},[c("选择配送司机 "),ta],2)]),e("span",aa,[e("span",{onClick:t[3]||(t[3]=s=>Y(2)),class:o(x.value==2?"num_selected":"num")},"2",2),e("span",{class:o(x.value>=2?"name_selected":"name")},[c("输入派工单注意事项 "),sa],2)]),e("span",la,[e("span",{onClick:t[4]||(t[4]=s=>Y(3)),class:o(x.value==3?"num_selected":"num")},"3",2),e("span",{class:o(x.value>=3?"name_selected":"name")},[c("完成创建 "),oa],2)])]),e("div",na,[x.value==1?(v(),g(O,{key:0,model:_(d),rules:W,ref_key:"deliveryOrderFormRef",ref:Q,"label-width":"90px","label-position":"left"},{default:l(()=>[a(m,{label:"联系方式",prop:"contact_telephone"},{default:l(()=>[a(w,{modelValue:_(d).contact_telephone,"onUpdate:modelValue":t[5]||(t[5]=s=>_(d).contact_telephone=s),placeholder:"查找或输入配送司机手机号码"},null,8,["modelValue"])]),_:1}),a(m,{label:"人员名称",prop:"field_job_contact_name"},{default:l(()=>[a(w,{modelValue:_(d).field_job_contact_name,"onUpdate:modelValue":t[6]||(t[6]=s=>_(d).field_job_contact_name=s),placeholder:"查找或输入服务人员姓名"},null,8,["modelValue"])]),_:1}),a(m,{label:"预约开始",prop:"appointmentStartTime"},{default:l(()=>[a(L,{modelValue:_(d).appointmentStartTime,"onUpdate:modelValue":t[7]||(t[7]=s=>_(d).appointmentStartTime=s),type:"datetime",placeholder:"日期/时间","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue"])]),_:1}),a(m,{label:"预约结束",prop:"appointmentEndTime"},{default:l(()=>[a(L,{modelValue:_(d).appointmentEndTime,"onUpdate:modelValue":t[8]||(t[8]=s=>_(d).appointmentEndTime=s),type:"datetime",placeholder:"日期/时间","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue"])]),_:1}),a(m,{label:"是否具备安装条件",class:"check_item"},{default:l(()=>[e("span",null,[a(te,{modelValue:_(d).haveInstallConditions,"onUpdate:modelValue":t[9]||(t[9]=s=>_(d).haveInstallConditions=s)},null,8,["modelValue"])])]),_:1})]),_:1},8,["model","rules"])):y("",!0),x.value==2?(v(),g(O,{key:1,model:_(d),rules:W,ref_key:"deliveryOrderFormRef",ref:Q,"label-width":"90px","label-position":"left"},{default:l(()=>[a(m,{label:"优先级",prop:"priority"},{default:l(()=>[a(w,{placeholder:"1-最高 2-高 3-中 4-低",modelValue:_(d).priority,"onUpdate:modelValue":t[10]||(t[10]=s=>_(d).priority=s)},null,8,["modelValue"])]),_:1}),a(m,{label:"派工类型",prop:"type"},{default:l(()=>[a(w,{disabled:"",placeholder:"配送派工",modelValue:_(d).type,"onUpdate:modelValue":t[11]||(t[11]=s=>_(d).type=s)},null,8,["modelValue"])]),_:1}),a(m,{label:"派工单备注",class:"customLayout"},{default:l(()=>[a(w,{modelValue:_(d).remark,"onUpdate:modelValue":t[12]||(t[12]=s=>_(d).remark=s),rows:5,type:"textarea",maxlength:"500",placeholder:"请填写派工单备注","show-word-limit":""},null,8,["modelValue"])]),_:1}),a(m,{label:"上传图片",class:"custom_upload"},{default:l(()=>[a(B,{"on-success":he,"on-remove":be,"auto-upload":!0,data:E.value,headers:ee.value,"before-upload":ye,"file-list":_(d).fileList,"onUpdate:fileList":t[13]||(t[13]=s=>_(d).fileList=s),class:"avatar-uploader",action:"https://sh.mengtian.com.cn:9595/md/api/common/file/upload","show-file-list":!0,"list-type":"picture-card"},{default:l(()=>[a(M,{class:"avatar-uploader-icon"},{default:l(()=>[a(_(J))]),_:1})]),_:1},8,["data","headers","file-list"])]),_:1})]),_:1},8,["model","rules"])):y("",!0)])]),_:1},8,["modelValue"])]),e("div",ra,[a(F,{modelValue:N.value,"onUpdate:modelValue":t[27]||(t[27]=s=>N.value=s),title:"新建安装派工单",width:"80%","show-close":!1},{footer:l(()=>[e("div",ya,[a(i,{class:"cancel_btn",onClick:t[26]||(t[26]=s=>N.value=!1)},{default:l(()=>[c("取消")]),_:1}),k.value==1?(v(),g(i,{key:0,type:"primary",class:"primary_btn",onClick:pe},{default:l(()=>[c("下一步")]),_:1})):y("",!0),k.value==2?(v(),g(i,{key:1,type:"primary",class:"primary_btn",onClick:ue},{default:l(()=>[c("完成")]),_:1})):y("",!0)])]),default:l(()=>[e("div",da,[e("span",pa,[e("span",{onClick:t[16]||(t[16]=s=>$(1)),class:o(k.value==1?"num_selected":"num")},"1",2),e("span",{class:o(k.value>=1?"name_selected":"name")},[c("选择安装技工 "),ua],2)]),e("span",ca,[e("span",{onClick:t[17]||(t[17]=s=>$(2)),class:o(k.value==2?"num_selected":"num")},"2",2),e("span",{class:o(k.value>=2?"name_selected":"name")},[c("输入安装派工单注意事项 "),ma],2)]),e("span",_a,[e("span",{onClick:t[18]||(t[18]=s=>$(3)),class:o(k.value==3?"num_selected":"num")},"3",2),e("span",{class:o(k.value>=3?"name_selected":"name")},[c("完成创建 "),fa],2)])]),e("div",va,[k.value==1?(v(),g(O,{key:0,model:n,rules:Z,"label-width":"80px","label-position":"left"},{default:l(()=>[a(m,{label:"联系方式",prop:"phone"},{default:l(()=>[a(w,{placeholder:"输入联系方式",modelValue:n.phone,"onUpdate:modelValue":t[19]||(t[19]=s=>n.phone=s)},null,8,["modelValue"])]),_:1}),a(m,{label:"人员名称",prop:"username"},{default:l(()=>[a(w,{placeholder:"查找或输入服务人员姓名",modelValue:n.username,"onUpdate:modelValue":t[20]||(t[20]=s=>n.username=s)},null,8,["modelValue"])]),_:1}),a(m,{label:"预约开始",prop:"appointmentStartTime"},{default:l(()=>[a(L,{modelValue:n.appointmentStartTime,"onUpdate:modelValue":t[21]||(t[21]=s=>n.appointmentStartTime=s),type:"datetime",placeholder:"日期/时间","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue"])]),_:1}),a(m,{label:"预约结束",prop:"appointmentEndTime"},{default:l(()=>[a(L,{modelValue:n.appointmentEndTime,"onUpdate:modelValue":t[22]||(t[22]=s=>n.appointmentEndTime=s),type:"datetime",placeholder:"日期/时间","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue"])]),_:1}),a(m,{label:"安装小组"},{default:l(()=>[e("span",ha,[a(te,{modelValue:n.installationTeam,"onUpdate:modelValue":t[23]||(t[23]=s=>n.installationTeam=s)},null,8,["modelValue"])])]),_:1}),n.installationTeam?(v(),g(m,{key:0,label:"添加组员"},{default:l(()=>[ba]),_:1})):y("",!0)]),_:1},8,["model","rules"])):y("",!0),k.value==2?(v(),g(O,{key:1,model:n,rules:Z,"label-width":"90px","label-position":"left"},{default:l(()=>[a(m,{label:"优先级",prop:"priority"},{default:l(()=>[a(w,{modelValue:n.priority,"onUpdate:modelValue":t[24]||(t[24]=s=>n.priority=s),placeholder:"1-最高 2-高 3-中 4-低"},null,8,["modelValue"])]),_:1}),a(m,{label:"派工单备注",class:"customLayout"},{default:l(()=>[a(w,{modelValue:n.remark,"onUpdate:modelValue":t[25]||(t[25]=s=>n.remark=s),rows:5,type:"textarea",maxlength:"500",placeholder:"请填写派工单备注","show-word-limit":""},null,8,["modelValue"])]),_:1}),a(m,{label:"上传图片",class:"custom_upload"},{default:l(()=>[a(B,{"on-success":ge,"on-remove":Ve,"auto-upload":!0,data:E.value,headers:ee.value,"before-upload":xe,"file-list":n.fileList,"list-type":"picture-card",class:"avatar-uploader",action:"https://sh.mengtian.com.cn:9595/md/api/common/file/upload","show-file-list":!0},{default:l(()=>[a(M,{class:"avatar-uploader-icon"},{default:l(()=>[a(_(J))]),_:1})]),_:1},8,["data","headers","file-list"])]),_:1})]),_:1},8,["model","rules"])):y("",!0)])]),_:1},8,["modelValue"])]),e("div",ga,[a(F,{modelValue:U.value,"onUpdate:modelValue":t[34]||(t[34]=s=>U.value=s),title:"问题提报",width:"80%","show-close":!1},{footer:l(()=>[e("div",Da,[a(i,{class:"cancel_btn",onClick:t[33]||(t[33]=s=>U.value=!1)},{default:l(()=>[c("取消")]),_:1}),a(i,{type:"primary",class:"primary_btn",onClick:fe},{default:l(()=>[c("提交")]),_:1})])]),default:l(()=>[e("span",Va,[e("span",xa,[e("span",{class:o(K.value==1?"num_selected":"num")},"1",2),ka]),e("span",wa,[e("span",{class:o(K.value==2?"num_selected":"num")},"2",2),Ca])]),e("div",Ta,[a(O,{model:C,rules:le,"label-width":"90px","label-position":"left"},{default:l(()=>[a(m,{label:"订单编号",prop:"orderNo"},{default:l(()=>[a(w,{placeholder:"请选择订单编号",modelValue:C.orderNo,"onUpdate:modelValue":t[28]||(t[28]=s=>C.orderNo=s)},null,8,["modelValue"])]),_:1}),a(m,{label:"客户姓名",prop:"customerName"},{default:l(()=>[a(w,{placeholder:"请输入客户姓名",modelValue:C.customerName,"onUpdate:modelValue":t[29]||(t[29]=s=>C.customerName=s)},null,8,["modelValue"])]),_:1}),a(m,{label:"客户电话",prop:"customerPhone"},{default:l(()=>[a(w,{placeholder:"请输入客户电话",modelValue:C.customerPhone,"onUpdate:modelValue":t[30]||(t[30]=s=>C.customerPhone=s)},null,8,["modelValue"])]),_:1}),a(m,{label:"问题描述",class:"customLayout",prop:"desc"},{default:l(()=>[a(w,{modelValue:C.desc,"onUpdate:modelValue":t[31]||(t[31]=s=>C.desc=s),rows:5,type:"textarea",maxlength:"500",placeholder:"请输入问题描述","show-word-limit":""},null,8,["modelValue"])]),_:1}),a(m,{label:"上传图片",class:"custom_upload"},{default:l(()=>[a(B,{class:"avatar-uploader",action:"https://sh.mengtian.com.cn:9595/md/api/common/file/upload","show-file-list":!1,"file-list":C.fileList,"onUpdate:fileList":t[32]||(t[32]=s=>C.fileList=s)},{default:l(()=>[a(M,{class:"avatar-uploader-icon"},{default:l(()=>[a(_(J))]),_:1})]),_:1},8,["file-list"])]),_:1})]),_:1},8,["model","rules"])])]),_:1},8,["modelValue"])])])}}}),Ua=Le(Sa,[["__scopeId","data-v-858e8096"]]);export{Ua as default};
